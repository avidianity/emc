(this.webpackJsonpemc=this.webpackJsonpemc||[]).push([[0],{110:function(e,t,c){},111:function(e,t,c){},112:function(e,t,c){"use strict";c.r(t);var a=c(30),n=c.n(a);Error.prototype.toJSON=function(){var e={},t=this;return Object.getOwnPropertyNames(t).forEach((function(c){e[c]=t[c]}),t),"stack"in e&&(e.stack=e.stack.split(/\r?\n/).map((function(e){return e.trim()})).filter((function(e,t){return 0!==t}))),e},String.prototype.toNumber=function(){var e=this.split(".");if(e.length>1){var t=(e[0].match(/\d/g)||[]).join(""),c=(e[1].match(/\d/g)||[]).join("");return Number("".concat(t,".").concat(c))||0}var a=this.match(/\d/g);return a&&Number(a.join(""))||0},String.prototype.trim=function(){return Object(a.trim)(this.toString())};var s="1234567890qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM";String.random=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t="",c=0;c<e;c++)t+=s.charAt(Math.floor(Math.random()*s.length));return t},Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]},Array.prototype.first=function(){if(this.length>0)return this[0]},Array.prototype.last=function(){if(this.length>0)return this[this.length-1]},HTMLElement.prototype.disable=function(e){!1===e?this.removeAttribute("disabled"):this.setAttribute("disabled","disabled")};var r=c(28),l=c.n(r),i=(c(75),c(16)),o=c.n(i),d=c(38),u=c.n(d),j=(c(113),c(66),c(93),c(1)),b=c(6),m=c(11),h=c(120),f=function(){function e(t){Object(b.a)(this,e),this.id=void 0,this.name=void 0,this.id=Object(h.a)(),this.name=t}return Object(m.a)(e,[{key:"getID",value:function(){return this.id}},{key:"getName",value:function(){return this.name}},{key:"toString",value:function(){return"'".concat(this.id," - ").concat(this.name,"'")}}]),e}(),O=function(){function e(t,c){Object(b.a)(this,e),this.key=void 0,this.callback=void 0,this.key=t,this.callback=c}return Object(m.a)(e,[{key:"execute",value:function(e){this.callback(e)}},{key:"getKey",value:function(){return this.key}}]),e}(),x=function(){function e(){Object(b.a)(this,e),this.observers={}}return Object(m.a)(e,[{key:"listen",value:function(e,t){e in this.observers||(this.observers[e]=[]);var c=new f(e);return this.observers[e].unshift(new O(c,t)),c}},{key:"unlisten",value:function(e){var t=e.getName(),c=e.getID();if(t in this.observers){var a=this.observers[t].findIndex((function(e){return e.getKey().getID()===c}));a>=0&&this.observers[t].splice(a,1)}}},{key:"dispatch",value:function(e,t){return e in this.observers?(this.observers[e].forEach((function(e){return e.execute(t)})),this):this}}]),e}(),v=function(){function e(t){Object(b.a)(this,e),this.storage=void 0,this.key="emc-state-key",this.bus=void 0,this.storage=window.localStorage,this.bus=new x,t&&(this.key=t);var c=this.getAll();this.setAll(Object(j.a)({},c))}return Object(m.a)(e,[{key:"clear",value:function(){return this.setAll({})}},{key:"getAll",value:function(){try{var e=this.storage.getItem(this.key);return e?JSON.parse(e):{}}catch(t){return{}}}},{key:"setAll",value:function(e){return this.storage.setItem(this.key,JSON.stringify(e)),this}},{key:"has",value:function(e){return e in this.getAll()}},{key:"get",value:function(e){return this.has(e)?this.getAll()[e]:null}},{key:"set",value:function(e,t){var c=this.getAll();return c[e]=t,this.dispatch(e,t),this.setAll(c)}},{key:"remove",value:function(e){if(this.has(e)){var t=this.getAll();delete t[e],this.setAll(t)}return this}},{key:"dispatch",value:function(e,t){return this.bus.dispatch(e,t),this}},{key:"listen",value:function(e,t){return this.bus.listen(e,t)}},{key:"unlisten",value:function(e){return this.bus.unlisten(e),this}}],[{key:"getInstance",value:function(){return this.instance}}]),e}();v.instance=new v;c(94);var p=c(7),N=c.n(p),g=c(48),y=c.n(g),k=c(68),w=c.n(k);N.a.extend(y.a),N.a.extend(w.a),l.a.options.escapeHtml=!0,l.a.options.extendedTimeOut=2e3,window.toastr=l.a,window.$=u.a,window.jQuery=u.a;o.a.defaults.baseURL="".concat("","/api"),o.a.defaults.withCredentials=!0,o.a.defaults.headers.common.Accept="application/json",o.a.get("".concat("","/sanctum/csrf-cookie")).catch(console.error);var S=v.getInstance();if(S.has("token")){var _=S.get("token");o.a.defaults.headers.common.Authorization="Bearer ".concat(_)}S.listen("token",(function(e){o.a.defaults.headers.common.Authorization="Bearer ".concat(e)})),o.a.interceptors.request.use((function(e){return S.has("token")&&(e.headers.Authorization="Bearer ".concat(S.get("token"))),e}));var F=c(2),C=c.n(F),D=c(52),A=c.n(D),Y=c(9),E=c(3),M=c.n(E),R=c(5),I=c(8),P=c(12),B="/admissions",T="/dashboard",L="/",U="/forgot-password",W="/change-password",G="/login",V="/pre-registration",J="/courses",q="/students",K="/teachers",H="/registrars",z="/schedules",Z="/subjects",Q="/users",X="/mails",ee="/school-years",te="/grades",ce="/enrollment",ae="/profile",ne="/admission-requirements",se="/logs",re="/units",le=c(4),ie=c(121);function oe(){var e=Object(P.h)();return function(t){return"".concat(e.path).concat(t)}}function de(){return Object(F.useState)("Add")}function ue(e){return Object(F.useState)(e||null)}function je(e){return Object(F.useState)(e||[])}function be(e){return Object(ie.a)(["years","current"],Object(R.a)(M.a.mark((function e(){var t,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/years/current");case 2:if(t=e.sent,!(c=t.data)){e.next=6;break}return e.abrupt("return",c);case 6:return e.abrupt("return",void 0);case 7:case"end":return e.stop()}}),e)}))),{onSuccess:function(t){null===e||void 0===e||e.onSuccess(t)}})}var me=c(18),he=(c(17),c(46)),fe=c.n(he);N.a.extend(y.a);var Oe=function(){function e(){Object(b.a)(this,e)}return Object(m.a)(e,null,[{key:"notice",value:function(){var e=Object(R.a)(M.a.mark((function e(t,c){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ne,e.next=3,fe()({title:c,text:t,buttons:["Cancel","Confirm"],icon:"warning"});case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}()},{key:"danger",value:function(){var e=Object(R.a)(M.a.mark((function e(t,c){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ne,e.next=3,fe()({title:c,text:t,buttons:["Cancel","Confirm"],dangerMode:!0,icon:"warning"});case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(R.a)(M.a.mark((function e(t,c){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ne,e.next=3,fe()({title:c,text:t,buttons:["Cancel","Save"],icon:"info"});case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}()},{key:"okay",value:function(){var e=Object(R.a)(M.a.mark((function e(t,c){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ne,e.next=3,fe()({title:c,text:t,icon:"info"});case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}()}]),e}();function xe(e){var t;return void 0===(null===(t=e.admissions)||void 0===t?void 0:t.find((function(e){var t;return null===(t=e.year)||void 0===t?void 0:t.current})))}function ve(e){var t,c,a=null===(t=e.sections)||void 0===t?void 0:t.find((function(e){var t;return null===(t=e.year)||void 0===t?void 0:t.current}));return a||(null===(c=e.sections)||void 0===c?void 0:c.last())}function pe(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e?t:c}function Ne(e){return!!e}function ge(e){return Object(a.isArray)(e)}function ye(e){return Object(a.trim)(JSON.stringify(e))}function ke(e){var t=e.split("");return t[0]=t[0].toUpperCase(),t.join("")}function we(e,t){for(var c in t)e(c,t[c])}var Se=null,_e=null;function Fe(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return l.a.error("Something went wrong, please try again later.","Oops!");if(e.response){var c=e.response;if(c.data.errors&&422===c.status)return Object.values(c.data.errors).map((function(e){return e.map((function(e){return l.a.error(e)}))}));if(c.data.message){if([500,400,403,404].includes(c.status))return l.a.error(c.data.message);if(401===c.status)return void(null===_e&&(l.a.error("Authentication has expired. Please try logging in and try again."),_e=setTimeout((function(){null!==_e&&(clearTimeout(_e),_e=null)}),5e3)));if(ge(c.data.message))return c.data.message.forEach((function(e){return l.a.error(Ce(e),void 0,{extendedTimeOut:2e3})}));if(Object(a.isString)(c.data.message))return l.a.error(Ce(c.data.message))}}else if(e.message){if(!e.message.includes("Network Error"))return l.a.error(e.message);if(null===Se&&t)return l.a.error("Unable to connect. Please check your internet connection or the server may be down."),void(Se=setTimeout((function(){null!==Se&&(clearTimeout(Se),Se=null)}),5e3))}}function Ce(e){return ke(n.a.snakeCase(e).split("_").map((function(e){return"id"===e.toLowerCase()?"ID":e})).join(" "))}new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"});var De=c(14),Ae=c(13),Ye=function(){function e(t){Object(b.a)(this,e),this.url=void 0,this.url=t}return Object(m.a)(e,[{key:"fetch",value:function(){var e=Object(R.a)(M.a.mark((function e(t){var c,a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get(this.resolveURL(t));case 2:return c=e.sent,a=c.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOne",value:function(){var e=Object(R.a)(M.a.mark((function e(t,c){var a,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("".concat(this.resolveURL(c),"/").concat(t));case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,c){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(R.a)(M.a.mark((function e(t,c){var a,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("".concat(this.resolveURL(c)),t);case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,c){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(R.a)(M.a.mark((function e(t,c,a){var n,s;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.put("".concat(this.resolveURL(a),"/").concat(t),c);case 2:return n=e.sent,s=n.data,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e,this)})));return function(t,c,a){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(R.a)(M.a.mark((function e(t,c){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.delete("".concat(this.resolveURL(c),"/").concat(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t,c){return e.apply(this,arguments)}}()},{key:"resolveURL",value:function(e){return"".concat(this.url).concat(e?"?".concat(new URLSearchParams(e).toString()):"")}}]),e}(),Ee=new(function(e){Object(De.a)(c,e);var t=Object(Ae.a)(c);function c(){return Object(b.a)(this,c),t.apply(this,arguments)}return c}(Ye))("/admissions"),Me=c(22),Re=c.n(Me),Ie=new(function(e){Object(De.a)(c,e);var t=Object(Ae.a)(c);function c(){return Object(b.a)(this,c),t.apply(this,arguments)}return c}(Ye))("/courses"),Pe=new(function(e){Object(De.a)(c,e);var t=Object(Ae.a)(c);function c(){return Object(b.a)(this,c),t.apply(this,arguments)}return c}(Ye))("/years"),Be=new(function(e){Object(De.a)(c,e);var t=Object(Ae.a)(c);function c(){return Object(b.a)(this,c),t.apply(this,arguments)}return c}(Ye))("/users"),Te=c(33),Le=c.n(Te),Ue=c(0),We=function(e){var t=Object(F.useState)(!1),c=Object(le.a)(t,2),a=c[0],n=c[1],s=de(),r=Object(le.a)(s,2),l=r[0],i=r[1],o=Object(me.a)({defaultValues:{force:!1}}),d=o.register,u=o.setValue,b=o.handleSubmit,m=o.reset,h=Object(F.useState)(-1),f=Object(le.a)(h,2),O=f[0],x=f[1],v=Object(P.f)(),p=Object(P.h)(),g=ue(),y=Object(le.a)(g,2),k=y[0],w=y[1],S=ue(),_=Object(le.a)(S,2),C=_[0],D=_[1],A=Object(F.useState)(""),Y=Object(le.a)(A,2),E=Y[0],I=Y[1],B=ue(),T=Object(le.a)(B,2),L=T[0],U=T[1],W=Object(ie.a)("courses",(function(){return Ie.fetch()})).data,$=Object(ie.a)("years",(function(){return Pe.fetch()})).data,G=function(){var e=Object(R.a)(M.a.mark((function e(t){var c,a,n,s;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ee.fetchOne(t);case 3:if(n=e.sent,x(n.id),we(u,n),w(N()(null===(c=n.student)||void 0===c?void 0:c.birthday).toDate()),n.student)for(s in n.student)u("student.".concat(s),n.student[s]);U(n.course),n.major_id&&D(n.major_id),I(null===(a=n.student)||void 0===a?void 0:a.number),i("Edit"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),Fe(e.t0),v.goBack();case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(R.a)(M.a.mark((function e(t){var c,a,s,r,i;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(((null===L||void 0===L||null===(c=L.majors)||void 0===c?void 0:c.length)||0)>0)||C){e.next=2;break}return e.abrupt("return",toastr.error("Please pick a major."));case 2:return n(!0),e.prev=3,C&&(t.major_id=C),t.requirements=[],t.student.number=E,t.student.birthday=null===k||void 0===k?void 0:k.toJSON(),t.year_id=null===$||void 0===$||null===(a=$.find((function(e){return e.current})))||void 0===a?void 0:a.id,e.next=11,"Add"===l?Ee.create(t):Ee.update(O,t);case 11:toastr.success("Admission has been saved successfully."),w(null),m(),e.next=30;break;case 16:if(e.prev=16,e.t0=e.catch(3),409!==(null===(s=e.t0.response)||void 0===s?void 0:s.status)){e.next=28;break}return e.next=21,Oe.save(null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message);case 21:if(!e.sent){e.next=26;break}return t.force=!0,e.next=25,V(t);case 25:return e.abrupt("return");case 26:e.next=30;break;case 28:console.log("haha"),Fe(e.t0);case 30:return e.prev=30,n(!1),e.finish(30);case 33:case"end":return e.stop()}}),e,null,[[3,16,30,33]])})));return function(t){return e.apply(this,arguments)}}();return Object(F.useEffect)((function(){p.path.includes("edit")?G(p.params.id):Be.fetch().then((function(e){u("student.uuid","student-".concat("".concat(e.filter((function(e){return"Student"===e.role})).length+1).padStart(5,"0"),"-").concat((new Date).getFullYear()))}))}),[]),Object(Ue.jsx)("div",{className:"container-fluid",children:Object(Ue.jsx)("div",{className:"card",children:Object(Ue.jsxs)("div",{className:"card-body",children:[Object(Ue.jsxs)("h5",{className:"card-title",children:[l," Admission"]}),Object(Ue.jsxs)("form",{onSubmit:b(V),children:[Object(Ue.jsxs)("div",{className:"form-row",children:[Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"first_name",children:"First Name"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("student.first_name")),{},{type:"text",id:"first_name",className:"form-control",disabled:a}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"year_id",children:"School Year"}),Object(Ue.jsx)("select",{id:"year_id",className:"form-control",disabled:!0,children:null===$||void 0===$?void 0:$.filter((function(e){return e.current})).map((function(e,t){return Object(Ue.jsxs)("option",{value:e.id,children:[e.start," - ",e.end]},t)}))})]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"middle_name",children:"Middle Name"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("student.middle_name")),{},{type:"text",id:"middle_name",className:"form-control",disabled:a}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"uuid",children:"Student Number"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("student.uuid")),{},{type:"text",id:"uuid",className:"form-control",readOnly:!0}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"last_name",children:"Last Name"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("student.last_name")),{},{type:"text",id:"last_name",className:"form-control",disabled:a}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"address",children:"Address"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("student.address")),{},{type:"text",id:"address",className:"form-control",disabled:a}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"gender",children:"Gender"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},d("student.gender")),{},{id:"gender",className:"form-control",disabled:a,children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),Object(Ue.jsx)("option",{value:"Male",children:"Male"}),Object(Ue.jsx)("option",{value:"Female",children:"Female"})]}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"email",children:"Email Address"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("student.email")),{},{type:"email",id:"email",className:"form-control"}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"birthday",children:"Birthday"}),Object(Ue.jsx)(Re.a,{value:k||void 0,id:"birthday",options:{maxDate:N()().year((new Date).getFullYear()-15).toDate()},onChange:function(e){e.length>0&&w(e[0])},className:"form-control",disabled:a})]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"number",children:"Phone Number"}),Object(Ue.jsx)(Le.a,{mask:"0\\999-999-9999",type:"text",id:"number",className:"form-control",disabled:a,value:E,onChange:function(e){return I(e.target.value)}})]}),Object(Ue.jsx)("div",{className:"col-12 d-flex",children:Object(Ue.jsx)("i",{className:"ml-auto",children:"Student user account credentials will be sent via email."})}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"fathers_name",children:"Name of Father"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("student.fathers_name")),{},{type:"text",id:"fathers_name",className:"form-control"}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"mothers_name",children:"Name of Mother"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("student.mothers_name")),{},{type:"text",id:"mothers_name",className:"form-control"}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"fathers_occupation",children:"Occupation of Father"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("student.fathers_occupation")),{},{type:"text",id:"fathers_occupation",className:"form-control"}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"mothers_occupation",children:"Occupation of Mother"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("student.mothers_occupation")),{},{type:"text",id:"mothers_occupation",className:"form-control"}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"course_id",children:"Course"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},d("course_id")),{},{id:"course_id",className:"form-control",onChange:function(e){var t=e.target.value.toNumber(),c=null===W||void 0===W?void 0:W.find((function(e){return e.id===t}));U(c||null)},children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),null===W||void 0===W?void 0:W.filter((function(e){return e.open})).map((function(e,t){return Object(Ue.jsx)("option",{value:e.id,children:e.description},t)}))]}))]}),L&&L.majors&&L.majors.length>0?Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"major_id",children:"Major"}),Object(Ue.jsxs)("select",{id:"major_id",className:"form-control",onChange:function(e){D(e.target.value.toNumber())},value:"".concat(C),children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),L.majors.map((function(e,t){return Object(Ue.jsx)("option",{value:e.id,children:e.name},t)}))]})]}):null,Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"term",children:"Term"}),Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)("div",{className:"col-12 col-md-4",children:Object(Ue.jsxs)("div",{className:"custom-control custom-radio",children:[Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("term")),{},{type:"radio",id:"1st-semester",className:"custom-control-input",value:"1st Semester"})),Object(Ue.jsx)("label",{className:"custom-control-label",htmlFor:"1st-semester",children:"1st Semester"})]})}),Object(Ue.jsx)("div",{className:"col-12 col-md-4",children:Object(Ue.jsxs)("div",{className:"custom-control custom-radio",children:[Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("term")),{},{type:"radio",id:"2nd-semester",className:"custom-control-input",value:"2nd Semester"})),Object(Ue.jsx)("label",{className:"custom-control-label",htmlFor:"2nd-semester",children:"2nd Semester"})]})}),Object(Ue.jsx)("div",{className:"col-12 col-md-4",children:Object(Ue.jsxs)("div",{className:"custom-control custom-radio",children:[Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("term")),{},{type:"radio",id:"summer",className:"custom-control-input",value:"Summer"})),Object(Ue.jsx)("label",{className:"custom-control-label",htmlFor:"summer",children:"Summer"})]})})]})]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"level",children:"Year Level"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},d("level")),{},{id:"level",className:"form-control",children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),Object(Ue.jsx)("option",{value:"1st",children:"1st"}),Object(Ue.jsx)("option",{value:"2nd",children:"2nd"}),Object(Ue.jsx)("option",{value:"3rd",children:"3rd"}),Object(Ue.jsx)("option",{value:"4th",children:"4th"}),Object(Ue.jsx)("option",{value:"5th",children:"5th"})]}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"status",children:"Student Status"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},d("status")),{},{id:"status",className:"form-control",children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),Object(Ue.jsx)("option",{value:"Regular",children:"Regular"}),Object(Ue.jsx)("option",{value:"Irregular",children:"Irregular"})]}))]})]}),Object(Ue.jsxs)("div",{className:"form-group d-flex",children:[Object(Ue.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){return v.goBack()},disabled:a,children:"Return"}),Object(Ue.jsx)("button",{type:"submit",className:"btn btn-primary ml-auto",disabled:a,children:"Submit"})]})]})]})})})},$e=c(70),Ge=c.n($e),Ve=function(e){var t=e.columns,c=e.title,a=e.buttons,n=e.loading,s=e.onRefresh,r=e.items,l=e.misc,i=v.getInstance(),o=Object(F.useState)(i.get("mode")||"dark"),d=Object(le.a)(o,2),u=d[0],b=d[1],m=Object(F.useState)(r),h=Object(le.a)(m,2),f=h[0],O=h[1];return Object(F.useEffect)((function(){O(r)}),[r]),Object(F.useEffect)((function(){var e=i.listen("mode",(function(e){return b(e)}));return function(){i.unlisten(e)}}),[]),Object(Ue.jsx)("div",{className:"container-fluid",children:Object(Ue.jsxs)("div",{className:"card shadow",children:[Object(Ue.jsx)("div",{className:"card-header",children:Object(Ue.jsx)("div",{className:"container-fluid",children:Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsxs)("div",{className:"col-12 d-flex align-items-center",children:[Object(Ue.jsx)("h4",{className:"card-title mb-0",children:c}),Object(Ue.jsx)("button",{className:"btn btn-info btn-sm ml-auto",disabled:n,onClick:function(e){e.preventDefault(),s()},title:"Refresh",children:Object(Ue.jsx)("i",{className:"fas fa-sync-alt ".concat(pe(n,"fa-spin"))})}),a]}),l?Object(Ue.jsx)("div",{className:"col-12",children:l}):null]})})}),Object(Ue.jsx)("div",{className:"card-body table-responsive",children:Object(Ue.jsx)(Ge.a,{columns:t.map((function(e){return Object(j.a)({name:e.title,selector:function(t){return t[e.accessor]},sortable:!0},e)})),data:f,pagination:!0,fixedHeader:!0,subHeader:!0,subHeaderComponent:Object(Ue.jsx)("div",{className:"d-flex align-items-center",children:Object(Ue.jsx)("input",{type:"text",placeholder:"Search",className:"form-control",onChange:function(e){var t=e.target.value;t.length>0?O(r.filter((function(e){for(var c=0,a=Object.keys(e);c<a.length;c++){var n=e[a[c]];if(n&&n.toString().includes(t))return!0}return!1}))):O(r)}})}),theme:"dark"===u?"dark":"default"})})]})})},Je=function(e){var t=Object(ie.a)("admissions",(function(){return Ee.fetch()})),c=t.data,a=t.isFetching,n=t.isError,s=t.error,r=t.refetch,l=oe(),i=function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be.update(t.id,{active:!t.active});case 3:toastr.success("Student ".concat(t.active?"disabled":"enabled"," successfully.")),r(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Fe(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();n&&Fe(s);var o=function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe.danger("Are you sure you want to delete this Admission?");case 3:if(!e.sent){e.next=8;break}return e.next=6,Ee.delete(t);case 6:toastr.info("Admission has been deleted.","Notice"),r();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),Fe(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),d=v.getInstance().get("user"),u=[{title:"Student ID Number",accessor:"id_number",minWidth:"160px"},{title:"Student",accessor:"student",minWidth:"250px"},{title:"Gender",accessor:"gender"},{title:"Course",accessor:"course",minWidth:"350px"},{title:"Year Level",accessor:"level"},{title:"Semester",accessor:"term"},{title:"Requirements",accessor:"requirements",minWidth:"200px"}];return"Registrar"===(null===d||void 0===d?void 0:d.role)&&u.push({title:"Actions",accessor:"actions"}),Object(Ue.jsx)(Ve,{onRefresh:function(){return r()},title:"Admissions",loading:a,items:(null===c||void 0===c?void 0:c.filter((function(e){var t;return!(null===(t=e.student)||void 0===t?void 0:t.active)&&!e.done})).map((function(e){var t,c,a,n,s,r,u,b,m,h;return Object(j.a)(Object(j.a)({},e),{},{id_number:null===(t=e.student)||void 0===t?void 0:t.uuid,student:"".concat(null===(c=e.student)||void 0===c?void 0:c.last_name,", ").concat(null===(a=e.student)||void 0===a?void 0:a.first_name," ").concat((null===(n=e.student)||void 0===n?void 0:n.middle_name)||""),gender:null===(s=e.student)||void 0===s?void 0:s.gender,course:"".concat(null===(r=e.course)||void 0===r?void 0:r.code).concat(e.major?" - Major in ".concat(e.major.name):""),requirements:null===(u=e.requirements)||void 0===u?void 0:u.map((function(e,t){return Object(Ue.jsx)("span",{className:"d-block",children:e},t)})),actions:"Registrar"===(null===d||void 0===d?void 0:d.role)?Object(Ue.jsxs)("div",{style:{minWidth:"350px"},children:[Object(Ue.jsx)(I.b,{to:l("".concat(e.id,"/edit")),className:"btn btn-warning btn-sm mx-1",title:"Edit",children:Object(Ue.jsx)("i",{className:"fas fa-edit"})}),Object(Ue.jsx)("button",{className:"btn btn-".concat((null===(b=e.student)||void 0===b?void 0:b.active)?"danger":"info"," btn-sm mx-1"),onClick:function(){var t=Object(R.a)(M.a.mark((function t(c){var a;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),t.next=3,Oe.notice("Are you sure you want to ".concat((null===(a=e.student)||void 0===a?void 0:a.active)?"unconfirm":"confirm"," this student?"));case 3:if(!t.sent){t.next=5;break}i(e.student);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),title:(null===(m=e.student)||void 0===m?void 0:m.active)?"Unconfirm":"Confirm",children:Object(Ue.jsx)("i",{className:"fas fa-user-".concat((null===(h=e.student)||void 0===h?void 0:h.active)?"times":"check")})}),Object(Ue.jsx)("button",{className:"btn btn-danger btn-sm mx-1",onClick:function(t){t.preventDefault(),o(e.id)},children:Object(Ue.jsx)("i",{className:"fas fa-trash"})})]}):null})})))||[],columns:u,buttons:Object(Ue.jsx)(Ue.Fragment,{children:"Registrar"===(null===d||void 0===d?void 0:d.role)?Object(Ue.jsx)(I.b,{to:l("add"),className:"btn btn-primary btn-sm ml-2",children:Object(Ue.jsx)("i",{className:"fas fa-plus"})}):null})})},qe=function(e){var t=oe(),c=[{path:t("/"),exact:!0,component:Je},{path:t("/add"),component:We},{path:t("/:id/edit"),component:We}];return Object(Ue.jsx)(P.c,{children:c.map((function(e,t){return Object(F.createElement)(P.a,Object(j.a)(Object(j.a)({},e),{},{key:t}))}))})},Ke=function(e){var t=Object(F.useState)(!1),c=Object(le.a)(t,2),a=c[0],n=c[1],s=Object(me.a)(),r=s.register,l=s.handleSubmit,i=function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,e.next=4,o.a.post("/auth/change-password",t);case 4:toastr.success("Password changed successfully."),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),Fe(e.t0);case 10:return e.prev=10,n(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(Ue.jsx)("div",{className:"container-fluid d-flex",children:Object(Ue.jsx)("div",{className:"mx-auto",children:Object(Ue.jsxs)("form",{onSubmit:l(i),children:[Object(Ue.jsxs)("div",{className:"form-group",children:[Object(Ue.jsx)("label",{htmlFor:"old_password",children:"Old Password"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},r("old_password")),{},{type:"password",id:"old_password",className:"form-control",disabled:a}))]}),Object(Ue.jsxs)("div",{className:"form-group",children:[Object(Ue.jsx)("label",{htmlFor:"new_password",children:"New Password"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},r("new_password")),{},{type:"password",id:"new_password",className:"form-control",disabled:a,pattern:"^(?=\\P{Ll}*\\p{Ll})(?=\\P{Lu}*\\p{Lu})(?=\\P{N}*\\p{N})(?=[\\p{L}\\p{N}]*[^\\p{L}\\p{N}])[\\s\\S]{8,}$"})),Object(Ue.jsx)("small",{className:"form-text text-muted",children:"Password must contain atleast uppercase and lowercase letters, numbers and special characters."})]}),Object(Ue.jsx)("div",{className:"form-group",children:Object(Ue.jsx)("button",{type:"submit",className:"btn btn-primary btn-sm",disabled:a,children:"Submit"})})]})})})},He=function(e){var t=Object(F.useState)(!1),c=Object(le.a)(t,2),a=c[0],n=c[1],s=de(),r=Object(le.a)(s,2),l=r[0],i=r[1],o=Object(me.a)({defaultValues:{force:!1}}),d=o.register,u=o.setValue,b=o.handleSubmit,m=o.reset,h=Object(F.useState)(-1),f=Object(le.a)(h,2),O=f[0],x=f[1],v=je(),p=Object(le.a)(v,2),N=p[0],g=p[1],y=Object(P.f)(),k=Object(P.h)(),w=function(){var e=Object(R.a)(M.a.mark((function e(t){var c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ie.fetchOne(t);case 3:c=e.sent,x(c.id),we(u,c),g(c.majors),i("Edit"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),Fe(e.t0),y.goBack();case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(R.a)(M.a.mark((function e(t){var c,a,s,r,i;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=0,a=[/[A-Z]{4}/g,/[A-Z]{4} - [A-Z]{1,}/g];case 2:if(!(c<a.length)){e.next=35;break}if(!a[c].test(t.code)){e.next=32;break}return n(!0),e.prev=6,t.majors=N,e.next=10,"Add"===l?Ie.create(t):Ie.update(O,t);case 10:return toastr.success("Course has been saved successfully."),g([]),e.abrupt("return",m());case 15:if(e.prev=15,e.t0=e.catch(6),409!==(null===(s=e.t0.response)||void 0===s?void 0:s.status)){e.next=27;break}return e.next=20,Oe.save(null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message);case 20:if(!e.sent){e.next=25;break}return t.force=!0,e.next=24,S(t);case 24:return e.abrupt("return");case 25:e.next=28;break;case 27:Fe(e.t0);case 28:return e.prev=28,n(!1),e.finish(28);case 31:return e.abrupt("return");case 32:c++,e.next=2;break;case 35:return e.abrupt("return",toastr.error("Course Code does not follow correct format."));case 36:case"end":return e.stop()}}),e,null,[[6,15,28,31]])})));return function(t){return e.apply(this,arguments)}}();return Object(F.useEffect)((function(){k.path.includes("edit")&&w(k.params.id)}),[]),Object(Ue.jsx)("div",{className:"container-fluid",children:Object(Ue.jsx)("div",{className:"card",children:Object(Ue.jsxs)("div",{className:"card-body",children:[Object(Ue.jsxs)("h5",{className:"card-title",children:[l," Course"]}),Object(Ue.jsxs)("form",{onSubmit:b(S),children:[Object(Ue.jsxs)("div",{className:"form-group",children:[Object(Ue.jsx)("label",{htmlFor:"code",children:"Course Code"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("code")),{},{type:"text",id:"code",className:"form-control",disabled:a})),Object(Ue.jsx)("small",{className:"form-text text-muted",children:"Course code may not be editable in the future, be careful on your entry."})]}),Object(Ue.jsxs)("div",{className:"form-group",children:[Object(Ue.jsx)("label",{htmlFor:"description",children:"Course Description"}),Object(Ue.jsx)("textarea",Object(j.a)(Object(j.a)({},d("description")),{},{id:"description",cols:30,rows:4,className:"form-control",disabled:a}))]}),Object(Ue.jsx)("div",{className:"form-group",children:Object(Ue.jsxs)("div",{className:"custom-control custom-checkbox",children:[Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("open")),{},{type:"checkbox",className:"custom-control-input",id:"open",disabled:a})),Object(Ue.jsx)("label",{className:"custom-control-label",htmlFor:"open",children:"Open for Enrollment"})]})}),Object(Ue.jsxs)("div",{className:"form-group",children:[Object(Ue.jsx)("h4",{children:"Majors"}),Object(Ue.jsx)("button",{className:"btn btn-info btn-sm",onClick:function(e){e.preventDefault(),N.push({name:"",course_id:0,short_name:""}),g(Object(Y.a)(N))},children:"Add"}),Object(Ue.jsxs)("small",{className:"my-3 form-text text-muted",children:["Example: ",Object(Ue.jsx)("br",{}),"Name: 'Mathematics'",Object(Ue.jsx)("br",{})," Short Name: 'M'"]}),Object(Ue.jsx)("div",{className:"row",children:N.map((function(e,t){return Object(Ue.jsx)("div",{className:"col-12 col-md-6 col-lg-4 col-xl-3 p-2",children:Object(Ue.jsxs)("div",{className:"p-2 border rounded",children:[Object(Ue.jsx)("button",{className:"btn btn-danger btn-sm mb-2",onClick:function(e){e.preventDefault(),N.splice(t,1),g(Object(Y.a)(N))},children:"Remove"}),Object(Ue.jsx)("div",{className:"my-2",children:Object(Ue.jsxs)("h5",{className:"mb-0",children:["Major ",t+1]})}),Object(Ue.jsxs)("div",{className:"form-group",children:[Object(Ue.jsx)("label",{htmlFor:"name-".concat(t),children:"Name"}),Object(Ue.jsx)("input",{type:"text",id:"name-".concat(t),className:"form-control",onChange:function(c){e.name=c.target.value,N.splice(t,1,e),g(Object(Y.a)(N))},value:e.name})]}),Object(Ue.jsxs)("div",{className:"form-group",children:[Object(Ue.jsx)("label",{htmlFor:"short-name-".concat(t),children:"Short Name"}),Object(Ue.jsx)("input",{type:"text",id:"short-name-".concat(t),className:"form-control",onChange:function(c){e.short_name=c.target.value,N.splice(t,1,e),g(Object(Y.a)(N))},value:e.short_name})]})]})},t)}))})]}),Object(Ue.jsxs)("div",{className:"form-group d-flex",children:[Object(Ue.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){return y.goBack()},disabled:a,children:"Return"}),Object(Ue.jsx)("button",{type:"submit",className:"btn btn-primary ml-auto",disabled:a,children:"Submit"})]})]})]})})})},ze=function(e){var t=Object(ie.a)("courses",(function(){return Ie.fetch()})),c=t.data,a=t.isFetching,n=t.isError,s=t.error,r=t.refetch,l=oe();n&&Fe(s);var i=function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe.danger("Are you sure you want to delete this Course?");case 3:if(!e.sent){e.next=8;break}return e.next=6,Ie.delete(t);case 6:toastr.info("Course has been deleted.","Notice"),r();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),Fe(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),o=v.getInstance().get("user"),d=[{title:"Course Code",accessor:"code"},{title:"Course Description",accessor:"description",minWidth:"350px"},{title:"Majors",accessor:"majors",minWidth:"250px"},{title:"Status",accessor:"open",minWidth:"150px"}];return"Registrar"===(null===o||void 0===o?void 0:o.role)&&d.push({title:"Actions",accessor:"actions",minWidth:"150px"}),Object(Ue.jsx)(Ve,{onRefresh:function(){return r()},title:"Courses",loading:a,items:(null===c||void 0===c?void 0:c.map((function(e){var t;return Object(j.a)(Object(j.a)({},e),{},{open:e.open?Object(Ue.jsx)("span",{className:"badge badge-success",children:"Open for Enrollment"}):Object(Ue.jsx)("span",{className:"badge badge-danger",children:"Not Open for Enrollment"}),majors:null===(t=e.majors)||void 0===t?void 0:t.map((function(e,t){return Object(Ue.jsx)("span",{className:"d-block",children:e.name},t)})),actions:"Registrar"===(null===o||void 0===o?void 0:o.role)?Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsx)(I.b,{to:l("".concat(e.id,"/edit")),className:"btn btn-warning btn-sm mx-1",children:Object(Ue.jsx)("i",{className:"fas fa-edit"})}),Object(Ue.jsx)("button",{className:"btn btn-danger btn-sm mx-1",onClick:function(t){t.preventDefault(),i(e.id)},children:Object(Ue.jsx)("i",{className:"fas fa-trash"})})]}):null})})))||[],columns:d,buttons:Object(Ue.jsx)(Ue.Fragment,{children:"Registrar"===(null===o||void 0===o?void 0:o.role)?Object(Ue.jsx)(I.b,{to:l("add"),className:"btn btn-primary btn-sm ml-2",children:Object(Ue.jsx)("i",{className:"fas fa-plus"})}):null})})},Ze=function(e){var t=oe(),c=[{path:t("/"),exact:!0,component:ze},{path:t("/add"),component:He},{path:t("/:id/edit"),component:He}];return Object(Ue.jsx)(P.c,{children:c.map((function(e,t){return Object(F.createElement)(P.a,Object(j.a)(Object(j.a)({},e),{},{key:t}))}))})},Qe=c(47);Qe.a.register.apply(Qe.a,Object(Y.a)(Qe.b));var Xe=function(e){var t=v.getInstance().get("user"),c=Object(F.useState)({students:{old:0,new:0,total:0},courses:[],genders:{males:0,females:0},graduates:0,enrollees:{pending:0},subjects:[]}),a=Object(le.a)(c,2),n=a[0],s=a[1],r=function(){var e=Object(R.a)(M.a.mark((function e(){var t,c,a,n,r,l,i,d;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([o.a.get("/analytics/students").then((function(e){return e.data})),o.a.get("/analytics/courses").then((function(e){return e.data})),o.a.get("/analytics/genders").then((function(e){return e.data})),o.a.get("/analytics/graduates").then((function(e){return e.data})),o.a.get("/analytics/enrollees").then((function(e){return e.data})),o.a.get("/analytics/subjects").then((function(e){return e.data}))]);case 3:return t=e.sent,c=Object(le.a)(t,6),a=c[0],n=c[1],r=c[2],l=c[3],i=c[4],d=c[5],s({students:a,courses:n,subjects:d,genders:r,graduates:l,enrollees:i}),e.abrupt("return",{courses:n,subjects:d});case 15:return e.prev=15,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{courses:[],subjects:[]});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(F.useEffect)((function(){var e=[];return r().then((function(t){var c=t.courses;try{e.push(new Qe.a($("#course"),{type:"bar",data:{labels:c.map((function(e){return e.code})),datasets:[{label:"# of Students",data:c.map((function(e){return e.admissions_count})),backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{scales:{y:{beginAtZero:!0,ticks:{precision:0}}}}}))}catch(a){console.log("chartjs",a)}})),function(){e.forEach((function(e){return e.destroy()}))}}),[]),Object(Ue.jsx)("div",{className:"container-fluid ".concat(pe("Student"===(null===t||void 0===t?void 0:t.role),"d-none")),children:Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)("div",{className:"col-12 col-md-".concat("Registrar"===(null===t||void 0===t?void 0:t.role)?"3":"6"),children:Object(Ue.jsx)("div",{className:"card bg-dark text-white shadow",children:Object(Ue.jsx)("div",{className:"card-body",children:Object(Ue.jsxs)("div",{className:"row align-items-center",children:[Object(Ue.jsx)("div",{className:"col-3 text-center",children:Object(Ue.jsx)("span",{className:"circle circle-sm",children:Object(Ue.jsx)("i",{className:"fe fe-16 fe-users mb-0"})})}),Object(Ue.jsxs)("div",{className:"col pr-0",children:[Object(Ue.jsx)("p",{className:"small mb-0",children:"Male Students"}),Object(Ue.jsx)("span",{className:"text-white h3 mb-0",id:"male-students",children:n.genders.males})]})]})})})}),Object(Ue.jsx)("div",{className:"col-12 col-md-".concat("Registrar"===(null===t||void 0===t?void 0:t.role)?"3":"6"),children:Object(Ue.jsx)("div",{className:"card bg-dark text-white shadow",children:Object(Ue.jsx)("div",{className:"card-body",children:Object(Ue.jsxs)("div",{className:"row align-items-center",children:[Object(Ue.jsx)("div",{className:"col-3 text-center",children:Object(Ue.jsx)("span",{className:"circle circle-sm",children:Object(Ue.jsx)("i",{className:"fe fe-16 fe-users mb-0"})})}),Object(Ue.jsxs)("div",{className:"col pr-0",children:[Object(Ue.jsx)("p",{className:"small mb-0",children:"Female Students"}),Object(Ue.jsx)("span",{className:"text-white h3 mb-0",id:"female-students",children:n.genders.females})]})]})})})}),"Registrar"===(null===t||void 0===t?void 0:t.role)?Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsx)("div",{className:"col-12 col-md-3",children:Object(Ue.jsx)("div",{className:"card bg-dark text-white shadow",children:Object(Ue.jsx)("div",{className:"card-body",children:Object(Ue.jsxs)("div",{className:"row align-items-center",children:[Object(Ue.jsx)("div",{className:"col-3 text-center",children:Object(Ue.jsx)("span",{className:"circle circle-sm",children:Object(Ue.jsx)("i",{className:"fe fe-16 fe-users mb-0"})})}),Object(Ue.jsxs)("div",{className:"col pr-0",children:[Object(Ue.jsx)("p",{className:"small mb-0",children:"Pending Enrollees"}),Object(Ue.jsx)("span",{className:"text-white h3 mb-0",id:"pending-enrollees",children:n.enrollees.pending})]})]})})})}),Object(Ue.jsx)("div",{className:"col-12 col-md-3",children:Object(Ue.jsx)("div",{className:"card bg-dark text-white shadow",children:Object(Ue.jsx)("div",{className:"card-body",children:Object(Ue.jsxs)("div",{className:"row align-items-center",children:[Object(Ue.jsx)("div",{className:"col-3 text-center",children:Object(Ue.jsx)("span",{className:"circle circle-sm",children:Object(Ue.jsx)("i",{className:"fe fe-16 fe-users mb-0"})})}),Object(Ue.jsxs)("div",{className:"col pr-0",children:[Object(Ue.jsx)("p",{className:"small mb-0",children:"Total Students"}),Object(Ue.jsx)("span",{className:"text-white h3 mb-0",id:"total-students",children:n.students.total})]})]})})})})]}):null,Object(Ue.jsx)("div",{className:"col-12",children:Object(Ue.jsx)("hr",{className:"mt-5"})}),Object(Ue.jsx)("div",{className:"col-12",children:Object(Ue.jsxs)("div",{className:"card shadow",children:[Object(Ue.jsx)("div",{className:"card-header",children:Object(Ue.jsx)("h4",{className:"card-title",children:"Students per Course"})}),Object(Ue.jsx)("div",{className:"card-body",children:Object(Ue.jsx)("canvas",{id:"course"})})]})})]})})},et=function(e){var t=v.getInstance(),c=Object(F.useState)(t.get("mode")||"dark"),a=Object(le.a)(c,2),n=a[0],s=a[1],r=Object(F.useState)(!1),l=Object(le.a)(r,2),i=l[0],o=l[1],d=Object(P.f)(),u=document.getElementById("lightTheme"),j=document.getElementById("darkTheme");return Object(F.useEffect)((function(){"dark"===n?($(".vertical").addClass("dark"),u.disable(!0),j.disable(!1)):($(".vertical").removeClass("dark"),j.disable(!0),u.disable(!1))}),[n,u,j]),Object(Ue.jsxs)("nav",{className:"topnav navbar navbar-light",children:[Object(Ue.jsx)("button",{type:"button",className:"navbar-toggler text-muted mt-2 p-0 mr-3",onClick:function(e){e.preventDefault();var t=$(".vertical"),c=$("#account-role-display");t.hasClass("collapsed")?(c.removeClass("d-none"),t.removeClass("collapsed")):(c.addClass("d-none"),t.addClass("collapsed"))},children:Object(Ue.jsx)("i",{className:"fe fe-menu navbar-toggler-icon"})}),Object(Ue.jsxs)("ul",{className:"nav",children:[Object(Ue.jsx)("li",{className:"nav-item",children:Object(Ue.jsx)("a",{className:"nav-link text-muted my-2",href:"/",onClick:function(e){e.preventDefault(),"dark"===n?(t.set("mode","light"),s("light")):(t.set("mode","dark"),s("dark"))},children:Object(Ue.jsx)("i",{className:"fe fe-sun fe-16"})})}),Object(Ue.jsxs)("li",{className:"nav-item dropdown ".concat(pe(i,"show")),children:[Object(Ue.jsx)("a",{className:"nav-link dropdown-toggle text-muted pr-0",href:"/",role:"button",onClick:function(e){e.preventDefault(),o(!i)},children:Object(Ue.jsx)("span",{className:"avatar avatar-sm mt-2",children:Object(Ue.jsx)("img",{src:"/logo.jpg",alt:"...",className:"avatar-img rounded-circle"})})}),Object(Ue.jsx)("div",{className:"dropdown-menu dropdown-menu-right ".concat(pe(i,"show")),children:Object(Ue.jsxs)("a",{className:"dropdown-item d-flex align-items-center",href:"/",onClick:function(){var e=Object(R.a)(M.a.mark((function e(c){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.next=3,Oe.notice("Are you sure you want to logout?");case 3:if(!e.sent){e.next=6;break}t.remove("user").remove("token"),d.push(L);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(Ue.jsx)("i",{className:"la la-sign-out-alt mr-1"}),Object(Ue.jsx)("span",{children:"Logout"})]})})]})]})]})},tt=function(e){var t=Object(ie.a)("admissions",(function(){return Ee.fetch()})).data,c=oe(),a=be().data,n=v.getInstance().get("user"),s=function(){var e=ue(),t=Object(le.a)(e,2),c=t[0],a=t[1];return Object(F.useEffect)((function(){o.a.get("/sections/current").then((function(e){return a(e.data)})).catch((function(e){return console.log(e.toJSON())}))}),[]),c}(),r={Admin:[J,q,K,H,Q,X,se],Registrar:[J,q,K,Z,z,B,ee,ne,re],Teacher:[Z],Student:[te,z,ae,ce]};return n?Object(Ue.jsxs)("aside",{className:"sidebar-left border-right bg-white shadow",id:"leftSidebar","data-simplebar":!0,children:[Object(Ue.jsx)("a",{href:"/",className:"btn collapseSidebar toggle-btn d-lg-none text-muted ml-2 mt-3","data-toggle":"toggle",children:Object(Ue.jsx)("i",{className:"fe fe-x",children:Object(Ue.jsx)("span",{className:"sr-only"})})}),Object(Ue.jsxs)("nav",{className:"vertnav navbar navbar-light",children:[Object(Ue.jsxs)("div",{className:"w-100 mb-4 d-flex flex-column",children:[Object(Ue.jsx)(I.c,{className:"navbar-brand mx-auto mt-2 flex-fill text-center",to:T,children:Object(Ue.jsx)("img",{src:"/logo.jpg",alt:"EMC",className:"shadow border rounded-circle",style:{height:"50px",width:"50px"}})}),a?Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsxs)("span",{className:"mx-auto d-block",children:["S.Y ",a.start," - ",a.end]}),Object(Ue.jsx)("span",{className:"mx-auto d-block",children:a.semester})]}):null,"Student"===n.role?Object(Ue.jsx)("span",{className:"mx-auto",children:null===s||void 0===s?void 0:s.name}):null]}),Object(Ue.jsxs)("ul",{className:"navbar-nav flex-fill w-100 mb-2",children:[Object(Ue.jsx)("li",{className:"nav-item",children:Object(Ue.jsxs)(I.c,{to:c(""),className:"nav-link",activeClassName:"active",exact:!0,children:[Object(Ue.jsx)("i",{className:"fe fe-home fe-16"}),Object(Ue.jsx)("span",{className:"ml-3 item-text",children:"Dashboard"})]})}),r[n.role].includes(J)?Object(Ue.jsx)("li",{className:"nav-item",children:Object(Ue.jsxs)(I.c,{to:c(J),className:"nav-link",activeClassName:"active",children:[Object(Ue.jsx)("i",{className:"fe fe-navigation fe-16"}),Object(Ue.jsx)("span",{className:"ml-3 item-text",children:"Courses"})]})}):null,["Student","Teacher"].includes(n.role)?null:Object(Ue.jsxs)("li",{className:"nav-item dropdown",children:[Object(Ue.jsxs)("a",{href:"/users",className:"dropdown-toggle nav-link collapsed",onClick:function(e){e.preventDefault(),$("#users").collapse("toggle")},children:[Object(Ue.jsx)("i",{className:"fe fe-user fe-16"}),Object(Ue.jsx)("span",{className:"ml-3 item-text",children:"Users"})]}),Object(Ue.jsxs)("ul",{className:"collapse list-unstyled pl-4 w-100",id:"users",children:[r[n.role].includes(q)?Object(Ue.jsxs)("li",{className:"nav-item dropdown",children:[Object(Ue.jsxs)("a",{href:c(q),className:"nav-link dropdown-toggle collapsed",onClick:function(e){e.preventDefault(),$("#students").collapse("toggle")},children:[Object(Ue.jsx)("i",{className:"fe fe-user fe-16"}),Object(Ue.jsx)("span",{className:"ml-3 item-text",children:"Students"})]}),Object(Ue.jsxs)("ul",{className:"collapse list-unstyled pl-4 w-100",id:"students",children:[Object(Ue.jsx)("li",{className:"nav-item",children:Object(Ue.jsxs)(I.c,{to:c("".concat(q,"/new")),className:"nav-link",activeClassName:"active",children:[Object(Ue.jsx)("i",{className:"fe fe-user fe-16"}),Object(Ue.jsx)("span",{className:"ml-3 item-text",children:"New"})]})}),Object(Ue.jsx)("li",{className:"nav-item",children:Object(Ue.jsxs)(I.c,{to:c("".concat(q,"/old")),className:"nav-link",activeClassName:"active",children:[Object(Ue.jsx)("i",{className:"fe fe-user fe-16"}),Object(Ue.jsx)("span",{className:"ml-3 item-text",children:"Old"})]})}),Object(Ue.jsx)("li",{className:"nav-item",children:Object(Ue.jsxs)(I.c,{to:c("".concat(q,"/behind")),className:"nav-link",activeClassName:"active",children:[Object(Ue.jsx)("i",{className:"fe fe-user fe-16"}),Object(Ue.jsx)("span",{className:"ml-3 item-text",children:"Behind"})]})})]})]}):null,r[n.role].includes(K)?Object(Ue.jsx)("li",{className:"nav-item",children:Object(Ue.jsxs)(I.c,{to:c(K),className:"nav-link",activeClassName:"active",children:[Object(Ue.jsx)("i",{className:"fe fe-user fe-16"}),Object(Ue.jsx)("span",{className:"ml-3 item-text",children:"Teachers"})]})}):null,r[n.role].includes(H)?Object(Ue.jsx)("li",{className:"nav-item",children:Object(Ue.jsxs)(I.c,{to:c(H),className:"nav-link",activeClassName:"active",children:[Object(Ue.jsx)("i",{className:"fe fe-user fe-16"}),Object(Ue.jsx)("span",{className:"ml-3 item-text",children:"Registrars"})]})}):null]})]}),r[n.role].includes(X)?Object(Ue.jsx)("li",{className:"nav-item d-none",children:Object(Ue.jsxs)(I.c,{to:c(X),className:"nav-link",activeClassName:"active",children:[Object(Ue.jsx)("i",{className:"fe fe-mail fe-16"}),Object(Ue.jsx)("span",{className:"ml-3 item-text",children:"Email Outbox"})]})}):null,r[n.role].includes(Z)?Object(Ue.jsx)("li",{className:"nav-item",children:Object(Ue.jsxs)(I.c,{to:c(Z),className:"nav-link",activeClassName:"active",children:[Object(Ue.jsx)("i",{className:"fe fe-book fe-16"}),Object(Ue.jsx)("span",{className:"ml-3 item-text",children:"Subjects"})]})}):null,r[n.role].includes(z)?Object(Ue.jsx)("li",{className:"nav-item",children:Object(Ue.jsxs)(I.c,{to:c(z),className:"nav-link",activeClassName:"active",children:[Object(Ue.jsx)("i",{className:"fe fe-calendar fe-16"}),Object(Ue.jsx)("span",{className:"ml-3 item-text",children:"Schedules"})]})}):null,r[n.role].includes(B)?Object(Ue.jsx)("li",{className:"nav-item",children:Object(Ue.jsxs)(I.c,{to:c(B),className:"nav-link",activeClassName:"active",children:[Object(Ue.jsx)("i",{className:"fe fe-pen-tool fe-16"}),Object(Ue.jsxs)("span",{className:"ml-3 item-text",children:["Admissions",t&&t.filter((function(e){var t;return!e.done&&!(null===(t=e.student)||void 0===t?void 0:t.active)})).length>0?Object(Ue.jsx)("span",{className:"ml-1 badge badge-danger",children:t.filter((function(e){var t;return!e.done&&!(null===(t=e.student)||void 0===t?void 0:t.active)})).length}):null]})]})}):null,r[n.role].includes(ne)?Object(Ue.jsx)("li",{className:"nav-item",children:Object(Ue.jsxs)(I.c,{to:c(ne),className:"nav-link",activeClassName:"active",children:[Object(Ue.jsx)("i",{className:"fe fe-clipboard fe-16"}),Object(Ue.jsx)("span",{className:"ml-3 item-text",children:"Admission Requirements"})]})}):null,r[n.role].includes(ee)?Object(Ue.jsx)("li",{className:"nav-item",children:Object(Ue.jsxs)(I.c,{to:c(ee),className:"nav-link",activeClassName:"active",children:[Object(Ue.jsx)("i",{className:"fe fe-calendar fe-16"}),Object(Ue.jsx)("span",{className:"ml-3 item-text",children:"School Years"})]})}):null,r[n.role].includes(te)?Object(Ue.jsx)("li",{className:"nav-item",children:Object(Ue.jsxs)(I.c,{to:c(te),className:"nav-link",activeClassName:"active",children:[Object(Ue.jsx)("i",{className:"fe fe-bookmark fe-16"}),Object(Ue.jsx)("span",{className:"ml-3 item-text",children:"Grades"})]})}):null,r[n.role].includes(ce)?Object(Ue.jsx)("li",{className:"nav-item",children:Object(Ue.jsxs)(I.c,{to:c(ce),className:"nav-link",activeClassName:"active",children:[Object(Ue.jsx)("i",{className:"fe fe-book-open fe-16"}),Object(Ue.jsx)("span",{className:"ml-3 item-text",children:"Enrollment"})]})}):null,r[n.role].includes(ae)?Object(Ue.jsx)("li",{className:"nav-item",children:Object(Ue.jsxs)(I.c,{to:c(ae),className:"nav-link",activeClassName:"active",children:[Object(Ue.jsx)("i",{className:"fe fe-user fe-16"}),Object(Ue.jsx)("span",{className:"ml-3 item-text",children:"Profile"})]})}):null,r[n.role].includes(se)?Object(Ue.jsx)("li",{className:"nav-item",children:Object(Ue.jsxs)(I.c,{to:c(se),className:"nav-link",activeClassName:"active",children:[Object(Ue.jsx)("i",{className:"fe fe-book fe-16"}),Object(Ue.jsx)("span",{className:"ml-3 item-text",children:"Logs"})]})}):null,r[n.role].includes(re)?Object(Ue.jsx)("li",{className:"nav-item",children:Object(Ue.jsxs)(I.c,{to:c(re),className:"nav-link",activeClassName:"active",children:[Object(Ue.jsx)("i",{className:"fas fa-graduation-cap fe-16"}),Object(Ue.jsx)("span",{className:"ml-3 item-text",children:"Student Units"})]})}):null,Object(Ue.jsx)("li",{className:"nav-item",children:Object(Ue.jsxs)(I.c,{to:c(W),className:"nav-link",activeClassName:"active",children:[Object(Ue.jsx)("i",{className:"fe fe-key fe-16"}),Object(Ue.jsx)("span",{className:"ml-3 item-text",children:"Change Password"})]})})]}),Object(Ue.jsxs)("p",{id:"account-role-display",children:["Signed in as: ",Object(Ue.jsx)("b",{children:null===n||void 0===n?void 0:n.role})]})]})]}):null},ct=new(function(e){Object(De.a)(c,e);var t=Object(Ae.a)(c);function c(){return Object(b.a)(this,c),t.apply(this,arguments)}return c}(Ye))("/subjects"),at=function(e){var t,c,a,n,s,r,l=Object(F.useState)(!1),i=Object(le.a)(l,2),d=i[0],u=i[1],j=Object(F.useState)(!1),b=Object(le.a)(j,2),m=b[0],h=b[1],f=v.getInstance(),O=f.get("user"),x=je(),p=Object(le.a)(x,2),N=p[0],g=p[1],y=je(),k=Object(le.a)(y,2),w=k[0],S=k[1],_=Object(ie.a)(["user",null===O||void 0===O?void 0:O.id],(function(){return Be.fetchOne(null===O||void 0===O?void 0:O.id)}),{onSuccess:function(e){var t;e.active||toastr.info("Your account is currently inactive. Please settle your payment to be reactivated by the registrar."),S(null===(t=e.subjects)||void 0===t?void 0:t.map((function(e){return e.id})))}}),C=_.data,D=_.refetch,A=Object(F.createRef)(),E=Object(ie.a)("subjects",(function(){return ct.fetch()})).data,I=Object(F.useState)(!1),P=Object(le.a)(I,2),B=P[0],T=P[1],L=be().data,U=null===C||void 0===C||null===(t=C.admissions)||void 0===t?void 0:t.find((function(e){var t;return null===(t=e.year)||void 0===t?void 0:t.current})),W=function(){var e=Object(R.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===C||void 0===C?void 0:C.active){e.next=2;break}return e.abrupt("return");case 2:return u(!0),e.prev=3,e.next=6,Oe.notice("If you continue you can't edit the selected subjects.");case 6:if(!e.sent){e.next=13;break}return e.next=9,o.a.post("/users/".concat(null===C||void 0===C?void 0:C.id,"/subjects"),{subjects:N});case 9:return toastr.success("Subjects enrolled successfully."),e.next=12,D();case 12:f.set("user",C);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),Fe(e.t0);case 18:return e.prev=18,u(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})));return function(){return e.apply(this,arguments)}}();return C&&U&&C.active?C.enrolled&&!m?Object(Ue.jsx)("div",{className:"container",children:Object(Ue.jsx)("div",{className:"row",children:Object(Ue.jsx)("div",{className:"col-12",children:Object(Ue.jsxs)("div",{className:"card",children:[Object(Ue.jsxs)("div",{className:"card-header",children:[Object(Ue.jsxs)("p",{className:"card-title",children:[C.last_name,", ",C.first_name," ",C.middle_name||""," (",C.uuid,")"]}),Object(Ue.jsxs)("p",{className:"card-text",children:["Registration (S.Y ",null===L||void 0===L?void 0:L.start," - ",null===L||void 0===L?void 0:L.end," - ",null===L||void 0===L?void 0:L.semester,")"]})]}),Object(Ue.jsx)("div",{className:"card-body",children:Object(Ue.jsx)("div",{className:"container",children:Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)("div",{className:"col-12 col-md-6 p-2",children:Object(Ue.jsxs)("div",{className:"border rounded shadow p-2",children:[Object(Ue.jsx)("b",{children:"Status: "})," ",U.status," (",C.allowed_units," Units Allowed)"]})}),Object(Ue.jsx)("div",{className:"col-12 col-md-6 p-2",children:Object(Ue.jsxs)("div",{className:"border rounded shadow p-2",children:[Object(Ue.jsx)("b",{children:"Section: "})," ",null===(s=C.sections)||void 0===s||null===(r=s.find((function(e){var t;return null===(t=e.year)||void 0===t?void 0:t.current})))||void 0===r?void 0:r.name]})}),Object(Ue.jsxs)("div",{className:"col-12 mt-4 text-center",children:[Object(Ue.jsxs)("h2",{children:[Object(Ue.jsx)("i",{className:"fas fa-check-circle"})," You are officially enrolled"]}),Object(Ue.jsxs)("button",{className:"btn btn-danger",onClick:function(e){e.preventDefault(),$("#leftSidebar").addClass("d-none"),$(".topnav").addClass("d-none"),$("input").addClass("d-none"),$("button").addClass("d-none"),h(!0),setTimeout((function(){window.print(),$("#leftSidebar").removeClass("d-none"),$(".topnav").removeClass("d-none"),$("input").removeClass("d-none"),$("button").removeClass("d-none"),h(!1)}),100)},disabled:d||!C.enrolled,children:[Object(Ue.jsx)("i",{className:"fas fa-scroll"}),"Certificate of Registration"]})]})]})})})]})})})}):Object(Ue.jsxs)("div",{ref:A,className:"container",children:[Object(Ue.jsx)("div",{className:"row",children:Object(Ue.jsxs)("div",{className:"col-12 col-md-8 offset-md-2 text-center",children:[Object(Ue.jsx)("h4",{children:"EASTERN MINDORO COLLEGE"}),Object(Ue.jsx)("p",{children:"Bongabong, Oriental Mindoro"}),Object(Ue.jsx)("h6",{children:"College Enrollment Slip"}),Object(Ue.jsx)("p",{className:"mb-0",style:{fontSize:"1.5rem"},children:null===U||void 0===U||null===(c=U.course)||void 0===c?void 0:c.description}),(null===U||void 0===U?void 0:U.major)?Object(Ue.jsxs)("p",{style:{fontSize:"1.15rem"},children:["Major in ",U.major.name]}):null]})}),Object(Ue.jsxs)("div",{className:"d-flex mt-5",children:[Object(Ue.jsxs)("span",{className:"mr-auto",children:[Object(Ue.jsx)("b",{children:"Name:"})," ",C.last_name,", ",C.first_name," ",C.middle_name||""]}),Object(Ue.jsxs)("span",{className:"ml-auto",children:[Object(Ue.jsx)("b",{children:"Semester:"})," ",U.term]})]}),Object(Ue.jsxs)("div",{className:"d-flex",children:[Object(Ue.jsxs)("span",{className:"mr-auto",children:[Object(Ue.jsx)("b",{children:"Year Level:"})," ",U.level]}),Object(Ue.jsxs)("span",{className:"ml-auto",children:[Object(Ue.jsx)("b",{children:"Status: "})," ",U.status]})]}),Object(Ue.jsxs)("div",{className:"d-flex mt-3",children:[Object(Ue.jsxs)("span",{className:"mr-auto",children:[Object(Ue.jsx)("b",{children:"Student Number:"})," ",C.uuid]}),Object(Ue.jsxs)("span",{className:"ml-auto",children:[Object(Ue.jsx)("b",{children:"Year:"})," ",null===(a=U.year)||void 0===a?void 0:a.start," - ",null===(n=U.year)||void 0===n?void 0:n.end]})]}),m?null:Object(Ue.jsx)("div",{className:"d-flex mt-2",children:Object(Ue.jsx)("button",{className:"btn btn-".concat(B?"danger":"secondary"," btn-sm"),disabled:C.enrolled,onClick:function(e){if(e.preventDefault(),E){if(B)g([]);else{var t=E.filter((function(e){if(!m){var t=e.level===U.level&&e.term===U.term&&e.course_id===U.course_id;return U.major_id?t&&U.major_id===e.major_id:t}var c=w.includes(e.id)&&e.level===U.level&&e.term===U.term&&e.course_id===U.course_id;return U.major_id?c&&U.major_id===e.major_id:c})).filter((function(e){return!w.includes(e.id)}));g([].concat(Object(Y.a)(N),Object(Y.a)(t.map((function(e){return e.id})))))}T(!B)}},children:B?"Unselect All":"Select All"})}),Object(Ue.jsxs)("form",{onSubmit:function(e){e.preventDefault(),W()},className:"table-responsive",children:[Object(Ue.jsxs)("table",{className:"table table-bordered mt-3 w-100",style:{display:"table"},children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("th",{}),Object(Ue.jsx)("th",{children:"Subject Code"}),Object(Ue.jsx)("th",{children:"Description"}),Object(Ue.jsx)("th",{children:"Units"})]})}),Object(Ue.jsxs)("tbody",{children:[null===E||void 0===E?void 0:E.filter((function(e){if(!m){var t=e.level===U.level&&e.term===U.term&&e.course_id===U.course_id;return U.major_id?t&&U.major_id===e.major_id:t}return w.includes(e.id)&&e.level===U.level&&e.term===U.term&&e.course_id===U.course_id&&e.major_id===U.major_id})).map((function(e,t){return Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("td",{children:m?null:Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsx)("input",{type:"checkbox",checked:void 0!==N.find((function(t){return e.id===t})),disabled:d||w.includes(e.id)||C.enrolled,value:e.id,onChange:function(e){var t,c=e.target.value.toNumber();N.includes(c)?function(e){var t=N.findIndex((function(t){return t===e}));N.splice(t,1),g(Object(Y.a)(N))}(c):(t=c,N.push(t),g(Object(Y.a)(N)))}}),Object(Ue.jsx)("sup",{className:"ml-1",children:Object(Ue.jsx)("i",{children:w.includes(e.id)?"Enrolled":""})})]})}),Object(Ue.jsx)("td",{children:e.code}),Object(Ue.jsx)("td",{children:e.description}),Object(Ue.jsx)("td",{children:e.units})]},t)})),Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("td",{style:{maxWidth:"30px"},children:"Total Units"}),Object(Ue.jsx)("td",{}),Object(Ue.jsx)("td",{}),Object(Ue.jsx)("td",{children:null===E||void 0===E?void 0:E.filter((function(e){return m?w.includes(e.id):N.includes(e.id)||w.includes(e.id)})).reduce((function(e,t){return t.units+e}),0)})]})]})]}),m?null:Object(Ue.jsxs)("div",{className:"form-group mt-2 d-flex",children:[Object(Ue.jsx)("span",{className:"mr-auto",children:Object(Ue.jsx)("button",{type:"submit",className:"btn btn-primary btn-sm",disabled:d||C.enrolled,children:"Save"})}),Object(Ue.jsx)("span",{className:"ml-auto",children:Object(Ue.jsx)("button",{className:"btn btn-info btn-sm",onClick:function(e){e.preventDefault(),$("#leftSidebar").addClass("d-none"),$(".topnav").addClass("d-none"),$("input").addClass("d-none"),$("button").addClass("d-none"),h(!0),setTimeout((function(){window.print(),$("#leftSidebar").removeClass("d-none"),$(".topnav").removeClass("d-none"),$("input").removeClass("d-none"),$("button").removeClass("d-none"),h(!1)}),100)},disabled:d||!C.enrolled,children:"Download"})})]})]})]}):null},nt=function(e){var t=v.getInstance().get("user"),c=Object(ie.a)("subjects",(function(){return ct.fetch()})).data,a=je(),n=Object(le.a)(a,2),s=n[0],r=n[1],l=function(){var e=Object(R.a)(M.a.mark((function e(){var t,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.get("/auth/admissions");case 3:t=e.sent,c=t.data,r(Object(Y.a)(c.reverse())),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Fe(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),i=function(e,t){var c,a=t.student;return null===a||void 0===a||null===(c=a.grades)||void 0===c?void 0:c.find((function(c){return c.year_id===t.year_id&&c.subject_id===e.id}))},d=function(e){return(null===c||void 0===c?void 0:c.filter((function(t){var c,a,n,s;return Ne(null===(c=e.student)||void 0===c||null===(a=c.previous_subjects)||void 0===a?void 0:a.find((function(e){return e.subject_id===t.id})))||Ne(null===(n=e.student)||void 0===n||null===(s=n.subjects)||void 0===s?void 0:s.find((function(e){return e.id===t.id})))})).filter((function(t){return t.level===e.level&&t.term===e.term&&t.course_id===e.course_id&&t.major_id===e.major_id})))||[]};return Object(F.useEffect)((function(){l()}),[]),t?Object(Ue.jsxs)("div",{className:"container",children:[Object(Ue.jsx)("div",{className:"row",children:Object(Ue.jsxs)("div",{className:"col-12 col-md-6 offset-md-3 text-center",children:[Object(Ue.jsx)("h4",{children:"EASTERN MINDORO COLLEGE"}),Object(Ue.jsx)("p",{children:"Bongabong, Oriental Mindoro"})]})}),s.map((function(e,c){var a,n;return Object(Ue.jsxs)(F.Fragment,{children:[Object(Ue.jsxs)("div",{className:"d-flex mt-5",children:[Object(Ue.jsxs)("span",{className:"mr-auto",children:[Object(Ue.jsx)("b",{children:"Name:"})," ",t.last_name,", ",t.first_name," ",t.middle_name||""]}),Object(Ue.jsxs)("span",{className:"ml-auto",children:[Object(Ue.jsx)("b",{children:"Semester:"})," ",e.term]})]}),Object(Ue.jsxs)("div",{className:"d-flex",children:[Object(Ue.jsxs)("span",{className:"mr-auto",children:[Object(Ue.jsx)("b",{children:"Year Level:"})," ",e.level]}),Object(Ue.jsxs)("span",{className:"ml-auto",children:[Object(Ue.jsx)("b",{children:"Status: "})," ",e.status]})]}),Object(Ue.jsxs)("div",{className:"d-flex mt-3",children:[Object(Ue.jsxs)("span",{className:"mr-auto",children:[Object(Ue.jsx)("b",{children:"Student Number:"})," ",t.uuid]}),Object(Ue.jsxs)("span",{className:"ml-auto",children:[Object(Ue.jsx)("b",{children:"Year:"})," ",null===(a=e.year)||void 0===a?void 0:a.start," - ",null===(n=e.year)||void 0===n?void 0:n.end]})]}),Object(Ue.jsxs)("table",{className:"table table-bordered mt-3",children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("th",{className:"text-center",children:"Subject Code"}),Object(Ue.jsx)("th",{className:"text-center",children:"Description"}),Object(Ue.jsx)("th",{className:"text-center",children:"Units"}),Object(Ue.jsx)("th",{className:"text-center",children:"Grade"}),Object(Ue.jsx)("th",{className:"text-center",children:"Status"})]})}),Object(Ue.jsxs)("tbody",{children:[d(e).map((function(t,c){var a,n,s;return Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("td",{className:"text-center",children:null===t||void 0===t?void 0:t.code}),Object(Ue.jsx)("td",{className:"text-center",style:{minWidth:"100px"},children:null===t||void 0===t?void 0:t.description}),Object(Ue.jsx)("td",{className:"text-center",children:null===t||void 0===t?void 0:t.units}),Object(Ue.jsx)("td",{className:"text-center",children:i(t,e)?"".concat(null===(a=i(t,e))||void 0===a?void 0:a.grade,"%"):"-"}),Object(Ue.jsx)("td",{className:"text-center",children:i(t,e)?null===(n=i(t,e))||void 0===n?void 0:n.status:(null===(s=e.year)||void 0===s?void 0:s.current)?"-":"INC"})]},"subject-".concat(c))})),Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("td",{className:"text-center",children:Object(Ue.jsx)("b",{children:"Total Units"})}),Object(Ue.jsx)("td",{}),Object(Ue.jsx)("td",{className:"text-center",children:d(e).reduce((function(e,t){return e+t.units}),0)||0}),Object(Ue.jsx)("td",{}),Object(Ue.jsx)("td",{})]})]})]})]},"admission-".concat(c))}))]}):null},st=function(e){var t=Object(F.useState)(!1),c=Object(le.a)(t,2),a=c[0],n=c[1],s=v.getInstance(),r=s.get("user"),l=Object(F.useState)((null===r||void 0===r?void 0:r.number)||""),i=Object(le.a)(l,2),d=i[0],u=i[1],b=Object(me.a)({defaultValues:Object(j.a)({},r)}),m=b.register,h=b.handleSubmit,f=function(){var e=Object(R.a)(M.a.mark((function e(t){var c,a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===r||void 0===r?void 0:r.active){e.next=2;break}return e.abrupt("return");case 2:return n(!0),e.prev=3,t.number=d,e.next=7,o.a.post("/auth/profile",t);case 7:c=e.sent,a=c.data,s.set("user",a),toastr.success("Profile updated successfully."),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),Fe(e.t0);case 16:return e.prev=16,n(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,13,16,19]])})));return function(t){return e.apply(this,arguments)}}();return r?(r.active||toastr.info("Your account is currently inactive. Profile changes will not be saved."),Object(Ue.jsx)("div",{className:"container",children:Object(Ue.jsxs)("form",{className:"row",onSubmit:h(f),children:[Object(Ue.jsx)("div",{className:"col-12 col-md-6",children:Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)("div",{className:"col-3 my-2",children:"Student Number"}),Object(Ue.jsx)("div",{className:"col-9 my-2 d-flex align-items-center",children:Object(Ue.jsx)("b",{children:r.uuid})}),Object(Ue.jsx)("div",{className:"col-3 my-2 d-flex align-items-center",children:"Name"}),Object(Ue.jsx)("div",{className:"col-9 my-2 d-flex align-items-center",children:Object(Ue.jsxs)("b",{children:[r.last_name,", ",r.first_name," ",r.middle_name||""]})}),Object(Ue.jsx)("div",{className:"col-3 my-2 d-flex align-items-center",children:"Gender"}),Object(Ue.jsx)("div",{className:"col-9 my-2 d-flex align-items-center",children:Object(Ue.jsx)("b",{children:r.gender})}),Object(Ue.jsx)("div",{className:"col-3 my-2 d-flex align-items-center",children:"Date of Birth"}),Object(Ue.jsx)("div",{className:"col-9 my-2 d-flex align-items-center",children:Object(Ue.jsx)("b",{children:N()(r.birthday).format("MMMM DD, YYYY")})}),Object(Ue.jsx)("div",{className:"col-3 my-2 d-flex align-items-center",children:"Place of Birth"}),Object(Ue.jsx)("div",{className:"col-9 my-2 d-flex align-items-center",children:Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},m("place_of_birth")),{},{type:"text",className:"form-control",disabled:a}))})]})}),Object(Ue.jsx)("div",{className:"col-12 col-md-6",children:Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)("div",{className:"col-3 my-2 d-flex align-items-center",children:"Address"}),Object(Ue.jsx)("div",{className:"col-9 my-2 d-flex align-items-center",children:Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},m("address")),{},{type:"text",className:"form-control",disabled:a}))}),Object(Ue.jsx)("div",{className:"col-3 my-2 d-flex align-items-center",children:"Mobile Number"}),Object(Ue.jsx)("div",{className:"col-9 my-2 d-flex align-items-center",children:Object(Ue.jsx)(Le.a,{mask:"0\\999-999-9999",type:"text",id:"number",className:"form-control",disabled:a,value:d,onChange:function(e){return u(e.target.value)}})}),Object(Ue.jsx)("div",{className:"col-3 my-2 d-flex align-items-center",children:"Email Address"}),Object(Ue.jsx)("div",{className:"col-9 my-2 d-flex align-items-center",children:Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},m("email")),{},{type:"email",className:"form-control",disabled:a}))})]})}),Object(Ue.jsxs)("div",{className:"col-12 text-center pt-5",children:[Object(Ue.jsx)("button",{type:"submit",className:"btn btn-info btn-sm",disabled:a,children:"Save"}),Object(Ue.jsx)("p",{className:"my-3",children:Object(Ue.jsx)("i",{children:"I hereby certify that all of the information provided are true and correct to the best of my knowledge."})})]})]})})):null},rt=new(function(e){Object(De.a)(c,e);var t=Object(Ae.a)(c);function c(){return Object(b.a)(this,c),t.apply(this,arguments)}return c}(Ye))("/logs"),lt=function(e){var t=Object(ie.a)("logs",(function(){return rt.fetch()})),c=t.data,a=t.isFetching,n=t.isError,s=t.error,r=t.refetch;n&&Fe(s);return Object(Ue.jsx)(Ve,{onRefresh:function(){return r()},title:"Logs",loading:a,items:(null===c||void 0===c?void 0:c.map((function(e){var t,c,a;return Object(j.a)(Object(j.a)({},e),{},{created_at:N()(e.created_at).format("MMMM DD, YYYY hh:mm A"),user:"".concat(null===(t=e.payload)||void 0===t?void 0:t.last_name,", ").concat(null===(c=e.payload)||void 0===c?void 0:c.first_name," ").concat((null===(a=e.payload)||void 0===a?void 0:a.middle_name)||"")})})))||[],columns:[{title:"ID",accessor:"id"},{title:"Message",accessor:"message",minWidth:"300px"},{title:"IP Address",accessor:"ip_address"},{title:"Device",accessor:"device"},{title:"Browser",accessor:"browser"},{title:"User",accessor:"user"},{title:"Date",accessor:"created_at"}]})},it=function(e){var t=[{path:oe()("/"),exact:!0,component:lt}];return Object(Ue.jsx)(P.c,{children:t.map((function(e,t){return Object(F.createElement)(P.a,Object(j.a)(Object(j.a)({},e),{},{key:t}))}))})},ot=new(function(e){Object(De.a)(c,e);var t=Object(Ae.a)(c);function c(){return Object(b.a)(this,c),t.apply(this,arguments)}return c}(Ye))("/mails"),dt={Sent:"success",Pending:"warning",Failed:"danger"},ut=function(e){var t=Object(ie.a)("mails",(function(){return ot.fetch()})),c=t.data,a=t.isFetching,n=t.isError,s=t.error,r=t.refetch,l=Object(F.createRef)();return n&&Fe(s),Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsx)(Ve,{onRefresh:function(){return r()},title:"Email Outbox",loading:a,items:(null===c||void 0===c?void 0:c.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{created_at:N()(e.created_at).format("MMMM DD, YYYY hh:mm A"),status:Object(Ue.jsx)("span",{className:"badge badge-".concat(dt[e.status]),children:e.status}),sent:e.sent?N()(e.sent).format("MMMM DD, YYYY hh:mm A"):"",actions:Object(Ue.jsx)(Ue.Fragment,{children:Object(Ue.jsx)("button",{className:"btn btn-primary btn-sm mx-1",onClick:function(t){if(t.preventDefault(),l.current){var c=$(l.current);c.find(".modal-body").html(e.body),c.find("#password").addClass("d-none"),c.modal("show")}},children:"View"})})})})))||[],columns:[{title:"Created",accessor:"created_at"},{title:"To",accessor:"to"},{title:"Subject",accessor:"subject"},{title:"Status",accessor:"status"},{title:"Sent",accessor:"sent"},{title:"Actions",accessor:"actions"}]}),Object(Ue.jsx)("div",{ref:l,className:"modal fade",tabIndex:-1,children:Object(Ue.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:Object(Ue.jsxs)("div",{className:"modal-content",children:[Object(Ue.jsxs)("div",{className:"modal-header",children:[Object(Ue.jsx)("h5",{className:"modal-title",children:"View Mail"}),Object(Ue.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:Object(Ue.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(Ue.jsx)("div",{className:"modal-body"}),Object(Ue.jsx)("div",{className:"modal-footer",children:Object(Ue.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm","data-dismiss":"modal",children:"Close"})})]})})})]})},jt=function(e){var t=[{path:oe()("/"),exact:!0,component:ut}];return Object(Ue.jsx)(P.c,{children:t.map((function(e,t){return Object(F.createElement)(P.a,Object(j.a)(Object(j.a)({},e),{},{key:t}))}))})},bt=function(e){var t=Object(F.useState)(!1),c=Object(le.a)(t,2),a=c[0],n=c[1],s=de(),r=Object(le.a)(s,2),l=r[0],i=r[1],o=Object(me.a)({defaultValues:{force:!1}}),d=o.register,u=o.setValue,b=o.handleSubmit,m=o.reset,h=ue(),f=Object(le.a)(h,2),O=f[0],x=f[1],v=Object(F.useState)(-1),p=Object(le.a)(v,2),g=p[0],y=p[1],k=Object(P.f)(),w=Object(P.h)(),S=Object(F.useState)(""),_=Object(le.a)(S,2),C=_[0],D=_[1],A=function(){var e=Object(R.a)(M.a.mark((function e(t){var c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be.fetchOne(t);case 3:c=e.sent,y(c.id),we(u,c),x(N()(c.birthday).toDate()),D(c.number),i("Edit"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),Fe(e.t0),k.goBack();case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(R.a)(M.a.mark((function e(t){var c,a,s;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,t.role="Registrar",t.active=!0,t.birthday=null===O||void 0===O?void 0:O.toJSON(),t.number=C,e.next=8,"Add"===l?Be.create(t):Be.update(g,t);case 8:toastr.success("Registrar has been saved successfully."),m(),x(null),e.next=26;break;case 13:if(e.prev=13,e.t0=e.catch(1),409!==(null===(c=e.t0.response)||void 0===c?void 0:c.status)){e.next=25;break}return e.next=18,Oe.save(null===(a=e.t0.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message);case 18:if(!e.sent){e.next=23;break}return t.force=!0,e.next=22,Y(t);case 22:return e.abrupt("return");case 23:e.next=26;break;case 25:Fe(e.t0);case 26:return e.prev=26,n(!1),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[1,13,26,29]])})));return function(t){return e.apply(this,arguments)}}();return Object(F.useEffect)((function(){w.path.includes("edit")?A(w.params.id):Be.fetch().then((function(e){u("uuid","registrar-".concat("".concat(e.filter((function(e){return"Registrar"===e.role})).length+1).padStart(5,"0"),"-").concat((new Date).getFullYear()))}))}),[]),Object(Ue.jsx)("div",{className:"container-fluid",children:Object(Ue.jsx)("div",{className:"card",children:Object(Ue.jsxs)("div",{className:"card-body",children:[Object(Ue.jsxs)("h5",{className:"card-title",children:[l," Registrar"]}),Object(Ue.jsxs)("form",{onSubmit:b(Y),children:[Object(Ue.jsxs)("div",{className:"form-row",children:[Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"first_name",children:"First Name"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("first_name")),{},{type:"text",id:"first_name",className:"form-control",disabled:a}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"uuid",children:"Registrar Number"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("uuid")),{},{type:"text",id:"uuid",className:"form-control",readOnly:!0}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"last_name",children:"Last Name"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("last_name")),{},{type:"text",id:"last_name",className:"form-control",disabled:a}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"email",children:"Email Address"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("email")),{},{type:"email",id:"email",className:"form-control",disabled:a}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"gender",children:"Gender"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},d("gender")),{},{id:"gender",className:"form-control",children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),Object(Ue.jsx)("option",{value:"Male",children:"Male"}),Object(Ue.jsx)("option",{value:"Female",children:"Female"})]}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"number",children:"Phone Number"}),Object(Ue.jsx)(Le.a,{mask:"0\\999-999-9999",type:"text",id:"number",className:"form-control",disabled:a,value:C,onChange:function(e){return D(e.target.value)}})]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"birthday",children:"Birthday"}),Object(Ue.jsx)(Re.a,{value:O||void 0,id:"birthday",options:{maxDate:N()().year((new Date).getFullYear()-15).toDate()},onChange:function(e){e.length>0&&x(e[0])},className:"form-control",disabled:a})]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"address",children:"Address"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("address")),{},{type:"text",id:"address",className:"form-control",disabled:a}))]})]}),Object(Ue.jsx)("div",{className:"d-flex",children:Object(Ue.jsx)("i",{className:"ml-auto",children:"Account credentials will be sent via email."})}),Object(Ue.jsxs)("div",{className:"d-flex",children:[Object(Ue.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){return k.goBack()},disabled:a,children:"Return"}),Object(Ue.jsx)("button",{type:"submit",className:"btn btn-primary ml-auto",disabled:a,children:"Submit"})]})]})]})})})},mt=function(e){var t=Object(ie.a)("users",(function(){return Be.fetch()})),c=t.data,a=t.isFetching,n=t.isError,s=t.error,r=t.refetch,l=oe();n&&Fe(s);var i=function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe.danger("Are you sure you want to delete this Registrar?");case 3:if(!e.sent){e.next=8;break}return e.next=6,Be.delete(t);case 6:toastr.info("Registrar has been deleted.","Notice"),r();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),Fe(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be.update(t.id,{active:!t.active});case 3:toastr.success("Registrar ".concat(t.active?"disabled":"enabled"," successfully.")),r(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Fe(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),d=v.getInstance().get("user"),u=[{title:"Registrar #",accessor:"uuid"},{title:"Name",accessor:"name"},{title:"Phone Number",accessor:"number"},{title:"Status",accessor:"status"}];return"Admin"===(null===d||void 0===d?void 0:d.role)&&u.push({title:"Actions",accessor:"actions"}),Object(Ue.jsx)(Ve,{onRefresh:function(){return r()},title:"Registrars",loading:a,items:(null===c||void 0===c?void 0:c.filter((function(e){return"Registrar"===e.role})).map((function(e){return Object(j.a)(Object(j.a)({},e),{},{name:Object(Ue.jsxs)(Ue.Fragment,{children:[e.last_name,", ",e.first_name," ",e.middle_name||""]}),birthday:N()(e.birthday).format("MMMM DD, YYYY"),age:(new Date).getFullYear()-N()(e.birthday).year(),status:e.active?Object(Ue.jsx)("span",{className:"badge badge-success",children:"Active"}):Object(Ue.jsx)("span",{className:"badge badge-danger",children:"Inactive"}),actions:Object(Ue.jsxs)("div",{style:{minWidth:"350px"},children:[Object(Ue.jsx)(I.b,{to:l("".concat(e.id,"/edit")),className:"btn btn-warning btn-sm mx-1",title:"Edit",children:Object(Ue.jsx)("i",{className:"fas fa-edit"})}),Object(Ue.jsx)("button",{className:"btn btn-".concat(e.active?"danger":"info"," btn-sm mx-1"),onClick:function(){var t=Object(R.a)(M.a.mark((function t(c){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),t.next=3,Oe.notice("Are you sure you want to ".concat(e.active?"disable":"enable"," this registrar?"));case 3:if(!t.sent){t.next=5;break}o(e);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),title:e.active?"Disable":"Enable",children:Object(Ue.jsx)("i",{className:"fas fa-user-".concat(e.active?"times":"check")})}),Object(Ue.jsx)("button",{className:"btn btn-danger btn-sm mx-1 d-none",onClick:function(t){t.preventDefault(),i(e.id)},children:Object(Ue.jsx)("i",{className:"fas fa-trash"})})]})})})))||[],columns:u,buttons:Object(Ue.jsx)(Ue.Fragment,{children:"Admin"===(null===d||void 0===d?void 0:d.role)?Object(Ue.jsx)(I.b,{to:l("add"),className:"btn btn-primary btn-sm ml-2",children:Object(Ue.jsx)("i",{className:"fas fa-plus"})}):null})})},ht=function(e){var t=oe(),c=[{path:t("/"),exact:!0,component:mt},{path:t("/add"),component:bt},{path:t("/:id/edit"),component:bt}];return Object(Ue.jsx)(P.c,{children:c.map((function(e,t){return Object(F.createElement)(P.a,Object(j.a)(Object(j.a)({},e),{},{key:t}))}))})},ft=new(function(e){Object(De.a)(c,e);var t=Object(Ae.a)(c);function c(){return Object(b.a)(this,c),t.apply(this,arguments)}return c}(Ye))("/requirements"),Ot=function(e){var t=Object(F.useState)(!1),c=Object(le.a)(t,2),a=c[0],n=c[1],s=de(),r=Object(le.a)(s,2),l=r[0],i=r[1],o=Object(me.a)(),d=o.register,u=o.setValue,b=o.handleSubmit,m=o.reset,h=Object(F.useState)(-1),f=Object(le.a)(h,2),O=f[0],x=f[1],v=Object(P.f)(),p=Object(P.h)(),N=function(){var e=Object(R.a)(M.a.mark((function e(t){var c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ft.fetchOne(t);case 3:c=e.sent,x(c.id),we(u,c),i("Edit"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),Fe(e.t0),v.goBack();case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(!0),e.prev=1,e.t0="Edit"===l,!e.t0){e.next=8;break}return e.next=6,Oe.notice("Are you sure you want to update?");case 6:e.t1=e.sent,e.t0=!1===e.t1;case 8:if(!e.t0){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,"Add"===l?ft.create(t):ft.update(O,t);case 12:toastr.success("Requirement has been saved successfully."),m(),e.next=19;break;case 16:e.prev=16,e.t2=e.catch(1),Fe(e.t2);case 19:return e.prev=19,n(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,16,19,22]])})));return function(t){return e.apply(this,arguments)}}();return Object(F.useEffect)((function(){p.path.includes("edit")&&N(p.params.id)}),[]),Object(Ue.jsx)("div",{className:"container-fluid",children:Object(Ue.jsx)("div",{className:"card",children:Object(Ue.jsxs)("div",{className:"card-body",children:[Object(Ue.jsxs)("h5",{className:"card-title",children:[l," Requirement"]}),Object(Ue.jsxs)("form",{onSubmit:b(g),children:[Object(Ue.jsxs)("div",{className:"form-group",children:[Object(Ue.jsx)("label",{htmlFor:"name",children:"Name"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("name")),{},{type:"text",id:"code",className:"form-control",disabled:a}))]}),Object(Ue.jsxs)("div",{className:"form-group d-flex",children:[Object(Ue.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){return v.goBack()},disabled:a,children:"Return"}),Object(Ue.jsx)("button",{type:"submit",className:"btn btn-primary ml-auto",disabled:a,children:"Submit"})]})]})]})})})},xt=function(e){var t=Object(ie.a)("requirements",(function(){return ft.fetch()})),c=t.data,a=t.isFetching,n=t.isError,s=t.error,r=t.refetch,l=oe();n&&Fe(s);var i=function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe.danger("Are you sure you want to delete this Requirement?");case 3:if(!e.sent){e.next=8;break}return e.next=6,ft.delete(t);case 6:toastr.info("Requirement has been deleted.","Notice"),r();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),Fe(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),o=v.getInstance().get("user"),d=[{title:"ID",accessor:"id"},{title:"Name",accessor:"name"},{title:"Created",accessor:"created_at"}];return"Registrar"===(null===o||void 0===o?void 0:o.role)&&d.push({title:"Actions",accessor:"actions"}),Object(Ue.jsx)(Ve,{onRefresh:function(){return r()},title:"Requirements",loading:a,items:(null===c||void 0===c?void 0:c.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{created_at:N()(e.created_at).format("MMMM DD, YYYY hh:mm A"),actions:"Registrar"===(null===o||void 0===o?void 0:o.role)?Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsx)(I.b,{to:l("".concat(e.id,"/edit")),className:"btn btn-warning btn-sm mx-1",children:Object(Ue.jsx)("i",{className:"fas fa-edit"})}),Object(Ue.jsx)("button",{className:"btn btn-danger btn-sm mx-1",onClick:function(t){t.preventDefault(),i(e.id)},children:Object(Ue.jsx)("i",{className:"fas fa-trash"})})]}):null})})))||[],columns:d,buttons:Object(Ue.jsx)(Ue.Fragment,{children:"Registrar"===(null===o||void 0===o?void 0:o.role)?Object(Ue.jsx)(I.b,{to:l("add"),className:"btn btn-primary btn-sm ml-2",children:Object(Ue.jsx)("i",{className:"fas fa-plus"})}):null})})},vt=function(e){var t=oe(),c=[{path:t("/"),exact:!0,component:xt},{path:t("/add"),component:Ot},{path:t("/:id/edit"),component:Ot}];return Object(Ue.jsx)(P.c,{children:c.map((function(e,t){return Object(F.createElement)(P.a,Object(j.a)(Object(j.a)({},e),{},{key:t}))}))})},pt=new(function(e){Object(De.a)(c,e);var t=Object(Ae.a)(c);function c(){return Object(b.a)(this,c),t.apply(this,arguments)}return c}(Ye))("/schedules"),Nt=new(function(e){Object(De.a)(c,e);var t=Object(Ae.a)(c);function c(){return Object(b.a)(this,c),t.apply(this,arguments)}return c}(Ye))("/sections"),gt=function(e){var t=Object(F.useState)(!1),c=Object(le.a)(t,2),a=c[0],n=c[1],s=de(),r=Object(le.a)(s,2),l=r[0],i=r[1],o=Object(me.a)({defaultValues:{force:!1}}),d=o.register,u=o.setValue,b=o.handleSubmit,m=o.reset,h=ue(),f=Object(le.a)(h,2),O=f[0],x=f[1],v=ue(),p=Object(le.a)(v,2),g=p[0],y=p[1],k=ue(),w=Object(le.a)(k,2),S=w[0],_=w[1],C=ue(),D=Object(le.a)(C,2),A=D[0],E=D[1],I=ue(),B=Object(le.a)(I,2),T=B[0],L=B[1],U=ue(),W=Object(le.a)(U,2),$=W[0],G=W[1],V=je([{day:"",start_time:null,end_time:null}]),J=Object(le.a)(V,2),q=J[0],K=J[1],H=Object(F.useState)(-1),z=Object(le.a)(H,2),Z=z[0],Q=z[1],X=Object(P.f)(),ee=Object(P.h)(),te=Object(ie.a)("courses",(function(){return Ie.fetch()})),ce=te.data,ae=te.refetch,ne=Object(ie.a)("users",(function(){return Be.fetch()})),se=ne.data,re=ne.refetch,oe=Object(ie.a)("subjects",(function(){return ct.fetch()})),be=oe.data,he=oe.refetch,fe=Object(ie.a)("years",(function(){return Pe.fetch()})),xe=fe.data,ve=fe.refetch,pe=Object(ie.a)("sections",(function(){return Nt.fetch()})),Ne=pe.data,ge=pe.refetch,ye=function(){var e=Object(R.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([ae(),ge(),he(),re(),ve()]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=Object(R.a)(M.a.mark((function e(t){var c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pt.fetchOne(t);case 3:c=e.sent,Q(c.id),i("Edit"),we(u,c),K(Object(Y.a)(c.payload)),c.course&&x(c.course),c.major&&y(c.major),c.section&&E(c.section),G(c.term),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),Fe(e.t0),X.goBack();case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=Object(R.a)(M.a.mark((function e(t){var c,a,s,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(!0),e.prev=1,!(c=null===xe||void 0===xe?void 0:xe.find((function(e){return e.current})))){e.next=7;break}t.year_id=c.id,e.next=8;break;case 7:return e.abrupt("return",toastr.error("A School Year is not set, please create/make one as current."));case 8:return t.payload=q,e.next=11,"Add"===l?pt.create(t):pt.update(Z,t);case 11:return toastr.success("Schedule has been saved successfully."),e.next=14,ye();case 14:m(),K([]),x(null),y(null),G(null),e.next=34;break;case 21:if(e.prev=21,e.t0=e.catch(1),409!==(null===(a=e.t0.response)||void 0===a?void 0:a.status)){e.next=33;break}return e.next=26,Oe.save(null===(s=e.t0.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message);case 26:if(!e.sent){e.next=31;break}return t.force=!0,e.next=30,Se(t);case 30:return e.abrupt("return");case 31:e.next=34;break;case 33:Fe(e.t0);case 34:return e.prev=34,n(!1),e.finish(34);case 37:case"end":return e.stop()}}),e,null,[[1,21,34,37]])})));return function(t){return e.apply(this,arguments)}}();return Object(F.useEffect)((function(){ee.path.includes("edit")&&ke(ee.params.id)}),[]),Object(Ue.jsx)("div",{className:"container-fluid",children:Object(Ue.jsx)("div",{className:"card",children:Object(Ue.jsxs)("div",{className:"card-body",children:[Object(Ue.jsxs)("h5",{className:"card-title",children:[l," Schedule"]}),Object(Ue.jsxs)("form",{onSubmit:b(Se),children:[Object(Ue.jsxs)("div",{className:"form-row",children:[Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-4",children:[Object(Ue.jsx)("label",{htmlFor:"course_id",children:"Course"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},d("course_id")),{},{id:"course_id",className:"form-control",onChange:function(e){var t=e.target.value.toNumber(),c=null===ce||void 0===ce?void 0:ce.find((function(e){return e.id===t}));c?x(c):(x(null),y(null))},children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),null===ce||void 0===ce?void 0:ce.filter((function(e){return e.open})).map((function(e,t){return Object(Ue.jsx)("option",{value:e.id,children:e.code},t)}))]}))]}),O&&O.majors&&O.majors.length>0?Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-4",children:[Object(Ue.jsx)("label",{htmlFor:"major_id",children:"Major"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},d("major_id")),{},{id:"major_id",className:"form-control",onChange:function(e){var t,c=e.target.value.toNumber(),a=null===O||void 0===O||null===(t=O.majors)||void 0===t?void 0:t.find((function(e){return e.id===c}));y(a||null)},children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),O.majors.map((function(e,t){return Object(Ue.jsx)("option",{value:e.id,children:e.name},t)}))]}))]}):null,Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-4",children:[Object(Ue.jsx)("label",{htmlFor:"section_id",children:"Section"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},d("section_id")),{},{id:"section_id",className:"form-control",onChange:function(e){var t=e.target.value.toNumber(),c=null===Ne||void 0===Ne?void 0:Ne.find((function(e){return e.id===t}));E(c||null)},children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),null===Ne||void 0===Ne?void 0:Ne.filter((function(e){return!O||e.course_id===O.id})).filter((function(e){return!g||e.major_id===g.id})).filter((function(e){var t;return null===(t=e.year)||void 0===t?void 0:t.current})).map((function(e,t){return Object(Ue.jsx)("option",{value:e.id,children:e.name},t)}))]}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-4",children:[Object(Ue.jsx)("label",{htmlFor:"teacher_id",children:"Teacher"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},d("teacher_id")),{},{id:"teacher_id",className:"form-control",onChange:function(e){var t=e.target.value.toNumber(),c=null===se||void 0===se?void 0:se.find((function(e){return"Teacher"===e.role&&e.id===t}));_(c||null)},children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),null===se||void 0===se?void 0:se.filter((function(e){return"Teacher"===e.role})).map((function(e,t){return Object(Ue.jsxs)("option",{value:e.id,children:[e.last_name,", ",e.first_name," ",e.middle_name||""]},t)}))]}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6 col-lg-4",children:[Object(Ue.jsx)("label",{htmlFor:"semester",children:"Semester"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},d("term")),{},{id:"semester",className:"form-control",onChange:function(e){var t=e.target.value;t.length>0?G(t):G(null)},children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),Object(Ue.jsx)("option",{value:"1st Semester",children:"1st Semester"}),Object(Ue.jsx)("option",{value:"2nd Semester",children:"2nd Semester"}),Object(Ue.jsx)("option",{value:"Summer",children:"Summer"})]}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6 col-lg-4",children:[Object(Ue.jsx)("label",{htmlFor:"year",children:"Year Level"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},d("year")),{},{id:"year",className:"form-control",onChange:function(e){var t=e.target.value;3===t.length?L(t):L(null)},children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),Object(Ue.jsx)("option",{value:"1st",children:"1st"}),Object(Ue.jsx)("option",{value:"2nd",children:"2nd"}),Object(Ue.jsx)("option",{value:"3rd",children:"3rd"}),Object(Ue.jsx)("option",{value:"4th",children:"4th"}),Object(Ue.jsx)("option",{value:"5th",children:"5th"})]}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-4",children:[Object(Ue.jsx)("label",{htmlFor:"subject_id",children:"Subject"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},d("subject_id")),{},{id:"subject_id",className:"form-control",children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),null===be||void 0===be?void 0:be.filter((function(e){var t,c=void 0===(null===(t=e.schedules)||void 0===t?void 0:t.find((function(e){return O&&g&&S&&A?e.teacher_id===S.id&&e.course_id===O.id&&e.major_id===g.id&&e.section_id===A.id:!(O&&S&&A)||e.teacher_id===S.id&&e.course_id===O.id&&e.section_id===A.id})));return"Add"===l?c:c||e.id===Z})).filter((function(e){return O&&g?e.course_id===O.id&&e.major_id===g.id:O?e.course_id===O.id:!g||e.major_id===g.id})).filter((function(e){return!T||e.level===T})).filter((function(e){return!$||e.term===$})).map((function(e,t){return Object(Ue.jsx)("option",{value:e.id,children:e.description},t)}))]}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12",children:[Object(Ue.jsx)("button",{className:"btn btn-info btn-sm mt-2 mb-4",onClick:function(e){e.preventDefault(),q.push({day:"",start_time:null,end_time:null}),K(Object(Y.a)(q))},children:"Add Row"}),Object(Ue.jsxs)("table",{className:"table",children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("th",{children:"Day"}),Object(Ue.jsx)("th",{children:"Start Time"}),Object(Ue.jsx)("th",{children:"End Time"}),Object(Ue.jsx)("th",{})]})}),Object(Ue.jsx)("tbody",{children:q.map((function(e,t){var c=e.day,n=e.start_time,s=e.end_time;return Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("td",{children:Object(Ue.jsx)("input",{type:"text",className:"form-control",value:c,onChange:function(e){q.splice(t,1,{day:e.target.value,start_time:n,end_time:s}),K(Object(Y.a)(q))}})}),Object(Ue.jsx)("td",{children:Object(Ue.jsx)(Re.a,{value:n?N()(n).toDate():void 0,options:{enableTime:!0,mode:"time",altFormat:"G:i K",altInput:!0},onChange:function(e){e.length>0&&(q.splice(t,1,{day:c,start_time:e[0].toJSON(),end_time:s}),K(Object(Y.a)(q)))},className:"form-control",disabled:a})}),Object(Ue.jsx)("td",{children:Object(Ue.jsx)(Re.a,{value:s?N()(s).toDate():void 0,options:{enableTime:!0,mode:"time",altFormat:"G:i K",altInput:!0},onChange:function(e){e.length>0&&(q.splice(t,1,{day:c,end_time:e[0].toJSON(),start_time:n}),K(Object(Y.a)(q)))},className:"form-control",disabled:a})}),Object(Ue.jsx)("td",{children:Object(Ue.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),q.splice(t,1),K(Object(Y.a)(q))},children:"Remove"})})]},t)}))})]})]})]}),Object(Ue.jsxs)("div",{className:"form-group d-flex",children:[Object(Ue.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){return X.goBack()},disabled:a,children:"Return"}),Object(Ue.jsx)("button",{type:"submit",className:"btn btn-primary ml-auto",disabled:a,children:"Submit"})]})]})]})})})},yt=function(e){var t=Object(ie.a)("schedules",(function(){return pt.fetch()})),c=t.data,a=t.isFetching,n=t.isError,s=t.error,r=t.refetch,l=oe();n&&Fe(s);var i=function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe.danger("Are you sure you want to delete this Schedule?");case 3:if(!e.sent){e.next=8;break}return e.next=6,pt.delete(t);case 6:toastr.info("Schedule has been deleted.","Notice"),r();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),Fe(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),o=v.getInstance().get("user"),d=[{title:"Course",accessor:"course",minWidth:"375px"},{title:"Subject",accessor:"subject",minWidth:"350px"},{title:"Section",accessor:"section"},{title:"Teacher",accessor:"teacher",minWidth:"250px"},{title:"Year",accessor:"year"},{title:"Times",accessor:"times",minWidth:"250px"}];return"Registrar"===(null===o||void 0===o?void 0:o.role)&&d.push({title:"Actions",accessor:"actions"}),Object(Ue.jsx)(Ve,{onRefresh:function(){return r()},title:"Schedules",loading:a,items:(null===c||void 0===c?void 0:c.map((function(e){var t,c,a,n,s,r;return Object(j.a)(Object(j.a)({},e),{},{section:null===(t=e.section)||void 0===t?void 0:t.name,subject:null===e||void 0===e||null===(c=e.subject)||void 0===c?void 0:c.description,course:"".concat(null===(a=e.course)||void 0===a?void 0:a.code).concat(e.major?" - Major in ".concat(e.major.name):""),teacher:"".concat(null===(n=e.teacher)||void 0===n?void 0:n.last_name,", ").concat(null===(s=e.teacher)||void 0===s?void 0:s.first_name," ").concat((null===(r=e.teacher)||void 0===r?void 0:r.middle_name)||""),times:Object(Ue.jsx)(Ue.Fragment,{children:e.payload.map((function(e,t){return e.start_time&&e.end_time?Object(Ue.jsxs)("span",{className:"d-block",children:[e.day," ",N()(e.start_time).format("hh:mm A")," - ",N()(e.end_time).format("hh:mm A")]},t):null}))}),actions:Object(Ue.jsx)("div",{style:{minWidth:"250px"},children:"Registrar"===(null===o||void 0===o?void 0:o.role)?Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsx)(I.b,{to:l("".concat(e.id,"/edit")),className:"btn btn-warning btn-sm mx-1",children:Object(Ue.jsx)("i",{className:"fas fa-edit"})}),Object(Ue.jsx)("button",{className:"btn btn-danger btn-sm mx-1",onClick:function(t){t.preventDefault(),i(e.id)},children:Object(Ue.jsx)("i",{className:"fas fa-trash"})})]}):null})})})))||[],columns:d,buttons:Object(Ue.jsx)(Ue.Fragment,{children:"Registrar"===(null===o||void 0===o?void 0:o.role)?Object(Ue.jsx)(I.b,{to:l("add"),className:"btn btn-primary btn-sm ml-2",children:Object(Ue.jsx)("i",{className:"fas fa-plus"})}):null})})},kt=function(e){var t,c,a,n=v.getInstance().get("user"),s=Object(ie.a)(["user",null===n||void 0===n?void 0:n.id],(function(){return Be.fetchOne(null===n||void 0===n?void 0:n.id)})).data,r=Object(ie.a)("schedules",(function(){return pt.fetch()})).data,l=null===s||void 0===s||null===(t=s.admissions)||void 0===t?void 0:t.last();return s&&l?Object(Ue.jsxs)("div",{className:"container",children:[Object(Ue.jsx)("div",{className:"row",children:Object(Ue.jsxs)("div",{className:"col-12 col-md-6 offset-md-3 text-center",children:[Object(Ue.jsx)("h4",{children:"EASTERN MINDORO COLLEGE"}),Object(Ue.jsx)("p",{children:"Bongabong, Oriental Mindoro"})]})}),Object(Ue.jsxs)("div",{className:"d-flex mt-5",children:[Object(Ue.jsxs)("span",{className:"mr-auto",children:[Object(Ue.jsx)("b",{children:"Name:"})," ",s.last_name,", ",s.first_name," ",s.middle_name||""]}),Object(Ue.jsxs)("span",{className:"ml-auto",children:[Object(Ue.jsx)("b",{children:"Semester:"})," ",l.term]})]}),Object(Ue.jsxs)("div",{className:"d-flex",children:[Object(Ue.jsxs)("span",{className:"mr-auto",children:[Object(Ue.jsx)("b",{children:"Year Level:"})," ",l.level]}),Object(Ue.jsxs)("span",{className:"ml-auto",children:[Object(Ue.jsx)("b",{children:"Status: "})," ",l.status]})]}),Object(Ue.jsxs)("div",{className:"d-flex mt-3",children:[Object(Ue.jsxs)("span",{className:"mr-auto",children:[Object(Ue.jsx)("b",{children:"Student Number:"})," ",s.uuid]}),Object(Ue.jsxs)("span",{className:"ml-auto",children:[Object(Ue.jsx)("b",{children:"Year:"})," ",null===(c=l.year)||void 0===c?void 0:c.start," - ",null===(a=l.year)||void 0===a?void 0:a.end]})]}),Object(Ue.jsxs)("table",{className:"table table-bordered mt-3",children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("th",{children:"Subject Code"}),Object(Ue.jsx)("th",{children:"Description"}),Object(Ue.jsx)("th",{children:"Schedules"}),Object(Ue.jsx)("th",{children:"Instructor"})]})}),Object(Ue.jsx)("tbody",{children:null===r||void 0===r?void 0:r.map((function(e,t){var c,a,n,s,r;return Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("td",{children:null===(c=e.subject)||void 0===c?void 0:c.code}),Object(Ue.jsx)("td",{children:null===(a=e.subject)||void 0===a?void 0:a.description}),Object(Ue.jsx)("td",{children:e.payload.map((function(e){return e.start_time||e.end_time?Object(Ue.jsxs)("span",{className:"d-block",children:[e.day," ",N()(e.start_time).format("hh:mm A")," - ",N()(e.end_time).format("hh:mm A")]}):null}))}),Object(Ue.jsxs)("td",{children:[null===(n=e.teacher)||void 0===n?void 0:n.last_name,", ",null===(s=e.teacher)||void 0===s?void 0:s.first_name," ",(null===(r=e.teacher)||void 0===r?void 0:r.middle_name)||""]})]},t)}))})]})]}):null},wt=function(e){var t=oe(),c=v.getInstance().get("user"),a=[{path:t("/"),exact:!0,component:"Student"!==(null===c||void 0===c?void 0:c.role)?yt:kt}];return"Student"!==(null===c||void 0===c?void 0:c.role)&&(a.push({path:t("/add"),component:gt}),a.push({path:t("/:id/edit"),component:gt})),Object(Ue.jsx)(P.c,{children:a.map((function(e,t){return Object(F.createElement)(P.a,Object(j.a)(Object(j.a)({},e),{},{key:t}))}))})},St=new(function(e){Object(De.a)(c,e);var t=Object(Ae.a)(c);function c(){return Object(b.a)(this,c),t.apply(this,arguments)}return c}(Ye))("/grades"),_t=Object(h.a)(),Ft=Object(h.a)(),Ct=function(e){var t,c=Object(F.useState)(!1),a=Object(le.a)(c,2),n=a[0],s=a[1],r=Object(ie.a)("users",(function(){return Be.fetch()})),l=r.data,i=r.isFetching,d=r.isError,u=r.error,b=r.refetch,m=Object(ie.a)("subjects",(function(){return ct.fetch()})).data,h=Object(ie.a)("courses",(function(){return Ie.fetch()})).data,f=ue(),O=Object(le.a)(f,2),x=O[0],p=O[1],g=ue(),y=Object(le.a)(g,2),k=y[0],w=y[1],S=Object(me.a)({defaultValues:{grade:65}}),_=S.register,C=S.handleSubmit,D=S.reset,A=Object(me.a)(),Y=A.register,E=A.handleSubmit,B=A.reset,L=A.setValue,U=ue(),W=Object(le.a)(U,2),G=W[0],V=W[1],J=Object(F.createRef)(),K=be().data,H=Object(P.f)(),z=ue(),Z=Object(le.a)(z,2),Q=Z[0],X=Z[1],ee=ue(),te=Object(le.a)(ee,2),ce=te[0],ae=te[1],ne=ue(),se=Object(le.a)(ne,2),re=se[0],oe=se[1],de=ue(),je=Object(le.a)(de,2),he=je[0],fe=je[1],pe=ue(),Ne=Object(le.a)(pe,2),ge=Ne[0],ye=Ne[1],ke=ue(),we=Object(le.a)(ke,2),Se=we[0],_e=we[1],Ce=Object(me.a)({defaultValues:{start:(new Date).getFullYear(),end:(new Date).getFullYear()+1,current:!0}}),De=Ce.register,Ae=Ce.handleSubmit,Ye=Ce.reset,Ee=Object(F.useCallback)((function(){if(H.location.pathname.includes("old"))return"Old";if(H.location.pathname.includes("new"))return"New";if(H.location.pathname.includes("behind"))return"Behind";throw new Error}),[H.location.pathname]),Me=Object(F.useState)(Ee()),Te=Object(le.a)(Me,2),Le=Te[0],We=Te[1],$e=v.getInstance().get("user"),Ge={"Not Paid":"danger","Fully Paid":"success","Partially Paid":"warning"};d&&Fe(u);var Je=function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.notice("Are you sure you want to evaluate all students into a new school year?","Notice");case 2:if(!e.sent){e.next=26;break}return s(!0),e.prev=4,t.semester_start=(null===Q||void 0===Q?void 0:Q.toJSON())||"",t.semester_end=(null===ce||void 0===ce?void 0:ce.toJSON())||"",t.registration_start=(null===re||void 0===re?void 0:re.toJSON())||"",t.registration_end=(null===he||void 0===he?void 0:he.toJSON())||"",t.grade_start=(null===ge||void 0===ge?void 0:ge.toJSON())||"",t.grade_end=(null===Se||void 0===Se?void 0:Se.toJSON())||"",t.current=!0,$("#".concat(_t)).modal("hide"),e.next=15,Pe.create(t);case 15:return e.next=17,qe();case 17:D(),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(4),Fe(e.t0);case 23:return e.prev=23,s(!1),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[4,20,23,26]])})));return function(t){return e.apply(this,arguments)}}(),qe=function(){var e=Object(R.a)(M.a.mark((function e(){var t,c,a,n,s;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,toastr.info("Processing students. Please wait.","Notice"),e.next=4,o.a.post("/admissions/increment");case 4:t=e.sent,c=t.data,a=c.missing,n=c.failed,s=c.passed,toastr.success("Processing done. \n                    <br />Passed Students: ".concat(s,"\n                    <br />Failed Students: ").concat(n," \n                    <br />Subjects with missing grades: ").concat(a),"Success",{escapeHtml:!1}),b(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),toastr.error("Unable to process students."),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.student_id=G,t.teacher_id=$e.id,e.next=5,St.create(t);case 5:toastr.success("Grade added succesfully."),b(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Fe(e.t0);case 12:return e.prev=12,J.current&&$(J.current).modal("hide"),V(null),D(),e.finish(12);case 17:case"end":return e.stop()}}),e,null,[[0,9,12,17]])})));return function(t){return e.apply(this,arguments)}}(),He=function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be.update(G,t);case 3:toastr.success("Student payment updated succesfully."),b(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Fe(e.t0);case 10:return e.prev=10,$("#".concat(Ft)).modal("hide"),V(null),B(),e.finish(10);case 15:case"end":return e.stop()}}),e,null,[[0,7,10,15]])})));return function(t){return e.apply(this,arguments)}}(),ze=function(e){var t,c,a=null===(t=e.admissions)||void 0===t?void 0:t.find((function(e){var t;return null===(t=e.year)||void 0===t?void 0:t.current}));return a||(null===(c=e.admissions)||void 0===c?void 0:c.last())},Ze=function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe.danger("Are you sure you want to delete this Student?");case 3:if(!e.sent){e.next=8;break}return e.next=6,Be.delete(t);case 6:toastr.info("Student has been deleted.","Notice"),b();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),Fe(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("/users/".concat(t.id,"/reincrement"));case 3:return toastr.success("Student reincremented successfully."),e.next=6,b();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Fe(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();Object(F.useEffect)((function(){We(Ee())}),[Ee]);var Xe=[{title:"ID Number",accessor:"uuid",minWidth:"160px"},{title:"Name",accessor:"name",minWidth:"200px"},{title:"Year",accessor:"year"},{title:"Semester",accessor:"semester",minWidth:"150px"},{title:"Course",accessor:"course",minWidth:"375px"},{title:"Section",accessor:"section",minWidth:"200px"},{title:"Units Available",accessor:"allowed_units",minWidth:"150px"},{title:"Payment Status",accessor:"payment_status"},{title:"Status",accessor:"status"}];return["Registrar","Teacher","Admin"].includes((null===$e||void 0===$e?void 0:$e.role)||"")&&Xe.push({title:"Actions",accessor:"actions",minWidth:"350px"}),Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsx)(Ve,{onRefresh:function(){return b()},title:"".concat(Le," Students"),loading:i,items:(null===l||void 0===l?void 0:l.filter((function(e){return"Student"===e.role&&e.active})).filter((function(e){return"Behind"!==Le?e.type===Le&&!xe(e):xe(e)})).filter((function(e){var t,c=null===(t=e.admissions)||void 0===t?void 0:t.find((function(e){var t;return null===(t=e.year)||void 0===t?void 0:t.current}));if(c){if(x&&k)return c.course_id===x.id&&c.major_id===k.id;if(x)return c.course_id===x.id;if(k)return c.major_id===k.id}return!0})).map((function(e){var t,c,a,n,s,r,l,i,o,d,u;return Object(j.a)(Object(j.a)({},e),{},{name:Object(Ue.jsxs)(Ue.Fragment,{children:[e.last_name,", ",e.first_name," ",e.middle_name||""]}),year:null===(t=ze(e))||void 0===t?void 0:t.level,course:"".concat((null===(c=ze(e))||void 0===c||null===(a=c.course)||void 0===a?void 0:a.code)||"").concat((null===(n=ze(e))||void 0===n?void 0:n.major)?" - Major in ".concat((null===(s=ze(e))||void 0===s||null===(r=s.major)||void 0===r?void 0:r.name)||"N/A"):""),birthday:N()(e.birthday).format("MMMM DD, YYYY"),age:(new Date).getFullYear()-N()(e.birthday).year(),status:e.active?Object(Ue.jsx)("span",{className:"badge badge-success",children:"Confirmed"}):Object(Ue.jsx)("span",{className:"badge badge-danger",children:"Unconfirmed"}),payment_status:Object(Ue.jsx)("span",{className:"badge badge-".concat(Ge[e.payment_status]),children:e.payment_status}),section:Object(Ue.jsx)(Ue.Fragment,{children:null===(l=ve(e))||void 0===l?void 0:l.name}),semester:null===(i=ze(e))||void 0===i||null===(o=i.year)||void 0===o?void 0:o.semester,actions:Object(Ue.jsxs)(Ue.Fragment,{children:["Registrar"===(null===$e||void 0===$e?void 0:$e.role)?Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsx)(I.b,{to:"/dashboard/admissions/".concat(null===(d=e.admissions)||void 0===d||null===(u=d.find((function(e){var t;return null===e||void 0===e||null===(t=e.year)||void 0===t?void 0:t.current})))||void 0===u?void 0:u.id,"/edit"),className:"btn btn-warning btn-sm mx-1",title:"Edit",children:Object(Ue.jsx)("i",{className:"fas fa-edit"})}),Object(Ue.jsx)("button",{className:"btn btn-info btn-sm mx-1",title:"Update Payment",onClick:function(t){t.preventDefault();var c=$("#".concat(Ft));c.length>0&&(V(e.id),L("payment_status",e.payment_status),c.modal("toggle"))},children:Object(Ue.jsx)("i",{className:"fas fa-money-bill"})}),xe(e)?Object(Ue.jsx)("button",{className:"btn btn-primary btn-sm",title:"Re-Increment Student",onClick:function(){var t=Object(R.a)(M.a.mark((function t(c){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),t.next=3,Oe.notice("Are you sure to reincrement this student?");case 3:if(!t.sent){t.next=6;break}return t.next=6,Qe(e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:Object(Ue.jsx)("i",{className:"fas fa-university"})}):null]}):null,["Registrar","Admin"].includes((null===$e||void 0===$e?void 0:$e.role)||"")&&!xe(e)?Object(Ue.jsx)(I.b,{to:"".concat(T).concat(q,"/").concat(e.id,"/subjects"),className:"btn btn-primary btn-sm mx-1",title:"Add Subjects",children:Object(Ue.jsx)("i",{className:"fas fa-book"})}):null,"Teacher"===(null===$e||void 0===$e?void 0:$e.role)?Object(Ue.jsx)(Ue.Fragment,{children:Object(Ue.jsx)("button",{className:"btn btn-primary btn-sm mx-1",title:"Add Grade",onClick:function(t){t.preventDefault(),J.current&&(V(e.id),$(J.current).modal("toggle"))},children:Object(Ue.jsx)("i",{className:"fas fa-chart-bar"})})}):null,Object(Ue.jsx)("button",{className:"btn btn-danger btn-sm mx-1 d-none",onClick:function(t){t.preventDefault(),Ze(e.id)},children:Object(Ue.jsx)("i",{className:"fas fa-trash"})})]})})})))||[],columns:Xe,misc:Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsxs)("label",{className:"mb-0 mt-2 mx-1",children:["Course:",Object(Ue.jsxs)("select",{className:"custom-select custom-select-sm form-control form-control-sm",onChange:function(e){var t=e.target.value.toNumber();if(0===t)p(null),w(null);else{var c=null===h||void 0===h?void 0:h.find((function(e){return e.id===t}));c&&p(c)}},children:[Object(Ue.jsx)("option",{value:"0",children:"All"}),null===h||void 0===h?void 0:h.map((function(e,t){return Object(Ue.jsx)("option",{value:e.id,children:e.code},t)}))]})]}),x?Object(Ue.jsxs)("label",{className:"mb-0 mt-2 mx-1",children:["Major:",Object(Ue.jsxs)("select",{className:"custom-select custom-select-sm form-control form-control-sm",onChange:function(e){var t=e.target.value.toNumber();if(0===t)w(null);else{var c,a=null===x||void 0===x||null===(c=x.majors)||void 0===c?void 0:c.find((function(e){return e.id===t}));a&&w(a)}},children:[Object(Ue.jsx)("option",{value:"0",children:"All"}),null===(t=x.majors)||void 0===t?void 0:t.map((function(e,t){return Object(Ue.jsx)("option",{value:e.id,children:e.name},t)}))]})]}):null]}),buttons:Object(Ue.jsx)(Ue.Fragment,{children:"Registrar"===(null===$e||void 0===$e?void 0:$e.role)?Object(Ue.jsxs)(Ue.Fragment,{children:["Behind"!==Le?Object(Ue.jsx)("button",{className:"btn btn-secondary btn-sm mx-1",title:"Evaluate Students",onClick:function(e){e.preventDefault(),$("#".concat(_t)).modal("show")},children:Object(Ue.jsx)("i",{className:"fas fa-chevron-up"})}):null,Object(Ue.jsx)("a",{href:"".concat(o.a.defaults.baseURL,"/exports/registrar/classlist/regular-and-irregular"),download:!0,className:"btn btn-warning btn-sm mx-1",title:"Download Classlist per Regular and Irregular Student",children:Object(Ue.jsx)("i",{className:"fas fa-file-excel"})}),Object(Ue.jsx)("a",{href:"".concat(o.a.defaults.baseURL,"/exports/registrar/classlist/course-and-major"),download:!0,className:"btn btn-primary btn-sm mx-1",title:"Download Classlist per Course and Major",children:Object(Ue.jsx)("i",{className:"fas fa-file-excel"})}),Object(Ue.jsx)("a",{href:"".concat(o.a.defaults.baseURL,"/exports/registrar/classlist/subject"),download:!0,className:"btn btn-success btn-sm mx-1",title:"Download Classlist per Subject",children:Object(Ue.jsx)("i",{className:"fas fa-file-excel"})})]}):null})}),Object(Ue.jsx)("div",{ref:J,className:"modal fade",tabIndex:-1,children:Object(Ue.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:Object(Ue.jsxs)("div",{className:"modal-content",children:[Object(Ue.jsxs)("div",{className:"modal-header",children:[Object(Ue.jsx)("h5",{className:"modal-title",children:"Add Grade"}),Object(Ue.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:Object(Ue.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(Ue.jsxs)("form",{onSubmit:C(Ke),children:[Object(Ue.jsxs)("div",{className:"modal-body",children:[Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({type:"hidden"},_("year_id")),{},{value:null===K||void 0===K?void 0:K.id})),Object(Ue.jsxs)("div",{className:"form-group",children:[Object(Ue.jsx)("label",{htmlFor:"subject_id",children:"Subject"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},_("subject_id")),{},{id:"subject_id",className:"form-control",children:[Object(Ue.jsx)("option",{children:" -- Select -- "}),null===m||void 0===m?void 0:m.map((function(e,t){return Object(Ue.jsx)("option",{value:e.id,children:e.code},t)}))]}))]}),Object(Ue.jsxs)("div",{className:"form-group",children:[Object(Ue.jsx)("label",{htmlFor:"grade",children:"Grade"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},_("grade")),{},{type:"number",id:"grade",min:0,max:100,className:"form-control"}))]}),Object(Ue.jsxs)("div",{className:"form-group",children:[Object(Ue.jsx)("label",{htmlFor:"status",children:"Status"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},_("status")),{},{type:"text",id:"status",className:"form-control"}))]})]}),Object(Ue.jsxs)("div",{className:"modal-footer",children:[Object(Ue.jsx)("button",{type:"submit",className:"btn btn-primary btn-sm",children:"Submit"}),Object(Ue.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm","data-dismiss":"modal",children:"Close"})]})]})]})})}),Object(Ue.jsx)("div",{id:Ft,className:"modal fade",tabIndex:-1,children:Object(Ue.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:Object(Ue.jsxs)("div",{className:"modal-content",children:[Object(Ue.jsxs)("div",{className:"modal-header",children:[Object(Ue.jsx)("h5",{className:"modal-title",children:"Update Payment"}),Object(Ue.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:Object(Ue.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(Ue.jsxs)("form",{onSubmit:E(He),children:[Object(Ue.jsx)("div",{className:"modal-body",children:Object(Ue.jsxs)("div",{className:"form-group",children:[Object(Ue.jsx)("label",{htmlFor:"payment_status",children:"Payment Status"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},Y("payment_status")),{},{id:"subject_id",className:"form-control",children:[Object(Ue.jsx)("option",{value:"Not Paid",children:"Not Paid"}),Object(Ue.jsx)("option",{value:"Partially Paid",children:"Partially Paid"}),Object(Ue.jsx)("option",{value:"Fully Paid",children:"Fully Paid"})]}))]})}),Object(Ue.jsxs)("div",{className:"modal-footer",children:[Object(Ue.jsx)("button",{type:"submit",className:"btn btn-primary btn-sm",children:"Submit"}),Object(Ue.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm","data-dismiss":"modal",children:"Close"})]})]})]})})}),Object(Ue.jsx)("div",{id:_t,className:"modal fade",tabIndex:-1,children:Object(Ue.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:Object(Ue.jsx)("div",{className:"modal-content",children:Object(Ue.jsxs)("form",{onSubmit:Ae(Je),children:[Object(Ue.jsxs)("div",{className:"modal-header",children:[Object(Ue.jsx)("h5",{className:"modal-title",children:"Increment to new School Year"}),Object(Ue.jsx)("button",{type:"button",className:"close",onClick:function(e){e.preventDefault(),$("#".concat(_t)).modal("hide"),Ye()},children:Object(Ue.jsx)("span",{children:"\xd7"})})]}),Object(Ue.jsxs)("div",{className:"modal-body",children:[Object(Ue.jsxs)("div",{className:"mb-3",children:[Object(Ue.jsxs)("p",{children:["Current Year: ",null===K||void 0===K?void 0:K.start," - ",null===K||void 0===K?void 0:K.end]}),Object(Ue.jsxs)("p",{children:["Current Semester: ",null===K||void 0===K?void 0:K.semester]})]}),Object(Ue.jsxs)("div",{className:"form-row",children:[Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"start",children:"Start"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},De("start")),{},{type:"number",id:"start",min:(new Date).getFullYear(),max:(new Date).getFullYear()+10,className:"form-control",disabled:n}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"end",children:"End"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},De("end")),{},{type:"number",id:"end",min:(new Date).getFullYear(),max:(new Date).getFullYear()+10,className:"form-control",disabled:n}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12",children:[Object(Ue.jsx)("label",{htmlFor:"semester",children:"Semester"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},De("semester")),{},{id:"semester",className:"form-control",children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),Object(Ue.jsx)("option",{value:"1st Semester",children:"1st Semester"}),Object(Ue.jsx)("option",{value:"2nd Semester",children:"2nd Semester"}),Object(Ue.jsx)("option",{value:"Summer",children:"Summer"})]}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"semester_start",children:"Semester Start"}),Object(Ue.jsx)(Re.a,{value:Q||void 0,id:"semester_start",onChange:function(e){e.length>0&&X(e[0])},className:"form-control",disabled:n})]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"semester_end",children:"Semester End"}),Object(Ue.jsx)(Re.a,{value:ce||void 0,id:"semester_end",onChange:function(e){e.length>0&&ae(e[0])},className:"form-control",disabled:n})]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"registration_start",children:"Registration Start"}),Object(Ue.jsx)(Re.a,{value:re||void 0,id:"registration_start",onChange:function(e){e.length>0&&oe(e[0])},className:"form-control",disabled:n})]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"registration_end",children:"Registration End"}),Object(Ue.jsx)(Re.a,{value:he||void 0,id:"registration_end",onChange:function(e){e.length>0&&fe(e[0])},className:"form-control",disabled:n})]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"grade_start",children:"Grade Encoding Start"}),Object(Ue.jsx)(Re.a,{value:ge||void 0,id:"grade_start",onChange:function(e){e.length>0&&ye(e[0])},className:"form-control",disabled:n,options:{altInput:!0,altFormat:"F j, Y G:i K",enableTime:!0,dateFormat:"F j, Y G:i K"}})]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"grade_end",children:"Grade Encoding End"}),Object(Ue.jsx)(Re.a,{value:Se||void 0,id:"grade_end",onChange:function(e){e.length>0&&_e(e[0])},className:"form-control",disabled:n,options:{altInput:!0,altFormat:"F j, Y G:i K",enableTime:!0,dateFormat:"F j, Y G:i K"}})]})]})]}),Object(Ue.jsxs)("div",{className:"modal-footer d-flex",children:[Object(Ue.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(e){e.preventDefault(),$("#".concat(_t)).modal("hide"),Ye()},disabled:n,children:"Return"}),Object(Ue.jsx)("button",{type:"submit",className:"btn btn-primary ml-auto",disabled:n,children:"Submit"})]})]})})})})]})},Dt=function(e){var t,c,n,s,r=Object(F.useState)(!1),l=Object(le.a)(r,2),i=l[0],d=l[1],u=Object(P.g)().id,j=Object(P.f)(),b=je(),m=Object(le.a)(b,2),h=m[0],f=m[1],O=Object(ie.a)(["users",u],(function(){return Be.fetchOne(u)}),{onSuccess:function(e){var t;f(null===(t=e.subjects)||void 0===t?void 0:t.map((function(e){return e.id})))}}),x=O.data,p=O.error,g=O.isError,y=Object(ie.a)("subjects",(function(){return ct.fetch()})).data,k=(null===x||void 0===x||null===(t=x.admissions)||void 0===t?void 0:t.find((function(e){var t;return null===(t=e.year)||void 0===t?void 0:t.current})))||(null===x||void 0===x||null===(c=x.admissions)||void 0===c?void 0:c.last()),w=v.getInstance().get("user"),S=be({onSuccess:function(){return C()}}).data,_=function(){var e=Object(R.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,e.next=4,o.a.post("/users/".concat(null===x||void 0===x?void 0:x.id,"/subjects"),{subjects:h});case 4:toastr.success("Subjects enrolled successfully."),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),Fe(e.t0);case 10:return e.prev=10,d(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(R.a)(M.a.mark((function e(){var t,c,a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=12;break}if(t=N()(),c=N()(S.registration_start),a=N()(S.registration_end),!t.isBefore(c)){e.next=8;break}return e.next=7,Oe.okay("Enrollment will start at ".concat(c.format("MMMM DD, YYYY"),". Please wait until the given date."),"Notice");case 7:return e.abrupt("return",j.goBack());case 8:if(!t.isAfter(a)){e.next=12;break}return e.next=11,Oe.okay("Enrollment has already ended. Please enroll at the next enrollment phase.","Notice");case 11:return e.abrupt("return",j.goBack());case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return g?(Fe(p),j.goBack(),null):x&&k?Object(Ue.jsx)("div",{className:"container",children:Object(Ue.jsxs)("div",{className:"card",children:[Object(Ue.jsxs)("div",{className:"card-header",children:[Object(Ue.jsx)("h4",{className:"card-title",children:"Student Subjects"}),Object(Ue.jsxs)("p",{className:"card-text",children:[x.last_name,", ",x.first_name," ",x.middle_name||""]}),Object(Ue.jsxs)("p",{className:"card-text",children:["School Year: ",null===k||void 0===k||null===(n=k.year)||void 0===n?void 0:n.start," - ",null===k||void 0===k||null===(s=k.year)||void 0===s?void 0:s.end]}),Object(Ue.jsxs)("small",{className:"form-text text-muted",children:["Subjects with"," ",Object(Ue.jsx)("sup",{children:Object(Ue.jsx)("i",{children:Object(Ue.jsx)("i",{className:"fas fa-check"})})})," ","are enrolled."]}),"Admin"===(null===w||void 0===w?void 0:w.role)?Object(Ue.jsx)("small",{className:"form-text text-muted",children:"Subjects are overrideable even if student has lesser allowed units than the subjects provided."}):null]}),Object(Ue.jsx)("div",{className:"card-body",children:Object(Ue.jsxs)("form",{onSubmit:function(e){e.preventDefault(),_()},children:[Object(Ue.jsx)("div",{className:"form-row",children:null===y||void 0===y?void 0:y.filter((function(e){return"Admin"===(null===w||void 0===w?void 0:w.role)?e.course_id===k.course_id&&e.major_id===k.major_id:e.level===k.level&&e.term===k.term&&e.course_id===k.course_id&&e.major_id===k.major_id})).map((function(e,t){var c;return Object(Ue.jsx)("div",{className:"form-group col-12 col-md-4",children:Object(Ue.jsxs)("div",{className:"custom-control custom-checkbox",children:[Object(Ue.jsx)("input",{type:"checkbox",className:"custom-control-input",id:Object(a.trim)("".concat(e.code,"-").concat(e.id)),disabled:i,checked:h.includes(e.id),onChange:function(e){var t=e.target.value.toNumber();if(h.includes(t)){var c=h.findIndex((function(e){return e===t}));h.splice(c,1)}else h.push(t);f(Object(Y.a)(h))},value:e.id}),Object(Ue.jsxs)("label",{className:"custom-control-label",htmlFor:Object(a.trim)("".concat(e.code,"-").concat(e.id)),children:[e.code," - ",e.description," ",Object(Ue.jsx)("sup",{children:Object(Ue.jsx)("i",{children:(null===(c=x.subjects)||void 0===c?void 0:c.find((function(t){return t.id===e.id})))?Object(Ue.jsx)("i",{className:"fas fa-check"}):null})})]})]})},t)}))}),Object(Ue.jsx)("div",{className:"form-group",children:Object(Ue.jsx)("button",{type:"submit",className:"btn btn-primary btn-sm",disabled:i,children:"Save"})})]})})]})}):Object(Ue.jsx)("div",{className:"container",children:Object(Ue.jsx)("div",{className:"text-center",children:Object(Ue.jsx)("i",{className:"fas fa-circle-notch fa-spin"})})})},At=function(e){var t=oe(),c=[{path:t("/new"),component:Ct},{path:t("/old"),component:Ct},{path:t("/behind"),component:Ct},{path:t("/:id/subjects"),component:Dt}];return Object(Ue.jsx)(P.c,{children:c.map((function(e,t){return Object(F.createElement)(P.a,Object(j.a)(Object(j.a)({},e),{},{key:t}))}))})},Yt=function(e){var t=Object(F.useState)(!1),c=Object(le.a)(t,2),a=c[0],n=c[1],s=de(),r=Object(le.a)(s,2),l=r[0],i=r[1],o=Object(me.a)({defaultValues:{force:!1}}),d=o.register,u=o.setValue,b=o.handleSubmit,m=o.reset,h=Object(F.useState)(-1),f=Object(le.a)(h,2),O=f[0],x=f[1],v=ue(),p=Object(le.a)(v,2),N=p[0],g=p[1],y=Object(P.f)(),k=Object(P.h)(),w=Object(ie.a)("courses",(function(){return Ie.fetch()})).data,S=function(){var e=Object(R.a)(M.a.mark((function e(t){var c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ct.fetchOne(t);case 3:c=e.sent,x(c.id),we(u,c),i("Edit"),g(c.course),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),Fe(e.t0),y.goBack();case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(R.a)(M.a.mark((function e(t){var c,a,s;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,e.next=4,"Add"===l?ct.create(t):ct.update(O,t);case 4:toastr.success("Subject has been saved successfully."),m(),e.next=21;break;case 8:if(e.prev=8,e.t0=e.catch(1),409!==(null===(c=e.t0.response)||void 0===c?void 0:c.status)){e.next=20;break}return e.next=13,Oe.save(null===(a=e.t0.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message);case 13:if(!e.sent){e.next=18;break}return t.force=!0,e.next=17,_(t);case 17:return e.abrupt("return");case 18:e.next=21;break;case 20:Fe(e.t0);case 21:return e.prev=21,n(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[1,8,21,24]])})));return function(t){return e.apply(this,arguments)}}();return Object(F.useEffect)((function(){k.path.includes("edit")&&S(k.params.id)}),[]),Object(Ue.jsx)("div",{className:"container-fluid",children:Object(Ue.jsx)("div",{className:"card",children:Object(Ue.jsxs)("div",{className:"card-body",children:[Object(Ue.jsxs)("h5",{className:"card-title",children:[l," Subject"]}),Object(Ue.jsxs)("form",{onSubmit:b(_),children:[Object(Ue.jsxs)("div",{className:"form-row",children:[Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"code",children:"Subject Code"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("code")),{},{type:"text",id:"code",className:"form-control",disabled:a}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"description",children:"Description"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("description")),{},{type:"text",id:"description",className:"form-control",disabled:a}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"course_id",children:"Course Code"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},d("course_id")),{},{id:"course_id",className:"form-control",onChange:function(e){var t=e.target.value.toNumber(),c=null===w||void 0===w?void 0:w.find((function(e){return e.id===t}));g(c||null)},children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),null===w||void 0===w?void 0:w.map((function(e,t){return Object(Ue.jsx)("option",{value:e.id,children:e.code},t)}))]}))]}),N&&N.majors&&N.majors.length>0?Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"major_id",children:"Major"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},d("major_id")),{},{id:"major_id",className:"form-control",children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),N.majors.map((function(e,t){return Object(Ue.jsx)("option",{value:e.id,children:e.name},t)}))]}))]}):null,Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"level",children:"Year Level"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},d("level")),{},{id:"level",className:"form-control",children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),Object(Ue.jsx)("option",{value:"1st",children:"1st"}),Object(Ue.jsx)("option",{value:"2nd",children:"2nd"}),Object(Ue.jsx)("option",{value:"3rd",children:"3rd"}),Object(Ue.jsx)("option",{value:"4th",children:"4th"}),Object(Ue.jsx)("option",{value:"5th",children:"5th"})]}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"units",children:"Number of Units"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},d("units")),{},{id:"units",className:"form-control",children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),[1,2,3,4,5,6].map((function(e,t){return Object(Ue.jsx)("option",{value:e,children:e},t)}))]}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-4",children:[Object(Ue.jsx)("label",{htmlFor:"term",children:"Term"}),Object(Ue.jsxs)("div",{className:"custom-control custom-radio",children:[Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("term")),{},{type:"radio",id:"1st-semester",className:"custom-control-input",value:"1st Semester"})),Object(Ue.jsx)("label",{className:"custom-control-label",htmlFor:"1st-semester",children:"1st Semester"})]}),Object(Ue.jsxs)("div",{className:"custom-control custom-radio",children:[Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("term")),{},{type:"radio",id:"2nd-semester",className:"custom-control-input",value:"2nd Semester"})),Object(Ue.jsx)("label",{className:"custom-control-label",htmlFor:"2nd-semester",children:"2nd Semester"})]}),Object(Ue.jsxs)("div",{className:"custom-control custom-radio",children:[Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("term")),{},{type:"radio",id:"summer",className:"custom-control-input",value:"Summer"})),Object(Ue.jsx)("label",{className:"custom-control-label",htmlFor:"summer",children:"Summer"})]})]})]}),Object(Ue.jsxs)("div",{className:"form-group d-flex",children:[Object(Ue.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){return y.goBack()},disabled:a,children:"Return"}),Object(Ue.jsx)("button",{type:"submit",className:"btn btn-primary ml-auto",disabled:a,children:"Submit"})]})]})]})})})},Et=function(e){var t,c=Object(ie.a)("subjects",(function(){return ct.fetch()})),a=c.data,n=c.isFetching,s=c.isError,r=c.error,l=c.refetch,i=Object(ie.a)("courses",(function(){return Ie.fetch()})).data,d=ue(),u=Object(le.a)(d,2),b=u[0],m=u[1],h=ue(),f=Object(le.a)(h,2),O=f[0],x=f[1],p=oe();s&&Fe(r);var N=function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe.danger("Are you sure you want to delete this Subject?");case 3:if(!e.sent){e.next=8;break}return e.next=6,ct.delete(t);case 6:toastr.info("Subject has been deleted.","Notice"),l();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),Fe(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),g=v.getInstance().get("user"),y=[{title:"Subject Code",accessor:"code"},{title:"Subject Description",accessor:"description",minWidth:"450px"},{title:"Course",accessor:"course",minWidth:"350px"},{title:"Year Level",accessor:"level"},{title:"Semester",accessor:"term"},{title:"Units",accessor:"units"}];["Registrar","Teacher"].includes((null===g||void 0===g?void 0:g.role)||"")&&y.push({title:"Actions",accessor:"actions"});var k=function(e){return e.filter((function(e){return b&&O?e.course_id===b.id&&e.major_id===O.id:b?e.course_id===b.id:!O||e.major_id===O.id})).map((function(e){var t;return Object(j.a)(Object(j.a)({},e),{},{course:"".concat(null===(t=e.course)||void 0===t?void 0:t.code).concat(e.major?" - Major in ".concat(e.major.name):""),actions:Object(Ue.jsxs)("div",{style:{minWidth:"350px"},children:["Teacher"===(null===g||void 0===g?void 0:g.role)?Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsx)(I.b,{to:p("".concat(e.id,"/view")),className:"btn btn-info btn-sm mx-1",title:"View",children:Object(Ue.jsx)("i",{className:"fas fa-eye"})}),Object(Ue.jsx)("a",{href:"".concat(o.a.defaults.baseURL,"/exports/teacher/classlist/").concat(e.id),download:!0,className:"btn btn-warning btn-sm mx-1 ".concat(e.students_count&&e.students_count>0?"":"disabled"),title:"Download Classlist",children:Object(Ue.jsx)("i",{className:"fas fa-file-excel"})})]}):null,"Registrar"===(null===g||void 0===g?void 0:g.role)?Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsx)(I.b,{to:p("".concat(e.id,"/edit")),className:"btn btn-warning btn-sm mx-1",children:Object(Ue.jsx)("i",{className:"fas fa-edit"})}),Object(Ue.jsx)("button",{className:"btn btn-danger btn-sm mx-1",onClick:function(t){t.preventDefault(),N(e.id)},children:Object(Ue.jsx)("i",{className:"fas fa-trash"})})]}):null]})})}))},w=Object(F.useCallback)(k,[k]),S=Object(F.useMemo)((function(){return w(a||[])}),[a,w]),_=k(a||[]);return Object(Ue.jsx)(Ve,{onRefresh:function(){return l()},title:"Subjects",loading:n,items:a&&a.length>=250?S:_,columns:y,buttons:Object(Ue.jsx)(Ue.Fragment,{children:"Registrar"===(null===g||void 0===g?void 0:g.role)?Object(Ue.jsx)(I.b,{to:p("add"),className:"btn btn-primary btn-sm ml-2",children:Object(Ue.jsx)("i",{className:"fas fa-plus"})}):null}),misc:Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsxs)("label",{className:"mb-0 mt-2 mx-1",children:["Course:",Object(Ue.jsxs)("select",{className:"custom-select custom-select-sm form-control form-control-sm",onChange:function(e){var t=e.target.value.toNumber();if(0===t)m(null),x(null);else{var c=null===i||void 0===i?void 0:i.find((function(e){return e.id===t}));c&&m(c)}},children:[Object(Ue.jsx)("option",{value:"0",children:"All"}),null===i||void 0===i?void 0:i.map((function(e,t){return Object(Ue.jsx)("option",{value:e.id,children:e.code},t)}))]})]}),b?Object(Ue.jsxs)("label",{className:"mb-0 mt-2 mx-1",children:["Major:",Object(Ue.jsxs)("select",{className:"custom-select custom-select-sm form-control form-control-sm",onChange:function(e){var t=e.target.value.toNumber();if(0===t)x(null);else{var c,a=null===b||void 0===b||null===(c=b.majors)||void 0===c?void 0:c.find((function(e){return e.id===t}));a&&x(a)}},children:[Object(Ue.jsx)("option",{value:"0",children:"All"}),null===(t=b.majors)||void 0===t?void 0:t.map((function(e,t){return Object(Ue.jsx)("option",{value:e.id,children:e.name},t)}))]})]}):null]})})},Mt=function(e){var t,c,a,n,s,r=Object(F.useState)(!1),l=Object(le.a)(r,2),i=l[0],o=l[1],d=Object(P.g)().id.toNumber(),u=Object(P.f)(),b=ue(),m=Object(le.a)(b,2),h=m[0],f=m[1],O=Object(ie.a)(["subjects",d],(function(){return ct.fetchOne(d)})),x=O.data,p=O.isLoading,g=O.isError,y=O.error,k=O.refetch,w=Object(F.useState)(!1),S=Object(le.a)(w,2),_=S[0],C=S[1],D=Object(F.useState)(0),A=Object(le.a)(D,2),Y=A[0],E=A[1],I=Object(me.a)(),B=I.register,T=I.handleSubmit,L=I.reset,U=I.setValue,W=be().data,$=v.getInstance().get("user"),G=function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,t.student_id=h,t.teacher_id=null===$||void 0===$?void 0:$.id,t.subject_id=(null===x||void 0===x?void 0:x.id)||d,t.grade=Y,t.status=Y>=75?"Passed":"Failed",e.next=9,St.create(t);case 9:return e.next=11,k();case 11:toastr.success("Grade saved succesfully."),E(0),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),Fe(e.t0);case 18:return e.prev=18,f(null),L(),o(!1),e.finish(18);case 23:case"end":return e.stop()}}),e,null,[[1,15,18,23]])})));return function(t){return e.apply(this,arguments)}}();g&&404===(null===y||void 0===y||null===(t=y.response)||void 0===t?void 0:t.status)&&(toastr.error("Subject does not exist."),u.goBack());var V=function(e){var t,c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null===(t=e.grades)||void 0===t?void 0:t.find((function(e){var t;return e.teacher_id===(null===$||void 0===$?void 0:$.id)&&(null===(t=e.year)||void 0===t?void 0:t.current)===c&&e.subject_id===(null===x||void 0===x?void 0:x.id)}))};return Object(F.useEffect)((function(){k()}),[]),x?Object(Ue.jsx)("div",{className:"container-fluid",children:Object(Ue.jsxs)("div",{className:"card",children:[Object(Ue.jsxs)("div",{className:"card-header",children:[Object(Ue.jsxs)("div",{className:"d-flex",children:[Object(Ue.jsx)("h2",{className:"card-title",children:"View Subject"}),Object(Ue.jsx)("button",{className:"btn btn-secondary btn-sm",style:{position:"absolute",right:"10px"},onClick:function(e){e.preventDefault(),u.goBack()},children:"Go Back"})]}),Object(Ue.jsxs)("p",{className:"card-text mb-0",children:["Code: ",x.code]}),Object(Ue.jsxs)("p",{className:"card-text mb-0",children:["Description: ",x.description]}),Object(Ue.jsxs)("p",{className:"card-text mb-0",children:["Course: ","".concat(null===(c=x.course)||void 0===c?void 0:c.code).concat(x.major?" - Major in ".concat(x.major.name):"")]}),Object(Ue.jsxs)("p",{className:"card-text",children:["Grade Encoding Deadline: ",N()(null===W||void 0===W?void 0:W.grade_start).format("MMMM DD, YYYY hh:mm A")," -"," ",N()(null===W||void 0===W?void 0:W.grade_end).format("MMMM DD, YYYY hh:mm A")]})]}),Object(Ue.jsxs)("div",{className:"card-body",children:[Object(Ue.jsx)("h4",{className:"mb-0 mt-3",children:"Schedule"}),Object(Ue.jsxs)("table",{className:"table table-bordered table-sm mb-5",children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("th",{className:"text-center",children:"Day"}),Object(Ue.jsx)("th",{className:"text-center",children:"Start Time"}),Object(Ue.jsx)("th",{className:"text-center",children:"End Time"})]})}),Object(Ue.jsx)("tbody",{children:null===(a=x.schedules)||void 0===a||null===(n=a.find((function(e){return e.teacher_id===(null===$||void 0===$?void 0:$.id)})))||void 0===n?void 0:n.payload.map((function(e,t){return Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("td",{className:"text-center",children:e.day}),Object(Ue.jsx)("td",{className:"text-center",children:N()(e.start_time).format("hh:mm A")}),Object(Ue.jsx)("td",{className:"text-center",children:N()(e.end_time).format("hh:mm A")})]},t)}))})]}),Object(Ue.jsx)(Ve,{onRefresh:function(){return k()},title:"Student List",loading:p,items:(null===(s=x.students)||void 0===s?void 0:s.map((function(e){var t,c,a,n,s,r,l,o,d,b,m,O,x;return Object(j.a)(Object(j.a)({},e),{},{name:Object(Ue.jsxs)(Ue.Fragment,{children:[e.last_name,", ",e.first_name," ",e.middle_name||""]}),year:xe(e)?null===(a=e.admissions)||void 0===a||null===(n=a.last())||void 0===n?void 0:n.level:null===(t=e.admissions)||void 0===t||null===(c=t.find((function(e){var t;return null===(t=e.year)||void 0===t?void 0:t.current})))||void 0===c?void 0:c.level,semester:xe(e)?null===(l=e.admissions)||void 0===l||null===(o=l.last())||void 0===o?void 0:o.term:null===(s=e.admissions)||void 0===s||null===(r=s.find((function(e){var t;return null===(t=e.year)||void 0===t?void 0:t.current})))||void 0===r?void 0:r.term,section:null===(d=ve(e))||void 0===d?void 0:d.name,actions:Object(Ue.jsx)(Ue.Fragment,{children:V(e,!xe(e))&&!_?Object(Ue.jsxs)("span",{onClick:Object(R.a)(M.a.mark((function t(){var c,a,n,s;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!W||xe(e)){t.next=12;break}if(c=N()(),a=N()(W.grade_start),n=N()(W.grade_end),!c.isBefore(a)){t.next=8;break}return t.next=7,Oe.okay("Encoding of grades will start at ".concat(a.format("MMMM DD, YYYY hh:mm A"),". Please wait until the given date."),"Notice");case 7:return t.abrupt("return",u.goBack());case 8:if(!c.isAfter(n)){t.next=12;break}return t.next=11,Oe.okay("Encoding of grades has already ended.","Notice");case 11:return t.abrupt("return",u.goBack());case 12:(s=V(e,!xe(e)))&&(s.grade>=75?U("status","Passed"):U("status","Failed"),E(s.grade)),C(!0),f(e.id);case 16:case"end":return t.stop()}}),t)}))),className:"clickable",children:[null===(b=V(e,!xe(e)))||void 0===b?void 0:b.grade,"%"]}):Object(Ue.jsx)(Ue.Fragment,{children:_&&e.id===h?Object(Ue.jsxs)("form",{className:"form-inline row",style:{minWidth:"100px"},onSubmit:T(G),children:[Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({type:"hidden"},B("year_id")),{},{value:xe(e)?null===(m=e.admissions)||void 0===m||null===(O=m.last())||void 0===O?void 0:O.year_id:null===W||void 0===W?void 0:W.id})),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},B("status")),{},{type:"hidden"})),Object(Ue.jsx)("div",{className:"col-4",children:Object(Ue.jsx)("input",{type:"number",id:"grade",min:0,max:100,className:"form-control form-control-sm",onChange:function(e){var t=e.target.value.toNumber();t>=0&&t<=100&&(U("status",t>=75?"Passed":"Failed"),E(t))},value:Y,disabled:i})}),Object(Ue.jsx)("div",{className:"col-4",children:Object(Ue.jsx)("button",{type:"submit",className:"btn btn-primary btn-sm",disabled:i,children:"Submit"})}),Object(Ue.jsx)("div",{className:"col-4",children:Object(Ue.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:function(e){e.preventDefault(),C(!1),f(null)},disabled:i,children:"Cancel"})})]}):Object(Ue.jsx)(Ue.Fragment,{children:V(e,!xe(e))?Object(Ue.jsxs)("span",{onClick:Object(R.a)(M.a.mark((function t(){var c,a,n,s;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!W||xe(e)){t.next=12;break}if(c=N()(),a=N()(W.grade_start),n=N()(W.grade_end),!c.isBefore(a)){t.next=8;break}return t.next=7,Oe.okay("Encoding of grades will start at ".concat(a.format("MMMM DD, YYYY hh:mm A"),". Please wait until the given date."),"Notice");case 7:return t.abrupt("return",u.goBack());case 8:if(!c.isAfter(n)){t.next=12;break}return t.next=11,Oe.okay("Encoding of grades has already ended.","Notice");case 11:return t.abrupt("return",u.goBack());case 12:(s=V(e,!xe(e)))&&(s.grade>=75?U("status","Passed"):U("status","Failed"),E(s.grade)),C(!0),f(e.id);case 16:case"end":return t.stop()}}),t)}))),className:"clickable",children:[null===(x=V(e,!xe(e)))||void 0===x?void 0:x.grade,"%"]}):Object(Ue.jsx)("span",{onClick:Object(R.a)(M.a.mark((function t(){var c,a,n;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!W||!xe(e)){t.next=12;break}if(c=N()(),a=N()(W.grade_start),n=N()(W.grade_end),!c.isBefore(a)){t.next=8;break}return t.next=7,Oe.okay("Encoding of grades will start at ".concat(a.format("MMMM DD, YYYY hh:mm A"),". Please wait until the given date."),"Notice");case 7:return t.abrupt("return",u.goBack());case 8:if(!c.isAfter(n)){t.next=12;break}return t.next=11,Oe.okay("Encoding of grades has already ended.","Notice");case 11:return t.abrupt("return",u.goBack());case 12:C(!_),f(e.id);case 14:case"end":return t.stop()}}),t)}))),className:"clickable d-block",children:"-"})})})})})})))||[],columns:[{title:"ID Number",accessor:"uuid",minWidth:"200px"},{title:"Name",accessor:"name",minWidth:"150px"},{title:"Year",accessor:"year",minWidth:"150px"},{title:"Semester",accessor:"semester",minWidth:"150px"},{title:"Section",accessor:"section",minWidth:"150px"},{title:"Actions",accessor:"actions",minWidth:"300px"}]})]})]})}):null},Rt=function(e){var t=oe(),c=[{path:t("/"),exact:!0,component:Et},{path:t("/add"),component:Yt},{path:t("/:id/edit"),component:Yt},{path:t("/:id/view"),component:Mt}];return Object(Ue.jsx)(P.c,{children:c.map((function(e,t){return Object(F.createElement)(P.a,Object(j.a)(Object(j.a)({},e),{},{key:t}))}))})},It=function(e){var t=Object(F.useState)(!1),c=Object(le.a)(t,2),a=c[0],n=c[1],s=de(),r=Object(le.a)(s,2),l=r[0],i=r[1],o=Object(me.a)({defaultValues:{force:!1}}),d=o.register,u=o.setValue,b=o.handleSubmit,m=o.reset,h=ue(),f=Object(le.a)(h,2),O=f[0],x=f[1],v=Object(F.useState)(-1),p=Object(le.a)(v,2),g=p[0],y=p[1],k=Object(P.f)(),w=Object(P.h)(),S=Object(F.useState)(""),_=Object(le.a)(S,2),C=_[0],D=_[1],A=function(){var e=Object(R.a)(M.a.mark((function e(t){var c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be.fetchOne(t);case 3:c=e.sent,y(c.id),we(u,c),x(N()(c.birthday).toDate()),D(c.number),i("Edit"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),Fe(e.t0),k.goBack();case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(R.a)(M.a.mark((function e(t){var c,a,s;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,t.role="Teacher",t.active=!0,t.birthday=(null===O||void 0===O?void 0:O.toJSON())||"",t.number=C,e.next=8,"Add"===l?Be.create(t):Be.update(g,t);case 8:toastr.success("Teacher has been saved successfully."),m(),x(null),e.next=26;break;case 13:if(e.prev=13,e.t0=e.catch(1),409!==(null===(c=e.t0.response)||void 0===c?void 0:c.status)){e.next=25;break}return e.next=18,Oe.save(null===(a=e.t0.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message);case 18:if(!e.sent){e.next=23;break}return t.force=!0,e.next=22,Y(t);case 22:return e.abrupt("return");case 23:e.next=26;break;case 25:Fe(e.t0);case 26:return e.prev=26,n(!1),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[1,13,26,29]])})));return function(t){return e.apply(this,arguments)}}();return Object(F.useEffect)((function(){w.path.includes("edit")?A(w.params.id):Be.fetch().then((function(e){u("uuid","teacher-".concat("".concat(e.filter((function(e){return"Teacher"===e.role})).length+1).padStart(5,"0"),"-").concat((new Date).getFullYear()))}))}),[]),Object(Ue.jsx)("div",{className:"container-fluid",children:Object(Ue.jsx)("div",{className:"card",children:Object(Ue.jsxs)("div",{className:"card-body",children:[Object(Ue.jsxs)("h5",{className:"card-title",children:[l," Teacher"]}),Object(Ue.jsxs)("form",{onSubmit:b(Y),children:[Object(Ue.jsxs)("div",{className:"form-row",children:[Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"first_name",children:"First Name"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("first_name")),{},{type:"text",id:"first_name",className:"form-control",disabled:a}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"uuid",children:"Teacher Number"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("uuid")),{},{type:"text",id:"uuid",className:"form-control",readOnly:!0}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"last_name",children:"Last Name"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("last_name")),{},{type:"text",id:"last_name",className:"form-control",disabled:a}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"email",children:"Email Address"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("email")),{},{type:"email",id:"email",className:"form-control",disabled:a}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"gender",children:"Gender"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},d("gender")),{},{id:"gender",className:"form-control",children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),Object(Ue.jsx)("option",{value:"Male",children:"Male"}),Object(Ue.jsx)("option",{value:"Female",children:"Female"})]}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"number",children:"Phone Number"}),Object(Ue.jsx)(Le.a,{mask:"0\\999-999-9999",type:"text",id:"number",className:"form-control",disabled:a,value:C,onChange:function(e){return D(e.target.value)}})]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"birthday",children:"Birthday"}),Object(Ue.jsx)(Re.a,{value:O||void 0,id:"birthday",options:{maxDate:N()().year((new Date).getFullYear()-15).toDate()},onChange:function(e){e.length>0&&x(e[0])},className:"form-control",disabled:a})]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"address",children:"Address"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("address")),{},{type:"text",id:"address",className:"form-control",disabled:a}))]})]}),Object(Ue.jsx)("div",{className:"d-flex",children:Object(Ue.jsx)("i",{className:"ml-auto",children:"Account credentials will be sent via email."})}),Object(Ue.jsxs)("div",{className:"d-flex",children:[Object(Ue.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){return k.goBack()},disabled:a,children:"Return"}),Object(Ue.jsx)("button",{type:"submit",className:"btn btn-primary ml-auto",disabled:a,children:"Submit"})]})]})]})})})},Pt=function(e){var t=Object(ie.a)("users",(function(){return Be.fetch()})),c=t.data,a=t.isFetching,n=t.isError,s=t.error,r=t.refetch,l=je(),i=Object(le.a)(l,2),o=i[0],d=i[1],u=ue(),b=Object(le.a)(u,2),m=b[0],h=b[1],f=Object(F.createRef)(),O=Object(P.f)(),x=oe();n&&Fe(s);var p=function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe.danger("Are you sure you want to delete this Teacher?");case 3:if(!e.sent){e.next=8;break}return e.next=6,Be.delete(t);case 6:toastr.info("Teacher has been deleted.","Notice"),r();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),Fe(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be.update(t.id,{active:!t.active});case 3:toastr.success("Teacher ".concat(t.active?"disabled":"enabled"," successfully.")),r(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Fe(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),y=v.getInstance().get("user"),k=[{title:"Teacher #",accessor:"uuid"},{title:"Name",accessor:"name"},{title:"Email",accessor:"email",minWidth:"225px"},{title:"Status",accessor:"status"}];return["Registrar"].includes((null===y||void 0===y?void 0:y.role)||"")&&(k.unshift({title:"#",accessor:"toggle"}),k.push({title:"Actions",accessor:"actions"})),Object(F.useEffect)((function(){f.current&&$(f.current).on("hidden.bs.modal",(function(){return h(null)}))}),[f,h]),Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsx)(Ve,{onRefresh:function(){return r()},title:"Teachers",loading:a,items:(null===c||void 0===c?void 0:c.filter((function(e){return"Teacher"===e.role})).map((function(e){return Object(j.a)(Object(j.a)({},e),{},{toggle:Object(Ue.jsx)(Ue.Fragment,{children:Object(Ue.jsxs)("div",{className:"custom-control custom-checkbox",children:[Object(Ue.jsx)("input",{type:"checkbox",className:"custom-control-input",id:ye(e),onChange:function(e){var t=e.target.value.toNumber();if(o.includes(t)){var c=o.findIndex((function(e){return e===t}));o.splice(c,1)}else o.push(t);d(Object(Y.a)(o))},value:e.id,checked:o.includes(e.id)}),Object(Ue.jsx)("label",{className:"custom-control-label",htmlFor:ye(e)})]})}),name:Object(Ue.jsxs)(Ue.Fragment,{children:[e.last_name,", ",e.first_name," ",e.middle_name||""]}),birthday:N()(e.birthday).format("MMMM DD, YYYY"),age:(new Date).getFullYear()-N()(e.birthday).year(),status:e.active?Object(Ue.jsx)("span",{className:"badge badge-success",children:"Active"}):Object(Ue.jsx)("span",{className:"badge badge-danger",children:"Inactive"}),actions:Object(Ue.jsxs)("div",{style:{minWidth:"350px"},children:[Object(Ue.jsx)(I.b,{to:x("".concat(e.id,"/edit")),className:"btn btn-warning btn-sm mx-1",title:"Edit",children:Object(Ue.jsx)("i",{className:"fas fa-edit"})}),Object(Ue.jsx)("button",{className:"btn btn-primary btn-sm mx-1",title:"View",onClick:function(t){t.preventDefault(),h(e),f.current&&$(f.current).modal("show")},children:Object(Ue.jsx)("i",{className:"fas fa-eye"})}),"Registrar"===(null===y||void 0===y?void 0:y.role)?Object(Ue.jsx)("button",{className:"btn btn-".concat(e.active?"danger":"info"," btn-sm mx-1"),onClick:function(){var t=Object(R.a)(M.a.mark((function t(c){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),t.next=3,Oe.notice("Are you sure you want to ".concat(e.active?"disable":"enable"," this teacher? ").concat(e.active?"If you disable this teacher, this teacher can\u2019t access the system. And you can\u2019t distribute subjects to this teacher.":"If you enable this teacher, this teacher can access the system. And you can distribute subject to this teacher."));case 3:if(!t.sent){t.next=5;break}g(e);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),title:e.active?"Disable":"Enable",children:Object(Ue.jsx)("i",{className:"fas fa-user-".concat(e.active?"times":"check")})}):null,Object(Ue.jsx)("button",{className:"btn btn-danger btn-sm mx-1 d-none",onClick:function(t){t.preventDefault(),p(e.id)},children:Object(Ue.jsx)("i",{className:"fas fa-trash"})})]})})})))||[],columns:k,buttons:Object(Ue.jsxs)(Ue.Fragment,{children:["Registrar"===(null===y||void 0===y?void 0:y.role)?Object(Ue.jsx)(I.b,{to:x("add"),className:"btn btn-primary btn-sm ml-2",children:Object(Ue.jsx)("i",{className:"fas fa-plus"})}):null,["Registrar"].includes((null===y||void 0===y?void 0:y.role)||"")?Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsx)("button",{className:"btn btn-primary btn-sm ml-2",title:"Enable Selected",onClick:function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(o.length>0)){e.next=17;break}return e.next=4,Oe.danger("Are you sure you want to enable ".concat(o.length," ").concat(1===o.length?"teacher":"teachers","? If you enable ").concat(1===o.length?"this":"these"," ").concat(1===o.length?"teacher":"teachers",", ").concat(1===o.length?"this":"these"," ").concat(1===o.length?"teacher":"teachers"," can access the system."));case 4:if(!e.sent){e.next=17;break}return e.prev=5,e.next=8,Promise.all(o.map((function(e){return Be.update(e,{active:!0})})));case 8:toastr.success("".concat(o.length," ").concat(1===o.length?"teacher":"teachers"," enabled successfully.")),d([]),r(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),console.log(e.t0),toastr.error("Unable to enable teachers.");case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}(),children:Object(Ue.jsx)("i",{className:"fas fa-user-check"})}),Object(Ue.jsx)("button",{className:"btn btn-danger btn-sm ml-2",title:"Disable Selected",onClick:function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(o.length>0)){e.next=17;break}return e.next=4,Oe.danger("Are you sure you want to disable ".concat(o.length," ").concat(1===o.length?"teacher":"teachers","? If you disable ").concat(1===o.length?"this":"these"," ").concat(1===o.length?"teacher":"teachers",", ").concat(1===o.length?"this":"these"," ").concat(1===o.length?"teacher":"teachers"," can\u2019t access the system. And you can\u2019t distribute subjects to ").concat(1===o.length?"this":"these"," ").concat(1===o.length?"teacher":"teachers","."));case 4:if(!e.sent){e.next=17;break}return e.prev=5,e.next=8,Promise.all(o.map((function(e){return Be.update(e,{active:!1})})));case 8:toastr.success("".concat(o.length," ").concat(1===o.length?"teacher":"teachers"," disabled successfully.")),d([]),r(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),console.log(e.t0),toastr.error("Unable to disable teachers.");case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}(),children:Object(Ue.jsx)("i",{className:"fas fa-user-times"})})]}):null]})}),Object(Ue.jsx)("div",{ref:f,className:"modal fade",tabIndex:-1,children:Object(Ue.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:Object(Ue.jsxs)("div",{className:"modal-content",children:[Object(Ue.jsxs)("div",{className:"modal-header",children:[Object(Ue.jsx)("h5",{className:"modal-title",children:"View Teacher"}),Object(Ue.jsx)("button",{type:"button",className:"close",onClick:function(e){e.preventDefault(),f.current&&$(f.current).modal("hide")},children:Object(Ue.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(Ue.jsx)("div",{className:"modal-body",children:m&&Object(Ue.jsxs)("div",{className:"container-fluid row",children:[Object(Ue.jsxs)("div",{className:"col-12 col-md-6 col-lg-4 p-2 border",children:[Object(Ue.jsx)("label",{className:"font-weight-bold d-block",children:"Teacher #"}),m.uuid]}),Object(Ue.jsxs)("div",{className:"col-12 col-md-6 col-lg-4 p-2 border",children:[Object(Ue.jsx)("label",{className:"font-weight-bold d-block",children:"Name"}),m.last_name,", ",m.first_name," ",m.last_name||""]}),Object(Ue.jsxs)("div",{className:"col-12 col-md-6 col-lg-4 p-2 border",children:[Object(Ue.jsx)("label",{className:"font-weight-bold d-block",children:"Phone Number"}),m.number]}),Object(Ue.jsxs)("div",{className:"col-12 col-md-6 col-lg-4 p-2 border",children:[Object(Ue.jsx)("label",{className:"font-weight-bold d-block",children:"Email"}),m.email]}),Object(Ue.jsxs)("div",{className:"col-12 col-md-6 col-lg-4 p-2 border",children:[Object(Ue.jsx)("label",{className:"font-weight-bold d-block",children:"Address"}),m.address]}),Object(Ue.jsxs)("div",{className:"col-12 col-md-6 col-lg-4 p-2 border",children:[Object(Ue.jsx)("label",{className:"font-weight-bold d-block",children:"Gender"}),m.gender]}),Object(Ue.jsxs)("div",{className:"col-12 col-md-6 col-lg-4 p-2 border",children:[Object(Ue.jsx)("label",{className:"font-weight-bold d-block",children:"Birthday"}),N()(m.birthday).format("MMMM DD, YYYY")]}),Object(Ue.jsxs)("div",{className:"col-12 col-md-6 col-lg-4 p-2 border",children:[Object(Ue.jsx)("label",{className:"font-weight-bold d-block",children:"Age"}),N()().year()-N()(m.birthday).year()]}),Object(Ue.jsxs)("div",{className:"col-12 col-md-6 col-lg-4 p-2 border",children:[Object(Ue.jsx)("label",{className:"font-weight-bold d-block",children:"Status"}),m.active?Object(Ue.jsx)("span",{className:"badge badge-success",children:"Active"}):Object(Ue.jsx)("span",{className:"badge badge-danger",children:"Inactive"})]})]})}),Object(Ue.jsxs)("div",{className:"modal-footer",children:[m&&Object(Ue.jsx)("button",{className:"btn btn-warning btn-sm mx-1",title:"Edit",onClick:function(e){e.preventDefault(),f.current&&($(f.current).modal("hide"),O.push(x("".concat(m.id,"/edit"))))},children:"Edit"}),Object(Ue.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:function(e){e.preventDefault(),f.current&&$(f.current).modal("hide")},children:"Close"})]})]})})})]})},Bt=function(e){var t=oe(),c=[{path:t("/"),exact:!0,component:Pt},{path:t("/add"),component:It},{path:t("/:id/edit"),component:It}];return Object(Ue.jsx)(P.c,{children:c.map((function(e,t){return Object(F.createElement)(P.a,Object(j.a)(Object(j.a)({},e),{},{key:t}))}))})},Tt=new(function(e){Object(De.a)(c,e);var t=Object(Ae.a)(c);function c(){return Object(b.a)(this,c),t.apply(this,arguments)}return c}(Ye))("/units"),Lt=function(e){var t=Object(F.useState)(!1),c=Object(le.a)(t,2),a=c[0],n=c[1],s=de(),r=Object(le.a)(s,2),l=r[0],i=r[1],o=Object(me.a)({defaultValues:{force:!1}}),d=o.register,u=o.setValue,b=o.handleSubmit,m=o.reset,h=ue(),f=Object(le.a)(h,2),O=f[0],x=f[1],v=ue(),p=Object(le.a)(v,2),N=p[0],g=p[1],y=Object(F.useState)(-1),k=Object(le.a)(y,2),w=k[0],S=k[1],_=Object(P.f)(),C=Object(P.h)(),D=Object(ie.a)("courses",(function(){return Ie.fetch()})),A=D.data,Y=D.refetch,E=function(){var e=Object(R.a)(M.a.mark((function e(t){var c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Tt.fetchOne(t);case 3:c=e.sent,S(c.id),i("Edit"),we(u,c),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),Fe(e.t0),_.goBack();case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(R.a)(M.a.mark((function e(t){var c,a,s;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(!0),e.prev=1,!((null===O||void 0===O?void 0:O.majors)&&O.majors.length>0)||N){e.next=4;break}return e.abrupt("return",toastr.error("Please select a major."));case 4:return t.major_id=null===N||void 0===N?void 0:N.id,e.next=7,"Add"===l?Tt.create(t):Tt.update(w,t);case 7:return toastr.success("Unit has been saved successfully."),e.next=10,Y();case 10:m(),e.next=26;break;case 13:if(e.prev=13,e.t0=e.catch(1),409!==(null===(c=e.t0.response)||void 0===c?void 0:c.status)){e.next=25;break}return e.next=18,Oe.save(null===(a=e.t0.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message);case 18:if(!e.sent){e.next=23;break}return t.force=!0,e.next=22,I(t);case 22:return e.abrupt("return");case 23:e.next=26;break;case 25:Fe(e.t0);case 26:return e.prev=26,n(!1),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[1,13,26,29]])})));return function(t){return e.apply(this,arguments)}}();return Object(F.useEffect)((function(){C.path.includes("edit")&&E(C.params.id)}),[]),Object(Ue.jsx)("div",{className:"container-fluid",children:Object(Ue.jsx)("div",{className:"card",children:Object(Ue.jsxs)("div",{className:"card-body",children:[Object(Ue.jsxs)("h5",{className:"card-title",children:[l," Student Unit"]}),Object(Ue.jsxs)("form",{onSubmit:b(I),children:[Object(Ue.jsxs)("div",{className:"form-row",children:[Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"course_id",children:"Course"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},d("course_id")),{},{id:"course_id",className:"form-control",onChange:function(e){var t=e.target.value.toNumber(),c=null===A||void 0===A?void 0:A.find((function(e){return e.id===t}));c?x(c):(x(null),g(null))},children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),null===A||void 0===A?void 0:A.filter((function(e){return e.open})).map((function(e,t){return Object(Ue.jsx)("option",{value:e.id,children:e.code},t)}))]}))]}),O&&O.majors&&O.majors.length>0?Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"major_id",children:"Major"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},d("major_id")),{},{id:"major_id",className:"form-control",onChange:function(e){var t,c=e.target.value.toNumber(),a=null===O||void 0===O||null===(t=O.majors)||void 0===t?void 0:t.find((function(e){return e.id===c}));g(a||null)},children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),O.majors.map((function(e,t){return Object(Ue.jsx)("option",{value:e.id,children:e.name},t)}))]}))]}):null,Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"level",children:"Year Level"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},d("level")),{},{id:"level",className:"form-control",children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),Object(Ue.jsx)("option",{value:"1st",children:"1st"}),Object(Ue.jsx)("option",{value:"2nd",children:"2nd"}),Object(Ue.jsx)("option",{value:"3rd",children:"3rd"}),Object(Ue.jsx)("option",{value:"4th",children:"4th"}),Object(Ue.jsx)("option",{value:"5th",children:"5th"})]}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"units",children:"Units"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("units")),{},{type:"number",id:"units",className:"form-control"}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"term",children:"Term"}),Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)("div",{className:"col-12 col-md-4",children:Object(Ue.jsxs)("div",{className:"custom-control custom-radio",children:[Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("term")),{},{type:"radio",id:"1st-semester",className:"custom-control-input",value:"1st Semester"})),Object(Ue.jsx)("label",{className:"custom-control-label",htmlFor:"1st-semester",children:"1st Semester"})]})}),Object(Ue.jsx)("div",{className:"col-12 col-md-4",children:Object(Ue.jsxs)("div",{className:"custom-control custom-radio",children:[Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("term")),{},{type:"radio",id:"2nd-semester",className:"custom-control-input",value:"2nd Semester"})),Object(Ue.jsx)("label",{className:"custom-control-label",htmlFor:"2nd-semester",children:"2nd Semester"})]})}),Object(Ue.jsx)("div",{className:"col-12 col-md-4",children:Object(Ue.jsxs)("div",{className:"custom-control custom-radio",children:[Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("term")),{},{type:"radio",id:"summer",className:"custom-control-input",value:"Summer"})),Object(Ue.jsx)("label",{className:"custom-control-label",htmlFor:"summer",children:"Summer"})]})})]})]})]}),Object(Ue.jsxs)("div",{className:"form-group d-flex",children:[Object(Ue.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){return _.goBack()},disabled:a,children:"Return"}),Object(Ue.jsx)("button",{type:"submit",className:"btn btn-primary ml-auto",disabled:a,children:"Submit"})]})]})]})})})},Ut=function(e){var t=Object(ie.a)("units",(function(){return Tt.fetch()})),c=t.data,a=t.isFetching,n=t.isError,s=t.error,r=t.refetch,l=oe();n&&Fe(s);var i=function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe.danger("Are you sure you want to delete this Unit?");case 3:if(!e.sent){e.next=8;break}return e.next=6,Tt.delete(t);case 6:toastr.info("Unit has been deleted.","Notice"),r();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),Fe(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),o=v.getInstance().get("user"),d=[{title:"ID",accessor:"id"},{title:"Course",accessor:"course",minWidth:"375px"},{title:"Units",accessor:"units"},{title:"Semester",accessor:"term",minWidth:"150px"},{title:"level",accessor:"level"}];return"Registrar"===(null===o||void 0===o?void 0:o.role)&&d.push({title:"Actions",accessor:"actions",minWidth:"250px"}),Object(Ue.jsx)(Ve,{onRefresh:function(){return r()},title:"Student Units",loading:a,items:(null===c||void 0===c?void 0:c.map((function(e){var t;return Object(j.a)(Object(j.a)({},e),{},{course:"".concat(null===(t=e.course)||void 0===t?void 0:t.code).concat(e.major?" - Major in ".concat(e.major.name):""),actions:Object(Ue.jsx)(Ue.Fragment,{children:"Registrar"===(null===o||void 0===o?void 0:o.role)?Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsx)(I.b,{to:l("".concat(e.id,"/edit")),className:"btn btn-warning btn-sm mx-1",children:Object(Ue.jsx)("i",{className:"fas fa-edit"})}),Object(Ue.jsx)("button",{className:"btn btn-danger btn-sm mx-1",onClick:function(t){t.preventDefault(),i(e.id)},children:Object(Ue.jsx)("i",{className:"fas fa-trash"})})]}):null})})})))||[],columns:d,buttons:Object(Ue.jsx)(Ue.Fragment,{children:"Registrar"===(null===o||void 0===o?void 0:o.role)?Object(Ue.jsx)(I.b,{to:l("add"),className:"btn btn-primary btn-sm ml-2",children:Object(Ue.jsx)("i",{className:"fas fa-plus"})}):null})})},Wt=function(e){var t=oe(),c=[{path:t("/"),exact:!0,component:Ut},{path:t("/add"),component:Lt},{path:t("/:id/edit"),component:Lt}];return Object(Ue.jsx)(P.c,{children:c.map((function(e,t){return Object(F.createElement)(P.a,Object(j.a)(Object(j.a)({},e),{},{key:t}))}))})},$t=function(e){var t=Object(ie.a)("users",(function(){return Be.fetch()})),c=t.data,a=t.isFetching,n=t.isError,s=t.error,r=t.refetch,l=v.getInstance().get("user"),i=ue(),d=Object(le.a)(i,2),u=d[0],b=d[1],m=Object(F.createRef)(),h=Object(me.a)(),f=h.register,O=h.handleSubmit,x=h.reset,p=function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return",toastr.error("No user selected."));case 2:if(t.new_password===t.repeat_password){e.next=4;break}return e.abrupt("return",toastr.error("New password does not match repeat password."));case 4:return e.prev=4,t.user_id=u,e.next=8,o.a.post("/users/change",t);case 8:toastr.success("User password changed successfully."),m.current&&$(m.current).modal("hide"),b(null),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),Fe(e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}();n&&Fe(s);var N=[{title:"#",accessor:"id"},{title:"User Number",accessor:"uuid"},{title:"User Type",accessor:"role"},{title:"Full Name",accessor:"full_name"},{title:"Email",accessor:"email"},{title:"Phone Number",accessor:"number"}];return"Admin"===(null===l||void 0===l?void 0:l.role)&&N.push({title:"Actions",accessor:"actions"}),Object(F.useEffect)((function(){m.current&&$(m.current).on("hidden.bs.modal",(function(){return x()}))}),[]),Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsx)(Ve,{onRefresh:function(){return r()},title:"Users",loading:a,items:(null===c||void 0===c?void 0:c.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{full_name:Object(Ue.jsxs)(Ue.Fragment,{children:[e.last_name,", ",e.first_name," ",e.middle_name||""]}),actions:Object(Ue.jsx)(Ue.Fragment,{children:Object(Ue.jsx)("button",{className:"btn btn-warning btn-sm mx-1",onClick:function(t){t.preventDefault(),b(e.id),m.current&&$(m.current).modal("toggle")},title:"Change Password",children:Object(Ue.jsx)("i",{className:"fas fa-key"})})})})})))||[],columns:N,buttons:Object(Ue.jsx)(Ue.Fragment,{})}),Object(Ue.jsx)("div",{ref:m,className:"modal fade",tabIndex:-1,children:Object(Ue.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:Object(Ue.jsxs)("div",{className:"modal-content",children:[Object(Ue.jsxs)("div",{className:"modal-header",children:[Object(Ue.jsx)("h5",{className:"modal-title",children:"Change Password"}),Object(Ue.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:Object(Ue.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(Ue.jsxs)("form",{onSubmit:O(p),children:[Object(Ue.jsx)("div",{className:"modal-body",children:Object(Ue.jsxs)("div",{className:"container-fluid",children:[Object(Ue.jsxs)("div",{className:"form-group",children:[Object(Ue.jsx)("label",{htmlFor:"password",children:"Your Password"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},f("password")),{},{type:"password",id:"password",className:"form-control"}))]}),Object(Ue.jsxs)("div",{className:"form-group mt-3",children:[Object(Ue.jsx)("label",{htmlFor:"new_password",children:"User's New Password"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},f("new_password")),{},{type:"password",id:"new_password",className:"form-control"}))]}),Object(Ue.jsxs)("div",{className:"form-group",children:[Object(Ue.jsx)("label",{htmlFor:"repeat_password",children:"Repeat New Password"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},f("repeat_password")),{},{type:"password",id:"repeat_password",className:"form-control"}))]})]})}),Object(Ue.jsxs)("div",{className:"modal-footer",children:[Object(Ue.jsx)("button",{type:"submit",className:"btn btn-primary btn-sm",children:"Submit"}),Object(Ue.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm","data-dismiss":"modal",children:"Close"})]})]})]})})})]})},Gt=function(e){var t=[{path:oe()("/"),exact:!0,component:$t}];return Object(Ue.jsx)(P.c,{children:t.map((function(e,t){return Object(F.createElement)(P.a,Object(j.a)(Object(j.a)({},e),{},{key:t}))}))})},Vt=function(e){var t=Object(F.useState)(!1),c=Object(le.a)(t,2),a=c[0],n=c[1],s=de(),r=Object(le.a)(s,2),l=r[0],i=r[1],o=Object(me.a)({defaultValues:{start:(new Date).getFullYear(),end:(new Date).getFullYear()+1,current:!0}}),d=o.register,u=o.setValue,b=o.handleSubmit,m=o.reset,h=Object(F.useState)(-1),f=Object(le.a)(h,2),O=f[0],x=f[1],v=Object(P.f)(),p=Object(P.h)(),g=ue(),y=Object(le.a)(g,2),k=y[0],w=y[1],S=ue(),_=Object(le.a)(S,2),C=_[0],D=_[1],A=ue(),Y=Object(le.a)(A,2),E=Y[0],I=Y[1],B=ue(),T=Object(le.a)(B,2),L=T[0],U=T[1],W=ue(),$=Object(le.a)(W,2),G=$[0],V=$[1],J=ue(),q=Object(le.a)(J,2),K=q[0],H=q[1],z=function(){var e=Object(R.a)(M.a.mark((function e(t){var c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pe.fetchOne(t);case 3:c=e.sent,x(c.id),we(u,c),w(N()(c.semester_start).toDate()),D(N()(c.semester_end).toDate()),I(N()(c.registration_start).toDate()),U(N()(c.registration_end).toDate()),V(N()(c.grade_start).toDate()),H(N()(c.grade_end).toDate()),i("Edit"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),Fe(e.t0),v.goBack();case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,t.semester_start=(null===k||void 0===k?void 0:k.toJSON())||"",t.semester_end=(null===C||void 0===C?void 0:C.toJSON())||"",t.registration_start=(null===E||void 0===E?void 0:E.toJSON())||"",t.registration_end=(null===L||void 0===L?void 0:L.toJSON())||"",t.grade_start=(null===G||void 0===G?void 0:G.toJSON())||"",t.grade_end=(null===K||void 0===K?void 0:K.toJSON())||"",e.next=10,"Add"===l?Pe.create(t):Pe.update(O,t);case 10:toastr.success("School Year has been saved successfully."),m(),V(null),H(null),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),Fe(e.t0);case 19:return e.prev=19,n(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,16,19,22]])})));return function(t){return e.apply(this,arguments)}}();return Object(F.useEffect)((function(){p.path.includes("edit")&&z(p.params.id)}),[]),Object(Ue.jsx)("div",{className:"container-fluid",children:Object(Ue.jsx)("div",{className:"card",children:Object(Ue.jsxs)("div",{className:"card-body",children:[Object(Ue.jsxs)("h5",{className:"card-title",children:[l," School Year"]}),Object(Ue.jsxs)("form",{onSubmit:b(Z),children:[Object(Ue.jsxs)("div",{className:"form-row",children:[Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"start",children:"Start"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("start")),{},{type:"number",id:"start",min:(new Date).getFullYear(),max:(new Date).getFullYear()+10,className:"form-control",disabled:a}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"end",children:"End"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("end")),{},{type:"number",id:"end",min:(new Date).getFullYear(),max:(new Date).getFullYear()+10,className:"form-control",disabled:a}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12",children:[Object(Ue.jsx)("label",{htmlFor:"semester",children:"Semester"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},d("semester")),{},{id:"semester",className:"form-control",children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),Object(Ue.jsx)("option",{value:"1st Semester",children:"1st Semester"}),Object(Ue.jsx)("option",{value:"2nd Semester",children:"2nd Semester"}),Object(Ue.jsx)("option",{value:"Summer",children:"Summer"})]}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"semester_start",children:"Semester Start"}),Object(Ue.jsx)(Re.a,{value:k||void 0,id:"semester_start",onChange:function(e){e.length>0&&w(e[0])},className:"form-control",disabled:a})]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"semester_end",children:"Semester End"}),Object(Ue.jsx)(Re.a,{value:C||void 0,id:"semester_end",onChange:function(e){e.length>0&&D(e[0])},className:"form-control",disabled:a})]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"registration_start",children:"Registration Start"}),Object(Ue.jsx)(Re.a,{value:E||void 0,id:"registration_start",onChange:function(e){e.length>0&&I(e[0])},className:"form-control",disabled:a})]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"registration_end",children:"Registration End"}),Object(Ue.jsx)(Re.a,{value:L||void 0,id:"registration_end",onChange:function(e){e.length>0&&U(e[0])},className:"form-control",disabled:a})]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"grade_start",children:"Grade Encoding Start"}),Object(Ue.jsx)(Re.a,{value:G||void 0,id:"grade_start",onChange:function(e){e.length>0&&V(e[0])},className:"form-control",disabled:a,options:{altInput:!0,altFormat:"F j, Y G:i K",enableTime:!0,dateFormat:"F j, Y G:i K"}})]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"grade_end",children:"Grade Encoding End"}),Object(Ue.jsx)(Re.a,{value:K||void 0,id:"grade_end",onChange:function(e){e.length>0&&H(e[0])},className:"form-control",disabled:a,options:{altInput:!0,altFormat:"F j, Y G:i K",enableTime:!0,dateFormat:"F j, Y G:i K"}})]}),Object(Ue.jsx)("div",{className:"form-group col-12",children:Object(Ue.jsxs)("div",{className:"custom-control custom-checkbox",children:[Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},d("current")),{},{type:"checkbox",className:"custom-control-input",id:"current",disabled:a})),Object(Ue.jsx)("label",{className:"custom-control-label",htmlFor:"current",children:"Set as Current"})]})})]}),Object(Ue.jsxs)("div",{className:"form-group d-flex",children:[Object(Ue.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){return v.goBack()},disabled:a,children:"Return"}),Object(Ue.jsx)("button",{type:"submit",className:"btn btn-primary ml-auto",disabled:a,children:"Submit"})]})]})]})})})},Jt=function(e){var t=Object(ie.a)("years",(function(){return Pe.fetch()})),c=t.data,a=t.isFetching,n=t.isError,s=t.error,r=t.refetch,l=oe();n&&Fe(s);var i=function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe.notice("Are you sure you want to set the current school year?");case 3:if(!e.sent){e.next=8;break}return e.next=6,Pe.update(t.id,{current:!0});case 6:toastr.info("Year ".concat(t.start," - ").concat(t.end," has been set as current school year."),"Notice"),r();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),Fe(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(R.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe.danger("Are you sure you want to delete this School Year?");case 3:if(!e.sent){e.next=8;break}return e.next=6,Pe.delete(t);case 6:toastr.info("School Year has been deleted.","Notice"),r();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),Fe(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),d=v.getInstance().get("user"),u=[{title:"ID",accessor:"id"},{title:"Year",accessor:"year",minWidth:"200px"},{title:"Semester",accessor:"semester",minWidth:"150px"},{title:"Start",accessor:"semester_start",minWidth:"200px"},{title:"End",accessor:"semester_end",minWidth:"200px"},{title:"Registration Date",accessor:"registration",minWidth:"250px"},{title:"Grade Encoding Date",accessor:"grade",minWidth:"400px"}];return"Registrar"===(null===d||void 0===d?void 0:d.role)&&u.push({title:"Actions",accessor:"actions",minWidth:"200px"}),Object(Ue.jsx)(Ve,{onRefresh:function(){return r()},title:"School Years",loading:a,items:(null===c||void 0===c?void 0:c.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{year:Object(Ue.jsxs)(Ue.Fragment,{children:["".concat(e.start," - ").concat(e.end)," ",e.current?Object(Ue.jsx)("span",{className:"badge badge-success mb-1 ml-1",children:"Current"}):""]}),semester_start:N()(e.semester_start).format("MMMM DD, YYYY"),semester_end:N()(e.semester_end).format("MMMM DD, YYYY"),registration:"".concat(N()(e.registration_start).format("MMMM DD, YYYY")," to ").concat(N()(e.registration_end).format("MMMM DD, YYYY")),grade:"".concat(N()(e.grade_start).format("MMMM DD, YYYY hh:mm A")," to ").concat(N()(e.grade_end).format("MMMM DD, YYYY hh:mm A")),actions:"Registrar"===(null===d||void 0===d?void 0:d.role)?Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsx)(I.b,{to:l("".concat(e.id,"/edit")),className:"btn btn-warning btn-sm mx-1",title:"Edit",children:Object(Ue.jsx)("i",{className:"fas fa-edit"})}),e.current?null:Object(Ue.jsx)("button",{className:"btn btn-success btn-sm mx-1",onClick:function(t){t.preventDefault(),i(e)},title:"Set as Current",children:Object(Ue.jsx)("i",{className:"fas fa-check"})}),Object(Ue.jsx)("button",{className:"btn btn-danger btn-sm mx-1",onClick:function(t){t.preventDefault(),o(e.id)},title:"Delete",children:Object(Ue.jsx)("i",{className:"fas fa-trash"})})]}):null})})))||[],columns:u,buttons:Object(Ue.jsx)(Ue.Fragment,{children:"Registrar"===(null===d||void 0===d?void 0:d.role)&&c&&0===c.length?Object(Ue.jsx)(I.b,{to:l("add"),className:"btn btn-primary btn-sm ml-2",children:Object(Ue.jsx)("i",{className:"fas fa-plus"})}):null})})},qt=function(e){var t=oe(),c=[{path:t("/"),exact:!0,component:Jt},{path:t("/add"),component:Vt},{path:t("/:id/edit"),component:Vt}];return Object(Ue.jsx)(P.c,{children:c.map((function(e,t){return Object(F.createElement)(P.a,Object(j.a)(Object(j.a)({},e),{},{key:t}))}))})},Kt=function(e){var t=Object(P.f)(),c=v.getInstance(),a=oe(),n=[{path:a(""),exact:!0,component:Xe},{path:a(J),component:Ze},{path:a(q),component:At},{path:a(K),component:Bt},{path:a(H),component:ht},{path:a(Q),component:Gt},{path:a(X),component:jt},{path:a(W),component:Ke},{path:a(Z),component:Rt},{path:a(z),component:wt},{path:a(B),component:qe},{path:a(ee),component:qt},{path:a(te),component:nt},{path:a(ce),component:at},{path:a(ae),component:st},{path:a(ne),component:vt},{path:a(se),component:it},{path:a(re),component:Wt}];return c.has("user")?Object(Ue.jsx)("div",{className:"vertical dark",children:Object(Ue.jsxs)("div",{className:"wrapper",children:[Object(Ue.jsx)(et,{}),Object(Ue.jsx)(tt,{}),Object(Ue.jsx)("main",{role:"main",className:"main-content",children:Object(Ue.jsx)(P.c,{children:n.map((function(e,t){return Object(F.createElement)(P.a,Object(j.a)(Object(j.a)({},e),{},{key:t}))}))})})]})}):(t.push(L),null)},Ht=c.p+"static/media/landing.5ad43824.jpg",zt=(c(110),function(e){var t=v.getInstance(),c=Object(F.createRef)(),a=Object(P.f)();return Object(Ue.jsxs)("section",{id:"intro",className:"parallax-section",style:{background:"url(".concat(Ht,") 50% 0 repeat-y fixed")},children:[Object(Ue.jsx)("div",{className:"container",children:Object(Ue.jsx)("div",{className:"row",children:Object(Ue.jsxs)("div",{className:"col-md-12 col-sm-12",children:[Object(Ue.jsx)("h3",{className:"wow bounceIn animated text-shadow-dark","data-wow-delay":"0.9s",style:{visibility:"visible",animationDelay:"0.9s",animationName:"bounceIn"},children:"Welcome to"}),Object(Ue.jsx)("h1",{className:"wow fadeInUp animated text-shadow-dark","data-wow-delay":"1.6s",style:{visibility:"visible",animationDelay:"1.6s",animationName:"fadeInUp"},children:"EMC Registration System"}),Object(Ue.jsx)("button",{className:"btn btn-lg btn-danger smoothScroll wow fadeInUp animated","data-wow-delay":"2.3s",style:{visibility:"visible",animationDelay:"2.3s",animationName:"fadeInUp"},onClick:function(e){e.preventDefault(),t.has("user")?a.push(T):c.current&&$(c.current).modal("show")},children:"Log In"}),Object(Ue.jsx)(I.b,{to:V,className:"btn btn-lg btn-danger smoothScroll wow fadeInUp animated","data-wow-delay":"2.3s",style:{visibility:"visible",animationDelay:"2.3s",animationName:"fadeInUp"},children:"Pre Registration"})]})})}),Object(Ue.jsx)("div",{ref:c,className:"modal fade bg-dark",tabIndex:-1,children:Object(Ue.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:Object(Ue.jsxs)("div",{className:"modal-content bg-dark",children:[Object(Ue.jsxs)("div",{className:"modal-header",children:[Object(Ue.jsx)("h5",{className:"modal-title text-white",children:"Login"}),Object(Ue.jsx)("button",{type:"button",className:"close",onClick:function(e){e.preventDefault(),c.current&&$(c.current).modal("hide")},children:Object(Ue.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(Ue.jsxs)("div",{className:"modal-body",children:[Object(Ue.jsx)("button",{className:"m-2 d-block btn btn-danger btn-lg w-100",onClick:function(e){e.preventDefault(),c.current&&$(c.current).modal("hide"),a.push("/login/admin")},children:"Admin"}),Object(Ue.jsx)("button",{className:"m-2 d-block btn btn-danger btn-lg w-100",onClick:function(e){e.preventDefault(),c.current&&$(c.current).modal("hide"),a.push("/login/registrar")},children:"Registrar"}),Object(Ue.jsx)("button",{className:"m-2 d-block btn btn-danger btn-lg w-100",onClick:function(e){e.preventDefault(),c.current&&$(c.current).modal("hide"),a.push("/login/teacher")},children:"Teacher"}),Object(Ue.jsx)("button",{className:"m-2 d-block btn btn-danger btn-lg w-100",onClick:function(e){e.preventDefault(),c.current&&$(c.current).modal("hide"),a.push("/login/student")},children:"Student"})]}),Object(Ue.jsx)("div",{className:"modal-footer",children:Object(Ue.jsx)("button",{type:"button",className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),c.current&&$(c.current).modal("hide")},children:"Close"})})]})})})]})}),Zt=function(e){var t=Object(F.useState)(0),c=Object(le.a)(t,2),a=c[0],n=c[1],s=Object(F.useState)(!1),r=Object(le.a)(s,2),l=r[0],i=r[1],d=Object(me.a)(),u=d.register,b=d.handleSubmit,m=Object(P.f)(),h=v.getInstance(),f=Object(P.g)().role,O=function(){var e=Object(R.a)(M.a.mark((function e(t){var c,s,r,l,d;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.has("block")&&(c=N()(h.get("block")||void 0)).isValid()&&N()().isAfter(c)&&(h.remove("block"),n(0)),!(a>=3)){e.next=3;break}return e.abrupt("return",toastr.info("Login currently blocked. Please try again after 5 minutes."));case 3:return i(!0),e.prev=4,e.next=7,o.a.post("/auth/login",Object(j.a)(Object(j.a)({},t),{},{role:f}));case 7:s=e.sent,r=s.data,l=r.user,d=r.token,h.set("user",l),h.set("token",d),toastr.success("Welcome back, ".concat(null===l||void 0===l?void 0:l.first_name,".")),m.push(T),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),a>=3?h.set("block",N()().add(5,"minutes").toJSON()):n(a+1),Fe(e.t0,!1);case 21:return e.prev=21,i(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[4,17,21,24]])})));return function(t){return e.apply(this,arguments)}}();return h.has("user")?(m.push(T),null):Object(Ue.jsx)("div",{className:"wrapper vh-100 overflow-hidden",children:Object(Ue.jsx)("div",{className:"row align-items-center h-100",children:Object(Ue.jsx)("form",{className:"col-lg-3 col-md-4 col-10 mx-auto text-center",onSubmit:b(O),children:Object(Ue.jsx)("div",{className:"card",children:Object(Ue.jsxs)("div",{className:"card-body",children:[Object(Ue.jsx)("div",{className:"text-left",children:Object(Ue.jsx)("a",{href:"/",onClick:function(e){e.preventDefault(),m.goBack()},children:"Back"})}),Object(Ue.jsx)(I.b,{className:"navbar-brand mx-auto mt-2 flex-fill text-center",to:L,children:Object(Ue.jsx)("img",{src:"/logo.jpg",alt:"EMC",style:{width:"80px",height:"80px"},className:"rounded-circle border"})}),Object(Ue.jsx)("h1",{className:"h6 mb-3",children:"Login"}),Object(Ue.jsxs)("div",{className:"form-group",children:[Object(Ue.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email Address"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},u("email")),{},{type:"text",id:"email",className:"form-control form-control-lg",placeholder:"Email Address",disabled:l}))]}),Object(Ue.jsxs)("div",{className:"form-group",children:[Object(Ue.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},u("password")),{},{type:"password",id:"password",className:"form-control form-control-lg",placeholder:"Password",disabled:l}))]}),Object(Ue.jsx)(I.b,{to:U,className:"d-block",children:"Forgot password?"}),Object(Ue.jsx)(I.b,{to:L,className:"d-block",children:"Return to Home Page"}),Object(Ue.jsx)("button",{className:"btn btn-primary btn-block mt-5 btn-lg",type:"submit",disabled:l,children:l?Object(Ue.jsx)("i",{className:"fa fa-circle-notch fa-spin"}):"Login"})]})})})})})},Qt=function(e){var t=oe();return Object(Ue.jsx)("div",{className:"vh-100 d-flex",children:Object(Ue.jsx)("div",{className:"card align-self-center mx-auto",children:Object(Ue.jsxs)("div",{className:"card-body",children:[Object(Ue.jsx)(I.b,{className:"m-2 d-block btn btn-primary btn-lg",to:t("admin"),children:"Admin"}),Object(Ue.jsx)(I.b,{className:"m-2 d-block btn btn-info btn-lg",to:t("registrar"),children:"Registrar"}),Object(Ue.jsx)(I.b,{className:"m-2 d-block btn btn-success btn-lg",to:t("teacher"),children:"Teacher"}),Object(Ue.jsx)(I.b,{className:"m-2 d-block btn btn-danger btn-lg",to:t("student"),children:"Student"})]})})})},Xt=function(e){var t=oe(),c=v.getInstance(),a=Object(P.f)();return c.has("user")?(a.push(T),null):Object(Ue.jsxs)(P.c,{children:[Object(Ue.jsx)(P.a,{path:t("/"),exact:!0,component:Qt}),Object(Ue.jsx)(P.a,{path:t("/:role"),component:Zt})]})},ec=c(69),tc=c(119),cc=function(e){var t,c=Object(F.useState)(!1),a=Object(le.a)(c,2),n=a[0],s=a[1],r=Object(F.useState)(!1),l=Object(le.a)(r,2),i=l[0],d=l[1],u=Object(me.a)({defaultValues:{force:!1,level:"1st"}}),b=u.register,m=u.handleSubmit,h=u.reset,f=u.setValue,O=ue(),x=Object(le.a)(O,2),v=x[0],p=x[1],g=ue(),y=Object(le.a)(g,2),k=y[0],w=y[1],S=ue(),_=Object(le.a)(S,2),C=_[0],D=_[1],A=Object(ie.a)("courses",(function(){return Ie.fetch()})).data,E=Object(ie.a)("requirements",(function(){return ft.fetch()})).data,I=je(),B=Object(le.a)(I,2),T=B[0],L=B[1],U=Object(F.useState)(""),W=Object(le.a)(U,2),$=W[0],G=W[1],V=Object(P.f)(),J=be({onSuccess:function(e){return K(e)}}).data,q=function(){var e=Object(R.a)(M.a.mark((function e(t){var c,a,n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(((null===k||void 0===k||null===(c=k.majors)||void 0===c?void 0:c.length)||0)>0)||C){e.next=2;break}return e.abrupt("return",toastr.error("Please pick a major."));case 2:return s(!0),e.prev=3,t.status="Regular",t.term="1st Semester",t.year_id=(null===J||void 0===J?void 0:J.id)||0,t.pre_registration=!0,t.requirements=T,t.student.number=$,t.student.birthday=(null===v||void 0===v?void 0:v.toJSON())||"",e.next=13,o.a.post("/admission/pre-registration",t);case 13:toastr.success("Pre Registration saved successfully."),h(),V.goBack(),e.next=31;break;case 18:if(e.prev=18,e.t0=e.catch(3),409!==(null===(a=e.t0.response)||void 0===a?void 0:a.status)){e.next=30;break}return e.next=23,Oe.notice(null===(n=e.t0.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message);case 23:if(!e.sent){e.next=28;break}return t.force=!0,e.next=27,q(t);case 27:return e.abrupt("return");case 28:e.next=31;break;case 30:Fe(e.t0);case 31:return e.prev=31,s(!1),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,18,31,34]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(R.a)(M.a.mark((function e(t){var c,a,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=14;break}if(c=N()(),a=N()(t.registration_start),n=N()(t.registration_end),!c.isBefore(a)){e.next=8;break}return e.next=7,Oe.okay("Registration will start at ".concat(a.format("MMMM DD, YYYY"),". Please wait until the given date."),"Notice");case 7:return e.abrupt("return",V.goBack());case 8:if(!c.isAfter(n)){e.next=12;break}return e.next=11,Oe.okay("Registration has already ended. Please register at the next registration phase.","Notice");case 11:return e.abrupt("return",V.goBack());case 12:e.next=16;break;case 14:toastr.info("Registrar has not set a school year. Pre Registration will not be available until a registrar sets one.","Notice"),V.goBack();case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(F.useEffect)((function(){Be.fetch().then((function(e){f("student.uuid","student-".concat("".concat(e.filter((function(e){return"Student"===e.role})).length).padStart(5,"0"),"-").concat((new Date).getFullYear()))}))}),[]),Object(Ue.jsxs)("div",{className:"container py-5",children:[Object(Ue.jsx)("h3",{children:"Pre Registration Form"}),Object(Ue.jsxs)("form",{className:"form-row",onSubmit:m(q),children:[Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"first_name",children:"First Name"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},b("student.first_name")),{},{type:"text",id:"first_name",className:"form-control",disabled:n}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"address",children:"Address"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},b("student.address")),{},{type:"text",id:"address",className:"form-control",disabled:n}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"middle_name",children:"Middle Name"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},b("student.middle_name")),{},{type:"text",id:"middle_name",className:"form-control",disabled:n}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"number",children:"Phone Number"}),Object(Ue.jsx)(Le.a,{mask:"0\\999-999-9999",type:"text",id:"number",className:"form-control",disabled:n,value:$,onChange:function(e){return G(e.target.value)}})]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"last_name",children:"Last Name"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},b("student.last_name")),{},{type:"text",id:"last_name",className:"form-control",disabled:n}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"email",children:"Email Address"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},b("student.email")),{},{type:"email",id:"email",className:"form-control"}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"gender",children:"Gender"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},b("student.gender")),{},{id:"gender",className:"form-control",disabled:n,children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),Object(Ue.jsx)("option",{value:"Male",children:"Male"}),Object(Ue.jsx)("option",{value:"Female",children:"Female"})]}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"birthday",children:"Birthday"}),Object(Ue.jsx)(Re.a,{value:v||void 0,id:"birthday",options:{maxDate:N()().year((new Date).getFullYear()-15).toDate()},onChange:function(e){e.length>0&&p(e[0])},className:"form-control",disabled:n})]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"course_id",children:"Course"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},b("course_id")),{},{id:"course_id",className:"form-control",onChange:function(){var e=Object(R.a)(M.a.mark((function e(t){var c,a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.target.value.toNumber(),!(a=null===A||void 0===A?void 0:A.find((function(e){return e.id===c})))){e.next=10;break}if(a.open){e.next=7;break}return e.next=6,Oe.okay("Sorry, this course is not open for enrollment.");case 6:return e.abrupt("return",V.goBack());case 7:w(a),e.next=11;break;case 10:w(null);case 11:D(null);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),null===A||void 0===A?void 0:A.map((function(e,t){return Object(Ue.jsx)("option",{value:e.id,children:e.description},t)}))]}))]}),k&&k.majors&&k.majors.length>0?Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"major_id",children:"Major"}),Object(Ue.jsxs)("select",Object(j.a)(Object(j.a)({},b("major_id")),{},{id:"major_id",className:"form-control",onChange:function(e){var t=e.target.value;D(""===t?null:t.toNumber())},children:[Object(Ue.jsx)("option",{value:"",children:" -- Select -- "}),null===k||void 0===k||null===(t=k.majors)||void 0===t?void 0:t.map((function(e,t){return Object(Ue.jsx)("option",{value:e.id,children:e.name},t)}))]}))]}):null,Object(Ue.jsxs)("div",{className:"form-group col-12 p-2",children:[Object(Ue.jsx)("div",{className:"text-center",children:Object(Ue.jsx)("h3",{children:"Requirements"})}),Object(Ue.jsxs)("div",{className:"p-2 border rounded row",children:[0===(null===E||void 0===E?void 0:E.length)?"No Requirements":"",null===E||void 0===E?void 0:E.map((function(e,t){return Object(Ue.jsx)("div",{className:"col-12 col-md-6 col-lg-4 col-xl-3",children:Object(Ue.jsx)("div",{className:"form-group",children:Object(Ue.jsxs)("div",{className:"custom-control custom-checkbox",children:[Object(Ue.jsx)("input",{type:"checkbox",className:"custom-control-input",id:JSON.stringify(e),disabled:n,onChange:function(e){var t=e.target.value;if(T.includes(t)){var c=T.findIndex((function(e){return e===t}));T.splice(c,1)}else T.push(t);L(Object(Y.a)(T))},checked:T.includes(e.name),value:e.name}),Object(Ue.jsx)("label",{className:"custom-control-label",htmlFor:JSON.stringify(e),children:e.name})]})})},t)})),Object(Ue.jsx)("div",{className:"col-12 d-flex",children:Object(Ue.jsx)("button",{className:"btn btn-".concat(i?"danger":"secondary"," btn-sm ml-auto"),onClick:function(e){e.preventDefault(),E&&(L(i?[]:E.map((function(e){return e.name}))),d(!i))},children:i?"Unselect All":"Select All"})})]})]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"fathers_name",children:"Name of Father"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},b("student.fathers_name")),{},{type:"text",id:"fathers_name",className:"form-control"}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"mothers_name",children:"Name of Mother"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},b("student.mothers_name")),{},{type:"text",id:"mothers_name",className:"form-control"}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"fathers_occupation",children:"Occupation of Father"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},b("student.fathers_occupation")),{},{type:"text",id:"fathers_occupation",className:"form-control"}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6",children:[Object(Ue.jsx)("label",{htmlFor:"mothers_occupation",children:"Occupation of Mother"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},b("student.mothers_occupation")),{},{type:"text",id:"mothers_occupation",className:"form-control"}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 col-md-6 d-none",children:[Object(Ue.jsx)("label",{htmlFor:"uuid",children:"Student Number"}),Object(Ue.jsx)("input",Object(j.a)(Object(j.a)({},b("student.uuid")),{},{type:"text",id:"uuid",className:"form-control",readOnly:!0}))]}),Object(Ue.jsxs)("div",{className:"form-group col-12 d-flex",children:[Object(Ue.jsx)("span",{className:"mr-auto",children:Object(Ue.jsx)("button",{className:"btn btn-secondary btn-sm",onClick:function(e){e.preventDefault(),V.goBack()},disabled:n,children:"Return"})}),Object(Ue.jsx)("span",{className:"ml-auto",children:Object(Ue.jsx)("button",{type:"submit",className:"btn btn-primary btn-sm",disabled:n,children:"Submit"})})]})]})]})},ac=["/js/popper.min.js","/js/moment.min.js","/js/bootstrap.min.js","/js/simplebar.min.js","/js/daterangepicker.js","/js/jquery.stickOnScroll.js","/js/tinycolor-min.js","/js/config.js","/js/d3.min.js","/js/topojson.min.js","/js/datamaps.all.min.js","/js/datamaps-zoomto.js","/js/datamaps.custom.js","/js/Chart.min.js","/js/chart-setup.js","/js/gauge.min.js","/js/jquery.sparkline.min.js","/js/apexcharts.min.js","/js/apexcharts.custom.js","/js/jquery.mask.min.js","/js/select2.min.js","/js/jquery.steps.min.js","/js/jquery.validate.min.js","/js/jquery.timepicker.js","/js/dropzone.min.js","/js/uppy.min.js","/js/quill.min.js","/js/setup-1.js","/js/uppy.js","/js/apps.js"];function nc(){var e=v.getInstance(),t=Object(F.useMemo)((function(){return[{path:L,exact:!0,component:zt},{path:G,component:Xt},{path:T,component:Kt},{path:V,component:cc}]}),[]),c=function(){var t=Object(R.a)(M.a.mark((function t(){var c,a,n;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.get("/auth/check");case 3:c=t.sent,a=c.data,e.set("user",a),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),401===(null===(n=t.t0.response)||void 0===n?void 0:n.status)&&e.remove("user").remove("token");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return Object(F.useEffect)((function(){var e;c();var t=Object(h.a)(),a=ac.map((function(e){var c=document.createElement("script");return c.src=e,c.classList.add(t),c.defer=!0,c}));return(e=document.body).append.apply(e,Object(Y.a)(a)),function(){$(".".concat(t)).remove()}}),[]),Object(Ue.jsx)(ec.a,{client:new tc.a,children:Object(Ue.jsx)(I.a,{children:Object(Ue.jsx)(P.c,{children:t.map((function(e,t){return Object(F.createElement)(P.a,Object(j.a)(Object(j.a)({},e),{},{key:t}))}))})})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var sc=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,122)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),a(e),n(e),s(e),r(e)}))};c(111);A.a.render(Object(Ue.jsx)(C.a.StrictMode,{children:Object(Ue.jsx)(nc,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),sc()}},[[112,1,2]]]);
//# sourceMappingURL=main.e5a38eae.chunk.js.map