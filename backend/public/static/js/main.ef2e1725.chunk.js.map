{"version":3,"sources":["shims.ts","Libraries/Event/Key.ts","Libraries/Event/Observer.ts","Libraries/Event/Bus.ts","Libraries/State.ts","boot.ts","routes.ts","hooks.ts","helpers.ts","Libraries/Service.ts","Services/admission.service.ts","Services/course.service.ts","Services/year.service.ts","Services/user.service.ts","Components/Admissions/Form.tsx","Components/Shared/Table.tsx","Components/Admissions/List.tsx","Components/Admissions/index.tsx","Components/ChangePassword.tsx","Components/Courses/Form.tsx","Components/Courses/List.tsx","Components/Courses/index.tsx","Components/Dashboard/Analytics.tsx","Components/Dashboard/Navbar.tsx","Components/Dashboard/Sidebar.tsx","Services/subject.service.ts","Components/Dashboard/Student/Enrollment.tsx","Components/Dashboard/Student/Grades.tsx","Components/Dashboard/Student/Profile.tsx","Services/log.service.ts","Components/Logs/List.tsx","Components/Logs/index.tsx","Services/mail.service.ts","Components/Mails/List.tsx","Components/Mails/index.tsx","Components/Registrars/Form.tsx","Components/Registrars/List.tsx","Components/Registrars/index.tsx","Services/requirement.service.ts","Components/Requirements/Form.tsx","Components/Requirements/List.tsx","Components/Requirements/index.tsx","Services/schedule.service.ts","Services/section.service.ts","Components/Schedules/Form.tsx","Components/Schedules/List.tsx","Components/Dashboard/Student/Schedules.tsx","Components/Schedules/index.tsx","Services/grade.service.ts","Components/Students/List.tsx","Components/Students/Subjects.tsx","Components/Students/index.tsx","Components/Subjects/Form.tsx","Components/Subjects/List.tsx","Components/Subjects/View.tsx","Components/Subjects/index.tsx","Components/Teachers/Form.tsx","Components/Teachers/List.tsx","Components/Teachers/index.tsx","Services/unit.service.ts","Components/Units/Form.tsx","Components/Units/List.tsx","Components/Units/index.tsx","Components/Users/List.tsx","Components/Users/index.tsx","Components/Years/Form.tsx","Components/Years/List.tsx","Components/Years/index.tsx","Views/Dashboard.tsx","Assets/landing.jpg","Views/Home.tsx","Views/Login/Form.tsx","Views/Login/Selection.tsx","Views/Login/index.tsx","Components/PreRegistration.tsx","Views/App.tsx","serviceWorkerRegistration.ts","reportWebVitals.ts","index.tsx"],"names":["Error","prototype","toJSON","alt","_this","this","Object","getOwnPropertyNames","forEach","key","stack","split","map","string","trim","filter","_","i","String","toNumber","parts","length","whole","match","join","decimals","Number","toString","characters","random","size","results","x","charAt","Math","floor","Array","first","last","HTMLElement","disable","mode","removeAttribute","setAttribute","Key","name","id","v4","Observer","callback","value","Bus","observers","handle","unshift","getName","getID","index","findIndex","observer","getKey","splice","execute","State","storage","bus","window","localStorage","data","getAll","setAll","getItem","JSON","parse","setItem","stringify","has","dispatch","listen","unlisten","instance","dayjs","extend","relativeTime","customParseFormat","toastr","options","escapeHtml","extendedTimeOut","$","jQuery","url","process","axios","defaults","baseURL","withCredentials","headers","common","get","catch","console","error","state","getInstance","token","interceptors","request","use","config","routes","useURL","useRouteMatch","path","useMode","useState","useNullable","useArray","useCurrentYear","useQuery","a","undefined","onSuccess","year","Asker","message","title","toBool","swal","text","buttons","icon","dangerMode","isBehind","student","admissions","find","admission","current","findSection","section","sections","outIf","condition","output","defaultValue","isArray","_isArray","ucfirst","array","toUpperCase","setValues","setter","networkHandle","authHandle","handleError","useHandle","response","errors","status","values","includes","setTimeout","clearTimeout","sentencify","isString","words","snakeCase","word","toLowerCase","Intl","NumberFormat","style","currency","Service","params","resolveURL","payload","post","put","delete","URLSearchParams","admissionService","courseService","yearService","userService","Form","props","processing","setProcessing","setMode","useForm","defaultValues","force","register","setValue","handleSubmit","reset","setID","history","useHistory","birthday","setBirthday","majorID","setMajorID","number","setNumber","course","setCourse","courses","fetch","years","fetchOne","toDate","major_id","goBack","submit","majors","requirements","year_id","create","update","success","save","log","useEffect","then","users","user","role","padStart","Date","getFullYear","className","onSubmit","htmlFor","type","disabled","start","end","readOnly","maxDate","onChange","dates","mask","e","target","open","description","major","onClick","Table","columns","loading","onRefresh","items","misc","setData","preventDefault","column","selector","row","accessor","sortable","pagination","fixedHeader","subHeader","subHeaderComponent","placeholder","item","keys","theme","List","isFetching","isError","refetch","active","deleteItem","danger","info","minWidth","push","done","id_number","uuid","last_name","first_name","middle_name","gender","code","requirement","actions","to","notice","Admissions","exact","component","route","ChangePassword","pattern","setMajors","test","cols","rows","course_id","short_name","Courses","Chart","registerables","Analytics","students","old","new","total","genders","males","females","graduates","enrollees","pending","subjects","Promise","all","charts","labels","datasets","label","admissions_count","backgroundColor","borderColor","borderWidth","scales","y","beginAtZero","ticks","precision","chart","destroy","Navbar","menu","setMenu","light","document","getElementById","dark","addClass","removeClass","bar","roleDisplay","hasClass","href","set","src","remove","Sidebar","setSection","useCurrentSection","roles","Admin","Registrar","Teacher","Student","height","width","semester","activeClassName","collapse","subjectService","Enrollment","print","setPrint","temp","selected","setSelected","enrolled","setEnrolled","subject","refetchUser","ref","createRef","selectAll","setSelectAll","allowed_units","fontSize","term","level","non","valid","display","checked","units","maxWidth","reduce","previous","next","Grades","setAdmissions","reverse","findGrade","grades","grade","subject_id","filterSubjects","previous_subjects","s","prev","Profile","format","logService","created_at","Logs","mailService","colors","Sent","Pending","Failed","modalRef","mail","sent","modal","html","body","tabIndex","Mails","registrar","age","Registrars","requirementService","Requirements","scheduleService","sectionService","setMajor","teacher","setTeacher","setYear","setTerm","day","start_time","end_time","setRows","refetchCourses","refetchUsers","refetchSubjects","refetchYears","refetchSections","refetchAll","schedules","schedule","teacher_id","section_id","enableTime","altFormat","altInput","times","Schedules","SchedulesStudent","gradeService","incrementModalRef","updatePaymentModalRef","registerGrade","registerUser","handleSubmitUser","resetUser","setValueUser","setStudent","addGradeModalRef","semesterStart","setSemesterStart","semesterEnd","setSemesterEnd","registrationStart","setRegistrationStart","registrationEnd","setRegistrationEnd","gradeStart","setGradeStart","gradeEnd","setGradeEnd","yearHandleSubmit","yearReset","determine","useCallback","location","pathname","setType","statuses","submitYear","semester_start","semester_end","registration_start","registration_end","grade_start","grade_end","evaluate","missing","failed","passed","submitGrade","student_id","submitUser","findAdmission","reincrement","payment_status","download","min","max","dateFormat","Subjects","useParams","check","now","isBefore","okay","isAfter","sub","Students","unit","refine","students_count","memoizedRefine","memoized","useMemo","raw","View","studentID","setStudentID","isLoading","setGrade","setSetGrade","gradeAmount","setGradeAmount","position","right","on","toggle","email","address","Teachers","unitService","Units","new_password","repeat_password","user_id","full_name","Users","setAsCurrent","registration","Years","Dashboard","localRoutes","Home","background","visibility","animationDelay","animationName","tries","setTries","block","isValid","add","Selection","Login","PreRegistration","pre_registration","m","urls","App","links","scripts","script","createElement","classList","defer","append","QueryClientProvider","client","QueryClient","link","Boolean","hostname","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","unregister"],"mappings":"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","file":"static/js/main.ef2e1725.chunk.js","sourcesContent":["import { trim } from 'lodash';\r\n\r\nError.prototype.toJSON = function () {\r\n\tconst alt = {} as any;\r\n\r\n\tconst _this = this as any;\r\n\tObject.getOwnPropertyNames(_this).forEach(function (key) {\r\n\t\talt[key] = _this[key];\r\n\t}, _this);\r\n\r\n\tif ('stack' in alt) {\r\n\t\talt.stack = alt.stack\r\n\t\t\t.split(/\\r?\\n/)\r\n\t\t\t.map((string: string) => string.trim())\r\n\t\t\t.filter((_: any, i: number) => i !== 0);\r\n\t}\r\n\r\n\treturn alt;\r\n};\r\n\r\nString.prototype.toNumber = function () {\r\n\tconst parts = this.split('.');\r\n\tif (parts.length > 1) {\r\n\t\tconst whole = (parts[0].match(/\\d/g) || []).join('');\r\n\t\tconst decimals = (parts[1].match(/\\d/g) || []).join('');\r\n\t\treturn Number(`${whole}.${decimals}`) || 0;\r\n\t}\r\n\tconst match = this.match(/\\d/g);\r\n\tif (!match) {\r\n\t\treturn 0;\r\n\t}\r\n\treturn Number(match.join('')) || 0;\r\n};\r\n\r\nString.prototype.trim = function () {\r\n\treturn trim(this.toString());\r\n};\r\n\r\nconst characters = '1234567890qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM';\r\n\r\nString.random = (size = 40) => {\r\n\tlet results = '';\r\n\r\n\tfor (let x = 0; x < size; x++) {\r\n\t\tresults += characters.charAt(Math.floor(Math.random() * characters.length));\r\n\t}\r\n\r\n\treturn results;\r\n};\r\n\r\nArray.prototype.random = function () {\r\n\treturn this[Math.floor(Math.random() * this.length)];\r\n};\r\n\r\nArray.prototype.first = function () {\r\n\tif (this.length > 0) {\r\n\t\treturn this[0];\r\n\t}\r\n\treturn undefined;\r\n};\r\n\r\nArray.prototype.last = function () {\r\n\tif (this.length > 0) {\r\n\t\treturn this[this.length - 1];\r\n\t}\r\n\treturn undefined;\r\n};\r\n\r\nHTMLElement.prototype.disable = function (mode?: boolean) {\r\n\tif (mode === false) {\r\n\t\tthis.removeAttribute('disabled');\r\n\t} else {\r\n\t\tthis.setAttribute('disabled', 'disabled');\r\n\t}\r\n};\r\n\r\nexport {};\r\n","import { v4 } from 'uuid';\r\n\r\nexport class Key {\r\n\tprotected id: string;\r\n\tprotected name: string;\r\n\r\n\tconstructor(name: string) {\r\n\t\tthis.id = v4();\r\n\t\tthis.name = name;\r\n\t}\r\n\r\n\tgetID() {\r\n\t\treturn this.id;\r\n\t}\r\n\r\n\tgetName() {\r\n\t\treturn this.name;\r\n\t}\r\n\r\n\ttoString() {\r\n\t\treturn `'${this.id} - ${this.name}'`;\r\n\t}\r\n}\r\n","import { Key } from './Key';\r\n\r\nexport class Observer {\r\n\tprotected key: Key;\r\n\tprotected callback: Function;\r\n\r\n\tconstructor(key: Key, callback: Function) {\r\n\t\tthis.key = key;\r\n\t\tthis.callback = callback;\r\n\t}\r\n\r\n\texecute(value: any) {\r\n\t\tthis.callback(value);\r\n\t}\r\n\r\n\tgetKey() {\r\n\t\treturn this.key;\r\n\t}\r\n}\r\n","import { Key } from './Key';\r\nimport { Observer } from './Observer';\r\n\r\ntype Observers = {\r\n\t[key: string]: Observer[];\r\n};\r\n\r\nexport class Bus {\r\n\tprotected observers: Observers = {};\r\n\r\n\tlisten<T = any>(key: string, callback: (value: T) => void) {\r\n\t\tif (!(key in this.observers)) {\r\n\t\t\tthis.observers[key] = [];\r\n\t\t}\r\n\r\n\t\tconst handle = new Key(key);\r\n\t\tthis.observers[key].unshift(new Observer(handle, callback));\r\n\r\n\t\treturn handle;\r\n\t}\r\n\r\n\tunlisten(key: Key) {\r\n\t\tconst name = key.getName();\r\n\t\tconst id = key.getID();\r\n\r\n\t\tif (!(name in this.observers)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst index = this.observers[name].findIndex((observer) => observer.getKey().getID() === id);\r\n\r\n\t\tif (index >= 0) {\r\n\t\t\tthis.observers[name].splice(index, 1);\r\n\t\t}\r\n\t}\r\n\r\n\tdispatch(name: string, value?: any) {\r\n\t\tif (!(name in this.observers)) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tthis.observers[name].forEach((observer) => observer.execute(value));\r\n\t\treturn this;\r\n\t}\r\n}\r\n","import { Bus } from './Event/Bus';\r\nimport { Key } from './Event/Key';\r\n\r\nexport type StorageItem = {\r\n\t[key: string]: any;\r\n};\r\n\r\nexport type ChangeEvent<T> = (value: T) => void;\r\n\r\nexport class State {\r\n\tprotected static instance = new State();\r\n\tprotected storage: Storage;\r\n\tprotected key = 'emc-state-key';\r\n\tprotected bus: Bus;\r\n\r\n\tconstructor(key?: string) {\r\n\t\tthis.storage = window.localStorage;\r\n\t\tthis.bus = new Bus();\r\n\t\tif (key) {\r\n\t\t\tthis.key = key;\r\n\t\t}\r\n\t\tconst data = this.getAll();\r\n\t\tthis.setAll({ ...data });\r\n\t}\r\n\r\n\tstatic getInstance() {\r\n\t\treturn this.instance;\r\n\t}\r\n\r\n\tclear() {\r\n\t\treturn this.setAll({});\r\n\t}\r\n\r\n\tprotected getAll(): StorageItem {\r\n\t\ttry {\r\n\t\t\tconst data = this.storage.getItem(this.key);\r\n\t\t\treturn data ? JSON.parse(data) : {};\r\n\t\t} catch (_) {\r\n\t\t\treturn {};\r\n\t\t}\r\n\t}\r\n\r\n\tprotected setAll(data: StorageItem) {\r\n\t\tthis.storage.setItem(this.key, JSON.stringify(data));\r\n\t\treturn this;\r\n\t}\r\n\r\n\thas(key: string) {\r\n\t\treturn key in this.getAll();\r\n\t}\r\n\r\n\tget<T = any>(key: string): T | null {\r\n\t\tif (!this.has(key)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn this.getAll()[key];\r\n\t}\r\n\r\n\tset(key: string, value: any) {\r\n\t\tconst data = this.getAll();\r\n\t\tdata[key] = value;\r\n\t\tthis.dispatch(key, value);\r\n\t\treturn this.setAll(data);\r\n\t}\r\n\r\n\tremove(key: string) {\r\n\t\tif (this.has(key)) {\r\n\t\t\tconst data = this.getAll();\r\n\t\t\tdelete data[key];\r\n\t\t\tthis.setAll(data);\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\tprotected dispatch<T>(key: string, value: T) {\r\n\t\tthis.bus.dispatch(key, value);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tlisten<T>(key: string, callback: ChangeEvent<T>) {\r\n\t\treturn this.bus.listen(key, callback);\r\n\t}\r\n\r\n\tunlisten(key: Key) {\r\n\t\tthis.bus.unlisten(key);\r\n\t\treturn this;\r\n\t}\r\n}\r\n","import toastr from 'toastr';\r\nimport 'toastr/build/toastr.css';\r\nimport axios from 'axios';\r\nimport './shims';\r\nimport $ from 'jquery';\r\nimport 'popper.js';\r\nimport 'bootstrap';\r\nimport 'datatables.net';\r\nimport 'datatables.net-bs4';\r\nimport { State } from './Libraries/State';\r\nimport 'flatpickr/dist/themes/material_blue.css';\r\nimport dayjs from 'dayjs';\r\nimport relativeTime from 'dayjs/plugin/relativeTime';\r\nimport customParseFormat from 'dayjs/plugin/customParseFormat';\r\n\r\ndayjs.extend(relativeTime);\r\ndayjs.extend(customParseFormat);\r\n\r\ntoastr.options.escapeHtml = true;\r\ntoastr.options.extendedTimeOut = 2000;\r\n\r\nwindow.toastr = toastr;\r\nwindow.$ = $;\r\nwindow.jQuery = $;\r\n\r\nconst url = process.env.REACT_APP_SERVER_URL || '';\r\n\r\naxios.defaults.baseURL = `${url}/api`;\r\naxios.defaults.withCredentials = true;\r\naxios.defaults.headers.common['Accept'] = 'application/json';\r\n\r\naxios.get(`${url}/sanctum/csrf-cookie`).catch(console.error);\r\n\r\nconst state = State.getInstance();\r\n\r\nif (state.has('token')) {\r\n\tconst token = state.get('token');\r\n\taxios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n}\r\n\r\nstate.listen<string>('token', (token) => {\r\n\taxios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n});\r\n\r\naxios.interceptors.request.use((config) => {\r\n\tif (state.has('token')) {\r\n\t\tconfig.headers['Authorization'] = `Bearer ${state.get<string>('token')}`;\r\n\t}\r\n\r\n\treturn config;\r\n});\r\n","export const routes = {\r\n\tADMISSIONS: '/admissions',\r\n\tDASHBOARD: '/dashboard',\r\n\tHOME: '/',\r\n\tFORGOT_PASSWORD: '/forgot-password',\r\n\tCHANGE_PASSWORD: '/change-password',\r\n\tLOGIN: '/login',\r\n\tPREREGISTRATION: '/pre-registration',\r\n\tCOURSES: '/courses',\r\n\tSTUDENTS: '/students',\r\n\tTEACHERS: '/teachers',\r\n\tREGISTRARS: '/registrars',\r\n\tSCHEDULES: '/schedules',\r\n\tSUBJECTS: '/subjects',\r\n\tUSERS: '/users',\r\n\tMAILS: '/mails',\r\n\tYEARS: '/school-years',\r\n\tGRADES: '/grades',\r\n\tENROLLMENT: '/enrollment',\r\n\tPROFILE: '/profile',\r\n\tADMISSION_REQUIREMENTS: '/admission-requirements',\r\n\tLOGS: '/logs',\r\n\tUNITS: '/units',\r\n};\r\n","import axios from 'axios';\r\nimport { useEffect, useState } from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { useRouteMatch } from 'react-router-dom';\r\nimport { SectionContract } from './Contracts/section.contract';\r\nimport { YearContract } from './Contracts/year.contract';\r\n\r\nexport function useURL() {\r\n\tconst match = useRouteMatch();\r\n\r\n\treturn (path: string) => `${match.path}${path}`;\r\n}\r\n\r\nexport function useMode() {\r\n\treturn useState<'Add' | 'Edit'>('Add');\r\n}\r\n\r\nexport function useNullable<T>(data?: T) {\r\n\treturn useState<T | null>(data || null);\r\n}\r\n\r\nexport function useArray<T>(data?: T[]) {\r\n\treturn useState<T[]>(data || []);\r\n}\r\n\r\nexport function useCurrentYear(options?: { onSuccess: (year?: YearContract) => void }) {\r\n\treturn useQuery(\r\n\t\t['years', 'current'],\r\n\t\tasync () => {\r\n\t\t\tconst { data } = await axios.get<YearContract | null>('/years/current');\r\n\t\t\tif (data) {\r\n\t\t\t\treturn data;\r\n\t\t\t}\r\n\r\n\t\t\treturn undefined;\r\n\t\t},\r\n\t\t{\r\n\t\t\tonSuccess(year) {\r\n\t\t\t\toptions?.onSuccess(year);\r\n\t\t\t},\r\n\t\t}\r\n\t);\r\n}\r\n\r\nexport function useCurrentSection() {\r\n\tconst [section, setSection] = useNullable<SectionContract>();\r\n\r\n\tuseEffect(() => {\r\n\t\taxios\r\n\t\t\t.get('/sections/current')\r\n\t\t\t.then((response) => setSection(response.data))\r\n\t\t\t.catch((error) => console.log(error.toJSON()));\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\treturn section;\r\n}\r\n","import toastr from 'toastr';\r\nimport _, { isArray as _isArray, isString, trim } from 'lodash';\r\nimport dayjs from 'dayjs';\r\nimport relativeTime from 'dayjs/plugin/relativeTime';\r\nimport swal from 'sweetalert';\r\nimport { UserContract } from './Contracts/user.contract';\r\n\r\ndayjs.extend(relativeTime);\r\n\r\nexport class Asker {\r\n\tstatic async notice(message: string, title?: string) {\r\n\t\treturn toBool(await swal({ title, text: message, buttons: ['Cancel', 'Confirm'], icon: 'warning' }));\r\n\t}\r\n\r\n\tstatic async danger(message: string, title?: string) {\r\n\t\treturn toBool(await swal({ title, text: message, buttons: ['Cancel', 'Confirm'], dangerMode: true, icon: 'warning' }));\r\n\t}\r\n\r\n\tstatic async save(message: string, title?: string) {\r\n\t\treturn toBool(await swal({ title, text: message, buttons: ['Cancel', 'Save'], icon: 'info' }));\r\n\t}\r\n\r\n\tstatic async okay(message: string, title?: string) {\r\n\t\treturn toBool(await swal({ title, text: message, icon: 'info' }));\r\n\t}\r\n}\r\n\r\nexport function isBehind(student: UserContract) {\r\n\treturn student.admissions?.find((admission) => admission.year?.current) === undefined;\r\n}\r\n\r\nexport function findSection(student: UserContract) {\r\n\tconst section = student.sections?.find((section) => section.year?.current);\r\n\tif (section) {\r\n\t\treturn section;\r\n\t}\r\n\treturn student.sections?.last();\r\n}\r\n\r\nexport function outIf<T>(condition: boolean, output: T, defaultValue: any = ''): T {\r\n\treturn condition ? output : (defaultValue as T);\r\n}\r\n\r\nexport function toBool(data: any) {\r\n\treturn data ? true : false;\r\n}\r\n\r\nexport function isArray<T>(value: any): value is T[] {\r\n\treturn _isArray<T>(value);\r\n}\r\n\r\nexport function toJSON(data: any) {\r\n\treturn trim(JSON.stringify(data));\r\n}\r\n\r\nexport function validURL(url: string) {\r\n\tlet valid = false;\r\n\tvar pattern = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!-/]))?/;\r\n\ttry {\r\n\t\tnew URL(url);\r\n\t\tvalid = true;\r\n\t} catch (_) {\r\n\t\tvalid = false;\r\n\t}\r\n\treturn !!pattern.test(url) && valid;\r\n}\r\n\r\nexport function ucfirst(string: string) {\r\n\tconst array = string.split('');\r\n\tarray[0] = array[0].toUpperCase();\r\n\treturn array.join('');\r\n}\r\n\r\nexport function ucwords(string: string) {\r\n\treturn string\r\n\t\t.split(' ')\r\n\t\t.map((word) => (word === 'Id' ? 'ID' : ucfirst(word)))\r\n\t\t.join(' ');\r\n}\r\n\r\nexport function setValues(setter: Function, data: any) {\r\n\tfor (const key in data) {\r\n\t\tsetter(key, data[key]);\r\n\t}\r\n}\r\n\r\nlet networkHandle: NodeJS.Timeout | null = null;\r\nlet authHandle: NodeJS.Timeout | null = null;\r\n\r\nexport function handleError(error: any, useHandle = true) {\r\n\tif (error) {\r\n\t\tif (error.response) {\r\n\t\t\tconst response = error.response;\r\n\t\t\tif (response.data.errors && response.status === 422) {\r\n\t\t\t\treturn Object.values<string[]>(response.data.errors).map((errors) => errors.map((error) => toastr.error(error)));\r\n\t\t\t}\r\n\t\t\tif (response.data.message) {\r\n\t\t\t\tif ([500, 400, 403, 404].includes(response.status)) {\r\n\t\t\t\t\treturn toastr.error(response.data.message);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (response.status === 401) {\r\n\t\t\t\t\tif (authHandle === null) {\r\n\t\t\t\t\t\ttoastr.error('Authentication has expired. Please try logging in and try again.');\r\n\t\t\t\t\t\tauthHandle = setTimeout(() => {\r\n\t\t\t\t\t\t\tif (authHandle !== null) {\r\n\t\t\t\t\t\t\t\tclearTimeout(authHandle);\r\n\t\t\t\t\t\t\t\tauthHandle = null;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 5000);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (isArray(response.data.message)) {\r\n\t\t\t\t\treturn response.data.message.forEach((message: string) =>\r\n\t\t\t\t\t\ttoastr.error(sentencify(message), undefined, { extendedTimeOut: 2000 })\r\n\t\t\t\t\t);\r\n\t\t\t\t} else if (isString(response.data.message)) {\r\n\t\t\t\t\treturn toastr.error(sentencify(response.data.message));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (error.message) {\r\n\t\t\tif (error.message.includes('Network Error')) {\r\n\t\t\t\tif (networkHandle === null && useHandle) {\r\n\t\t\t\t\ttoastr.error('Unable to connect. Please check your internet connection or the server may be down.');\r\n\t\t\t\t\tnetworkHandle = setTimeout(() => {\r\n\t\t\t\t\t\tif (networkHandle !== null) {\r\n\t\t\t\t\t\t\tclearTimeout(networkHandle);\r\n\t\t\t\t\t\t\tnetworkHandle = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 5000);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn toastr.error(error.message);\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\treturn toastr.error('Something went wrong, please try again later.', 'Oops!');\r\n\t}\r\n}\r\n\r\nexport function errorToStrings(error: any) {\r\n\tif (error) {\r\n\t\tif (error.response) {\r\n\t\t\tconst response = error.response;\r\n\t\t\tif (response.data.message) {\r\n\t\t\t\tif (isArray(response.data.message)) {\r\n\t\t\t\t\treturn (response.data.message as string[]).map((message) => sentencify(message));\r\n\t\t\t\t} else if (isString(response.data.message)) {\r\n\t\t\t\t\treturn [sentencify(response.data.message)];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (error.message) {\r\n\t\t\tif (isString(error.message)) {\r\n\t\t\t\tif (error.message.includes('Network Error')) {\r\n\t\t\t\t\treturn ['Unable to connect. Please check your internet connection or the server may be down.'];\r\n\t\t\t\t}\r\n\t\t\t\treturn [error.message as string];\r\n\t\t\t} else if (isArray(error.message)) {\r\n\t\t\t\treturn (error.message as string[]).map((message) => sentencify(message));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn ['Something went wrong, please try again later.'];\r\n}\r\n\r\nexport function groupBy<T, K extends keyof T>(data: Array<T>, key: K) {\r\n\tconst temp: { [key: string]: Array<T> } = {};\r\n\r\n\tdata.forEach((item) => {\r\n\t\tconst property: any = item[key];\r\n\t\tif (!(property in temp)) {\r\n\t\t\ttemp[property] = [];\r\n\t\t}\r\n\t\ttemp[property].push(item);\r\n\t});\r\n\treturn Object.keys(temp).map((key) => temp[key]);\r\n}\r\n\r\nexport function sentencify(words: string) {\r\n\treturn ucfirst(\r\n\t\t_.snakeCase(words)\r\n\t\t\t.split('_')\r\n\t\t\t.map((word) => (word.toLowerCase() === 'id' ? 'ID' : word))\r\n\t\t\t.join(' ')\r\n\t);\r\n}\r\n\r\nexport function fromNow(date: any) {\r\n\treturn dayjs(date).fromNow();\r\n}\r\n\r\nexport function makeMask<T extends Function>(callable: T, callback: Function) {\r\n\treturn ((data: any) => {\r\n\t\treturn callable(callback(data));\r\n\t}) as unknown as T;\r\n}\r\n\r\nexport function except<T, K extends keyof T>(data: T, keys: Array<K>) {\r\n\tconst copy = {} as T;\r\n\r\n\tfor (const key in data) {\r\n\t\tcopy[key] = data[key];\r\n\t}\r\n\r\n\tfor (const key of keys) {\r\n\t\tif (key in copy) {\r\n\t\t\tdelete copy[key];\r\n\t\t}\r\n\t}\r\n\treturn copy;\r\n}\r\n\r\nexport function exceptMany<T, K extends keyof T>(data: Array<T>, keys: Array<K>) {\r\n\treturn [...data].map((item) => except(item, keys));\r\n}\r\n\r\nexport function has<T>(keys: Array<T>, data: T) {\r\n\treturn keys.includes(data);\r\n}\r\n\r\nexport function only<T, K extends keyof T>(data: T, keys: Array<K>) {\r\n\tconst result = {} as T;\r\n\t(result as any)['id'] = (data as any)['id'];\r\n\tfor (const key of keys) {\r\n\t\tresult[key] = data[key];\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nexport function onlyMany<T, K extends keyof T>(data: Array<T>, keys: Array<K>) {\r\n\treturn [...data].map((item) => only(item, keys));\r\n}\r\n\r\nconst formatter = new Intl.NumberFormat('en-PH', {\r\n\tstyle: 'currency',\r\n\tcurrency: 'PHP',\r\n});\r\n\r\nexport function formatCurrency(value: number) {\r\n\treturn formatter.format(value).replace(/\\D00(?=\\D*$)/, '');\r\n}\r\n","import axios from 'axios';\r\n\r\ntype FreeObject = {\r\n\t[key: string]: any;\r\n};\r\n\r\nexport class Service<T> {\r\n\tprotected url: string;\r\n\r\n\tconstructor(url: string) {\r\n\t\tthis.url = url;\r\n\t}\r\n\r\n\tasync fetch(params?: FreeObject) {\r\n\t\tconst { data } = await axios.get<T[]>(this.resolveURL(params));\r\n\t\treturn data;\r\n\t}\r\n\r\n\tasync fetchOne(id: any, params?: FreeObject) {\r\n\t\tconst { data } = await axios.get<T>(`${this.resolveURL(params)}/${id}`);\r\n\t\treturn data;\r\n\t}\r\n\r\n\tasync create(payload: T, params?: FreeObject) {\r\n\t\tconst { data } = await axios.post(`${this.resolveURL(params)}`, payload);\r\n\t\treturn data;\r\n\t}\r\n\r\n\tasync update(id: any, payload: Partial<T>, params?: FreeObject) {\r\n\t\tconst { data } = await axios.put(`${this.resolveURL(params)}/${id}`, payload);\r\n\t\treturn data;\r\n\t}\r\n\r\n\tasync delete(id: any, params?: FreeObject) {\r\n\t\tawait axios.delete(`${this.resolveURL(params)}/${id}`);\r\n\t}\r\n\r\n\tprotected resolveURL(params?: FreeObject) {\r\n\t\treturn `${this.url}${params ? `?${new URLSearchParams(params).toString()}` : ''}`;\r\n\t}\r\n}\r\n","import { AdmissionContract } from '../Contracts/admission.contract';\r\nimport { Service } from '../Libraries/Service';\r\n\r\nexport class AdmissionService extends Service<AdmissionContract> {}\r\n\r\nexport const admissionService = new AdmissionService('/admissions');\r\n","import { CourseContract } from '../Contracts/course.contract';\r\nimport { Service } from '../Libraries/Service';\r\n\r\nexport class CourseService extends Service<CourseContract> {}\r\n\r\nexport const courseService = new CourseService('/courses');\r\n","import { YearContract } from '../Contracts/year.contract';\r\nimport { Service } from '../Libraries/Service';\r\n\r\nexport class YearService extends Service<YearContract> {}\r\n\r\nexport const yearService = new YearService('/years');\r\n","import { UserContract } from '../Contracts/user.contract';\r\nimport { Service } from '../Libraries/Service';\r\n\r\nexport class UserService extends Service<UserContract> {}\r\n\r\nexport const userService = new UserService('/users');\r\n","import React, { FC, useEffect, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useHistory, useRouteMatch } from 'react-router';\r\nimport { Asker, handleError, setValues } from '../../helpers';\r\nimport { useMode, useNullable } from '../../hooks';\r\nimport { admissionService } from '../../Services/admission.service';\r\nimport Flatpickr from 'react-flatpickr';\r\nimport dayjs from 'dayjs';\r\nimport { useQuery } from 'react-query';\r\nimport { courseService } from '../../Services/course.service';\r\nimport { yearService } from '../../Services/year.service';\r\nimport { userService } from '../../Services/user.service';\r\nimport { CourseContract } from '../../Contracts/course.contract';\r\nimport InputMask from 'react-input-mask';\r\n\r\ntype Props = {};\r\n\r\ntype Inputs = {\r\n\tcourse_id: number;\r\n\tlevel: string;\r\n\tstatus: string;\r\n\tterm: string;\r\n\tstudent_id: number;\r\n\tyear_id: number;\r\n\tmajor_id?: number;\r\n\trequirements: string[];\r\n\tstudent: {\r\n\t\tuuid: string;\r\n\t\tfirst_name: string;\r\n\t\tlast_name: string;\r\n\t\tmiddle_name?: string;\r\n\t\tgender?: string;\r\n\t\taddress?: string;\r\n\t\tplace_of_birth?: string;\r\n\t\tbirthday?: string;\r\n\t\trole: string;\r\n\t\temail: string;\r\n\t\tnumber: string;\r\n\t\tactive: boolean;\r\n\t\tpassword: string;\r\n\t\tfathers_name?: string;\r\n\t\tmothers_name?: string;\r\n\t\tfathers_occupation?: string;\r\n\t\tmothers_occupation?: string;\r\n\t\ttype: string;\r\n\t\tenrolled: boolean;\r\n\t\tpayment_status: 'Not Paid' | 'Fully Paid' | 'Partially Paid';\r\n\t};\r\n\tforce: boolean;\r\n\tdone: boolean;\r\n};\r\n\r\nconst Form: FC<Props> = (props) => {\r\n\tconst [processing, setProcessing] = useState(false);\r\n\tconst [mode, setMode] = useMode();\r\n\tconst { register, setValue, handleSubmit, reset } = useForm<Inputs>({\r\n\t\tdefaultValues: {\r\n\t\t\tforce: false,\r\n\t\t},\r\n\t});\r\n\tconst [id, setID] = useState(-1);\r\n\tconst history = useHistory();\r\n\tconst match = useRouteMatch<{ id: string }>();\r\n\tconst [birthday, setBirthday] = useNullable<Date>();\r\n\tconst [majorID, setMajorID] = useNullable<number>();\r\n\tconst [number, setNumber] = useState('');\r\n\tconst [course, setCourse] = useNullable<CourseContract>();\r\n\tconst { data: courses } = useQuery('courses', () => courseService.fetch());\r\n\tconst { data: years } = useQuery('years', () => yearService.fetch());\r\n\r\n\tconst fetch = async (id: any) => {\r\n\t\ttry {\r\n\t\t\tconst data = await admissionService.fetchOne(id);\r\n\t\t\tsetID(data.id!);\r\n\t\t\tsetValues(setValue, data);\r\n\t\t\tsetBirthday(dayjs(data.student?.birthday).toDate());\r\n\t\t\tif (data.student) {\r\n\t\t\t\tfor (const key in data.student) {\r\n\t\t\t\t\tsetValue(`student.${key}` as any, (data.student as any)[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsetCourse(data.course!);\r\n\t\t\tif (data.major_id) {\r\n\t\t\t\tsetMajorID(data.major_id);\r\n\t\t\t}\r\n\t\t\tsetNumber(data.student?.number!);\r\n\t\t\tsetMode('Edit');\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t\thistory.goBack();\r\n\t\t}\r\n\t};\r\n\r\n\tconst submit = async (data: Inputs) => {\r\n\t\tif ((course?.majors?.length || 0) > 0 && !majorID) {\r\n\t\t\treturn toastr.error('Please pick a major.');\r\n\t\t}\r\n\t\tsetProcessing(true);\r\n\t\ttry {\r\n\t\t\tif (majorID) {\r\n\t\t\t\tdata.major_id = majorID;\r\n\t\t\t}\r\n\t\t\tdata.requirements = [];\r\n\t\t\tdata.student.number = number;\r\n\t\t\tdata.student.birthday = birthday?.toJSON();\r\n\t\t\tdata.year_id = years?.find((year) => year.current)?.id!;\r\n\t\t\tawait (mode === 'Add' ? admissionService.create(data) : admissionService.update(id, data));\r\n\t\t\ttoastr.success('Admission has been saved successfully.');\r\n\t\t\tsetBirthday(null);\r\n\t\t\treset();\r\n\t\t} catch (error) {\r\n\t\t\tif (error.response?.status === 409) {\r\n\t\t\t\tif (await Asker.save(error.response?.data?.message)) {\r\n\t\t\t\t\tdata.force = true;\r\n\t\t\t\t\tawait submit(data);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log('haha');\r\n\t\t\t\thandleError(error);\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tsetProcessing(false);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (match.path.includes('edit')) {\r\n\t\t\tfetch(match.params.id);\r\n\t\t} else {\r\n\t\t\tuserService.fetch().then((users) => {\r\n\t\t\t\tsetValue(\r\n\t\t\t\t\t'student.uuid',\r\n\t\t\t\t\t`student-${`${users.filter((user) => user.role === 'Student').length + 1}`.padStart(\r\n\t\t\t\t\t\t5,\r\n\t\t\t\t\t\t'0'\r\n\t\t\t\t\t)}-${new Date().getFullYear()}`\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t}\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className='container-fluid'>\r\n\t\t\t<div className='card'>\r\n\t\t\t\t<div className='card-body'>\r\n\t\t\t\t\t<h5 className='card-title'>{mode} Admission</h5>\r\n\t\t\t\t\t<form onSubmit={handleSubmit(submit)}>\r\n\t\t\t\t\t\t<div className='form-row'>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='first_name'>First Name</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t{...register('student.first_name')}\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\tid='first_name'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='year_id'>School Year</label>\r\n\t\t\t\t\t\t\t\t<select id='year_id' className='form-control' disabled>\r\n\t\t\t\t\t\t\t\t\t{years\r\n\t\t\t\t\t\t\t\t\t\t?.filter((year) => year.current)\r\n\t\t\t\t\t\t\t\t\t\t.map((year, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<option value={year.id} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{year.start} - {year.end}\r\n\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='middle_name'>Middle Name</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t{...register('student.middle_name')}\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\tid='middle_name'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='uuid'>Student Number</label>\r\n\t\t\t\t\t\t\t\t<input {...register('student.uuid')} type='text' id='uuid' className='form-control' readOnly />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='last_name'>Last Name</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t{...register('student.last_name')}\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\tid='last_name'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='address'>Address</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t{...register('student.address')}\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\tid='address'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='gender'>Gender</label>\r\n\t\t\t\t\t\t\t\t<select {...register('student.gender')} id='gender' className='form-control' disabled={processing}>\r\n\t\t\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t<option value='Male'>Male</option>\r\n\t\t\t\t\t\t\t\t\t<option value='Female'>Female</option>\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='email'>Email Address</label>\r\n\t\t\t\t\t\t\t\t<input {...register('student.email')} type='email' id='email' className='form-control' />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='birthday'>Birthday</label>\r\n\t\t\t\t\t\t\t\t<Flatpickr\r\n\t\t\t\t\t\t\t\t\tvalue={birthday || undefined}\r\n\t\t\t\t\t\t\t\t\tid='birthday'\r\n\t\t\t\t\t\t\t\t\toptions={{\r\n\t\t\t\t\t\t\t\t\t\tmaxDate: dayjs()\r\n\t\t\t\t\t\t\t\t\t\t\t.year(new Date().getFullYear() - 15)\r\n\t\t\t\t\t\t\t\t\t\t\t.toDate(),\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tonChange={(dates) => {\r\n\t\t\t\t\t\t\t\t\t\tif (dates.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetBirthday(dates[0]);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='number'>Phone Number</label>\r\n\t\t\t\t\t\t\t\t<InputMask\r\n\t\t\t\t\t\t\t\t\tmask='0\\999-999-9999'\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\tid='number'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t\tvalue={number}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => setNumber(e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='col-12 d-flex'>\r\n\t\t\t\t\t\t\t\t<i className='ml-auto'>Student user account credentials will be sent via email.</i>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='fathers_name'>Name of Father</label>\r\n\t\t\t\t\t\t\t\t<input {...register('student.fathers_name')} type='text' id='fathers_name' className='form-control' />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='mothers_name'>Name of Mother</label>\r\n\t\t\t\t\t\t\t\t<input {...register('student.mothers_name')} type='text' id='mothers_name' className='form-control' />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='fathers_occupation'>Occupation of Father</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t{...register('student.fathers_occupation')}\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\tid='fathers_occupation'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='mothers_occupation'>Occupation of Mother</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t{...register('student.mothers_occupation')}\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\tid='mothers_occupation'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='course_id'>Course</label>\r\n\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\t{...register('course_id')}\r\n\t\t\t\t\t\t\t\t\tid='course_id'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tconst id = e.target.value.toNumber();\r\n\t\t\t\t\t\t\t\t\t\tconst course = courses?.find((course) => course.id === id);\r\n\t\t\t\t\t\t\t\t\t\tif (course) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetCourse(course);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetCourse(null);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t{courses\r\n\t\t\t\t\t\t\t\t\t\t?.filter((course) => course.open)\r\n\t\t\t\t\t\t\t\t\t\t.map((course, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<option value={course.id} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{course.description}\r\n\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{course && course.majors && course.majors.length > 0 ? (\r\n\t\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t\t<label htmlFor='major_id'>Major</label>\r\n\t\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\t\tid='major_id'\r\n\t\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetMajorID(e.target.value.toNumber());\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tvalue={`${majorID}`}>\r\n\t\t\t\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t\t{course.majors.map((major, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<option value={major.id} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{major.name}\r\n\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='term'>Term</label>\r\n\t\t\t\t\t\t\t\t<div className='row'>\r\n\t\t\t\t\t\t\t\t\t<div className='col-12 col-md-4'>\r\n\t\t\t\t\t\t\t\t\t\t<div className='custom-control custom-radio'>\r\n\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t{...register('term')}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype='radio'\r\n\t\t\t\t\t\t\t\t\t\t\t\tid='1st-semester'\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='custom-control-input'\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue='1st Semester'\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<label className='custom-control-label' htmlFor='1st-semester'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t1st Semester\r\n\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='col-12 col-md-4'>\r\n\t\t\t\t\t\t\t\t\t\t<div className='custom-control custom-radio'>\r\n\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t{...register('term')}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype='radio'\r\n\t\t\t\t\t\t\t\t\t\t\t\tid='2nd-semester'\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='custom-control-input'\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue='2nd Semester'\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<label className='custom-control-label' htmlFor='2nd-semester'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t2nd Semester\r\n\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='col-12 col-md-4'>\r\n\t\t\t\t\t\t\t\t\t\t<div className='custom-control custom-radio'>\r\n\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t{...register('term')}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype='radio'\r\n\t\t\t\t\t\t\t\t\t\t\t\tid='summer'\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='custom-control-input'\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue='Summer'\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<label className='custom-control-label' htmlFor='summer'>\r\n\t\t\t\t\t\t\t\t\t\t\t\tSummer\r\n\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='level'>Year Level</label>\r\n\t\t\t\t\t\t\t\t<select {...register('level')} id='level' className='form-control'>\r\n\t\t\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t<option value='1st'>1st</option>\r\n\t\t\t\t\t\t\t\t\t<option value='2nd'>2nd</option>\r\n\t\t\t\t\t\t\t\t\t<option value='3rd'>3rd</option>\r\n\t\t\t\t\t\t\t\t\t<option value='4th'>4th</option>\r\n\t\t\t\t\t\t\t\t\t<option value='5th'>5th</option>\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='status'>Student Status</label>\r\n\t\t\t\t\t\t\t\t<select {...register('status')} id='status' className='form-control'>\r\n\t\t\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t<option value='Regular'>Regular</option>\r\n\t\t\t\t\t\t\t\t\t<option value='Irregular'>Irregular</option>\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='form-group d-flex'>\r\n\t\t\t\t\t\t\t<button type='button' className='btn btn-secondary' onClick={() => history.goBack()} disabled={processing}>\r\n\t\t\t\t\t\t\t\tReturn\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button type='submit' className='btn btn-primary ml-auto' disabled={processing}>\r\n\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Form;\r\n","import React, { FC, useEffect } from 'react';\r\nimport Datatable from 'react-data-table-component';\r\nimport { useState } from 'react';\r\nimport { State } from '../../Libraries/State';\r\nimport { outIf } from '../../helpers';\r\n\r\nexport type TableProps = {\r\n\ttitle: string;\r\n\tcolumns: { title: string; accessor: string; minWidth?: string }[];\r\n\tbuttons?: any;\r\n\tloading: boolean;\r\n\tonRefresh: () => void;\r\n\titems: any[];\r\n\tmisc?: any;\r\n};\r\n\r\nconst Table: FC<TableProps> = ({ columns, title, buttons, loading, onRefresh, items, misc }) => {\r\n\tconst state = State.getInstance();\r\n\tconst [mode, setMode] = useState(state.get<string>('mode') || 'dark');\r\n\tconst [data, setData] = useState(items);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetData(items);\r\n\t}, [items]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst key = state.listen<string>('mode', (mode) => setMode(mode));\r\n\r\n\t\treturn () => {\r\n\t\t\tstate.unlisten(key);\r\n\t\t};\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className='container-fluid'>\r\n\t\t\t<div className='card shadow'>\r\n\t\t\t\t<div className='card-header'>\r\n\t\t\t\t\t<div className='container-fluid'>\r\n\t\t\t\t\t\t<div className='row'>\r\n\t\t\t\t\t\t\t<div className='col-12 d-flex align-items-center'>\r\n\t\t\t\t\t\t\t\t<h4 className='card-title mb-0'>{title}</h4>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName='btn btn-info btn-sm ml-auto'\r\n\t\t\t\t\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\tonRefresh();\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\ttitle='Refresh'>\r\n\t\t\t\t\t\t\t\t\t<i className={`fas fa-sync-alt ${outIf(loading, 'fa-spin')}`}></i>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t{buttons}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{misc ? <div className='col-12'>{misc}</div> : null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={`card-body table-responsive`}>\r\n\t\t\t\t\t<Datatable\r\n\t\t\t\t\t\tcolumns={columns.map((column) => ({\r\n\t\t\t\t\t\t\tname: column.title,\r\n\t\t\t\t\t\t\tselector: ((row: any) => row[column.accessor]) as any,\r\n\t\t\t\t\t\t\tsortable: true,\r\n\t\t\t\t\t\t\t...column,\r\n\t\t\t\t\t\t}))}\r\n\t\t\t\t\t\tdata={data}\r\n\t\t\t\t\t\tpagination\r\n\t\t\t\t\t\tfixedHeader\r\n\t\t\t\t\t\tsubHeader\r\n\t\t\t\t\t\tsubHeaderComponent={\r\n\t\t\t\t\t\t\t<div className='d-flex align-items-center'>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\tplaceholder='Search'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tconst text = e.target.value;\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (text.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetData(\r\n\t\t\t\t\t\t\t\t\t\t\t\titems.filter((item) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (const key of Object.keys(item)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst value = item[key];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (value && value.toString().includes(text)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetData(items);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttheme={mode === 'dark' ? 'dark' : 'default'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Table;\r\n","import React, { FC } from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { Link } from 'react-router-dom';\r\nimport { UserContract } from '../../Contracts/user.contract';\r\nimport { handleError, Asker } from '../../helpers';\r\nimport { useURL } from '../../hooks';\r\nimport { State } from '../../Libraries/State';\r\nimport { admissionService } from '../../Services/admission.service';\r\nimport { userService } from '../../Services/user.service';\r\nimport Table from '../Shared/Table';\r\n\r\ntype Props = {};\r\n\r\nconst List: FC<Props> = (props) => {\r\n\tconst { data: items, isFetching: loading, isError, error, refetch } = useQuery('admissions', () => admissionService.fetch());\r\n\r\n\tconst url = useURL();\r\n\r\n\tconst update = async (student: UserContract) => {\r\n\t\ttry {\r\n\t\t\tawait userService.update(student.id, { active: !student.active });\r\n\t\t\ttoastr.success(`Student ${student.active ? 'disabled' : 'enabled'} successfully.`);\r\n\t\t\trefetch();\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t}\r\n\t};\r\n\r\n\tif (isError) {\r\n\t\thandleError(error);\r\n\t}\r\n\r\n\tconst deleteItem = async (id: any) => {\r\n\t\ttry {\r\n\t\t\tif (await Asker.danger('Are you sure you want to delete this Admission?')) {\r\n\t\t\t\tawait admissionService.delete(id);\r\n\t\t\t\ttoastr.info('Admission has been deleted.', 'Notice');\r\n\t\t\t\trefetch();\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst user = State.getInstance().get<UserContract>('user');\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Student ID Number',\r\n\t\t\taccessor: 'id_number',\r\n\t\t\tminWidth: '160px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Student',\r\n\t\t\taccessor: 'student',\r\n\t\t\tminWidth: '250px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Gender',\r\n\t\t\taccessor: 'gender',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Course',\r\n\t\t\taccessor: 'course',\r\n\t\t\tminWidth: '350px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Year Level',\r\n\t\t\taccessor: 'level',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Semester',\r\n\t\t\taccessor: 'term',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Requirements',\r\n\t\t\taccessor: 'requirements',\r\n\t\t\tminWidth: '200px',\r\n\t\t},\r\n\t];\r\n\r\n\tif (user?.role === 'Registrar') {\r\n\t\tcolumns.push({\r\n\t\t\ttitle: 'Actions',\r\n\t\t\taccessor: 'actions',\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Table\r\n\t\t\tonRefresh={() => refetch()}\r\n\t\t\ttitle='Admissions'\r\n\t\t\tloading={loading}\r\n\t\t\titems={\r\n\t\t\t\titems\r\n\t\t\t\t\t?.filter((admission) => !admission.student?.active && !admission.done)\r\n\t\t\t\t\t.map((admission) => ({\r\n\t\t\t\t\t\t...admission,\r\n\t\t\t\t\t\tid_number: admission.student?.uuid,\r\n\t\t\t\t\t\tstudent: `${admission.student?.last_name}, ${admission.student?.first_name} ${\r\n\t\t\t\t\t\t\tadmission.student?.middle_name || ''\r\n\t\t\t\t\t\t}`,\r\n\t\t\t\t\t\tgender: admission.student?.gender,\r\n\t\t\t\t\t\tcourse: `${admission.course?.code}${admission.major ? ` - Major in ${admission.major.name}` : ''}`,\r\n\t\t\t\t\t\trequirements: admission.requirements?.map((requirement, index) => (\r\n\t\t\t\t\t\t\t<span className='d-block' key={index}>\r\n\t\t\t\t\t\t\t\t{requirement}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t)),\r\n\t\t\t\t\t\tactions:\r\n\t\t\t\t\t\t\tuser?.role === 'Registrar' ? (\r\n\t\t\t\t\t\t\t\t<div style={{ minWidth: '350px' }}>\r\n\t\t\t\t\t\t\t\t\t<Link to={url(`${admission.id}/edit`)} className='btn btn-warning btn-sm mx-1' title='Edit'>\r\n\t\t\t\t\t\t\t\t\t\t<i className='fas fa-edit'></i>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName={`btn btn-${admission.student?.active ? 'danger' : 'info'} btn-sm mx-1`}\r\n\t\t\t\t\t\t\t\t\t\tonClick={async (e) => {\r\n\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t\tawait Asker.notice(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t`Are you sure you want to ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tadmission.student?.active ? 'unconfirm' : 'confirm'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} this student?`\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tupdate(admission.student!);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\ttitle={admission.student?.active ? 'Unconfirm' : 'Confirm'}>\r\n\t\t\t\t\t\t\t\t\t\t<i className={`fas fa-user-${admission.student?.active ? 'times' : 'check'}`}></i>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='btn btn-danger btn-sm mx-1'\r\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\tdeleteItem(admission.id);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<i className='fas fa-trash'></i>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) : null,\r\n\t\t\t\t\t})) || []\r\n\t\t\t}\r\n\t\t\tcolumns={columns}\r\n\t\t\tbuttons={\r\n\t\t\t\t<>\r\n\t\t\t\t\t{user?.role === 'Registrar' ? (\r\n\t\t\t\t\t\t<Link to={url(`add`)} className='btn btn-primary btn-sm ml-2'>\r\n\t\t\t\t\t\t\t<i className='fas fa-plus'></i>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default List;\r\n","import React, { FC } from 'react';\r\nimport { Route, RouteProps, Switch } from 'react-router-dom';\r\nimport { useURL } from '../../hooks';\r\nimport Form from './Form';\r\nimport List from './List';\r\n\r\ntype Props = {};\r\n\r\nconst Admissions: FC<Props> = (props) => {\r\n\tconst url = useURL();\r\n\r\n\tconst routes: RouteProps[] = [\r\n\t\t{\r\n\t\t\tpath: url('/'),\r\n\t\t\texact: true,\r\n\t\t\tcomponent: List,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url('/add'),\r\n\t\t\tcomponent: Form,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url('/:id/edit'),\r\n\t\t\tcomponent: Form,\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<Switch>\r\n\t\t\t{routes.map((route, index) => (\r\n\t\t\t\t<Route {...route} key={index} />\r\n\t\t\t))}\r\n\t\t</Switch>\r\n\t);\r\n};\r\n\r\nexport default Admissions;\r\n","import axios from 'axios';\r\nimport React, { FC, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { handleError } from '../helpers';\r\n\r\ntype Props = {};\r\n\r\ntype Inputs = {\r\n\told_password: string;\r\n\tnew_password: string;\r\n};\r\n\r\nconst ChangePassword: FC<Props> = (props) => {\r\n\tconst [processing, setProcessing] = useState(false);\r\n\tconst { register, handleSubmit } = useForm<Inputs>();\r\n\r\n\tconst submit = async (data: Inputs) => {\r\n\t\tsetProcessing(true);\r\n\t\ttry {\r\n\t\t\tawait axios.post('/auth/change-password', data);\r\n\t\t\ttoastr.success('Password changed successfully.');\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t} finally {\r\n\t\t\tsetProcessing(false);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className='container-fluid d-flex'>\r\n\t\t\t<div className='mx-auto'>\r\n\t\t\t\t<form onSubmit={handleSubmit(submit)}>\r\n\t\t\t\t\t<div className='form-group'>\r\n\t\t\t\t\t\t<label htmlFor='old_password'>Old Password</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t{...register('old_password')}\r\n\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\tid='old_password'\r\n\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='form-group'>\r\n\t\t\t\t\t\t<label htmlFor='new_password'>New Password</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t{...register('new_password')}\r\n\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\tid='new_password'\r\n\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\tpattern='^(?=\\P{Ll}*\\p{Ll})(?=\\P{Lu}*\\p{Lu})(?=\\P{N}*\\p{N})(?=[\\p{L}\\p{N}]*[^\\p{L}\\p{N}])[\\s\\S]{8,}$'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<small className='form-text text-muted'>\r\n\t\t\t\t\t\t\tPassword must contain atleast uppercase and lowercase letters, numbers and special characters.\r\n\t\t\t\t\t\t</small>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='form-group'>\r\n\t\t\t\t\t\t<button type='submit' className='btn btn-primary btn-sm' disabled={processing}>\r\n\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ChangePassword;\r\n","import React, { FC, useEffect, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useHistory, useRouteMatch } from 'react-router';\r\nimport { CourseContract } from '../../Contracts/course.contract';\r\nimport { MajorContract } from '../../Contracts/major.contract';\r\nimport { Asker, handleError, setValues } from '../../helpers';\r\nimport { useArray, useMode } from '../../hooks';\r\nimport { courseService } from '../../Services/course.service';\r\n\r\ntype Props = {};\r\n\r\ntype Inputs = CourseContract & { force: boolean };\r\n\r\nconst Form: FC<Props> = (props) => {\r\n\tconst [processing, setProcessing] = useState(false);\r\n\tconst [mode, setMode] = useMode();\r\n\tconst { register, setValue, handleSubmit, reset } = useForm<Inputs>({\r\n\t\tdefaultValues: {\r\n\t\t\tforce: false,\r\n\t\t},\r\n\t});\r\n\tconst [id, setID] = useState(-1);\r\n\tconst [majors, setMajors] = useArray<MajorContract>();\r\n\tconst history = useHistory();\r\n\tconst match = useRouteMatch<{ id: string }>();\r\n\r\n\tconst fetch = async (id: any) => {\r\n\t\ttry {\r\n\t\t\tconst data = await courseService.fetchOne(id);\r\n\t\t\tsetID(data.id!);\r\n\t\t\tsetValues(setValue, data);\r\n\t\t\tsetMajors(data.majors!);\r\n\t\t\tsetMode('Edit');\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t\thistory.goBack();\r\n\t\t}\r\n\t};\r\n\r\n\tconst submit = async (data: Inputs) => {\r\n\t\tconst formats = [/[A-Z]{4}/g, /[A-Z]{4} - [A-Z]{1,}/g];\r\n\t\tfor (const format of formats) {\r\n\t\t\tif (format.test(data.code)) {\r\n\t\t\t\tsetProcessing(true);\r\n\t\t\t\ttry {\r\n\t\t\t\t\tdata.majors = majors;\r\n\t\t\t\t\tawait (mode === 'Add' ? courseService.create(data) : courseService.update(id, data));\r\n\t\t\t\t\ttoastr.success('Course has been saved successfully.');\r\n\t\t\t\t\tsetMajors([]);\r\n\t\t\t\t\treturn reset();\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tif (error.response?.status === 409) {\r\n\t\t\t\t\t\tif (await Asker.save(error.response?.data?.message)) {\r\n\t\t\t\t\t\t\tdata.force = true;\r\n\t\t\t\t\t\t\tawait submit(data);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\thandleError(error);\r\n\t\t\t\t\t}\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tsetProcessing(false);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn toastr.error('Course Code does not follow correct format.');\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (match.path.includes('edit')) {\r\n\t\t\tfetch(match.params.id);\r\n\t\t}\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className='container-fluid'>\r\n\t\t\t<div className='card'>\r\n\t\t\t\t<div className='card-body'>\r\n\t\t\t\t\t<h5 className='card-title'>{mode} Course</h5>\r\n\t\t\t\t\t<form onSubmit={handleSubmit(submit)}>\r\n\t\t\t\t\t\t<div className='form-group'>\r\n\t\t\t\t\t\t\t<label htmlFor='code'>Course Code</label>\r\n\t\t\t\t\t\t\t<input {...register('code')} type='text' id='code' className='form-control' disabled={processing} />\r\n\t\t\t\t\t\t\t<small className='form-text text-muted'>\r\n\t\t\t\t\t\t\t\tCourse code may not be editable in the future, be careful on your entry.\r\n\t\t\t\t\t\t\t</small>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='form-group'>\r\n\t\t\t\t\t\t\t<label htmlFor='description'>Course Description</label>\r\n\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\t{...register('description')}\r\n\t\t\t\t\t\t\t\tid='description'\r\n\t\t\t\t\t\t\t\tcols={30}\r\n\t\t\t\t\t\t\t\trows={4}\r\n\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\tdisabled={processing}></textarea>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='form-group'>\r\n\t\t\t\t\t\t\t<div className='custom-control custom-checkbox'>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t{...register('open')}\r\n\t\t\t\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\t\t\t\tclassName='custom-control-input'\r\n\t\t\t\t\t\t\t\t\tid='open'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<label className='custom-control-label' htmlFor='open'>\r\n\t\t\t\t\t\t\t\t\tOpen for Enrollment\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='form-group'>\r\n\t\t\t\t\t\t\t<h4>Majors</h4>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName='btn btn-info btn-sm'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\tmajors.push({ name: '', course_id: 0, short_name: '' });\r\n\t\t\t\t\t\t\t\t\tsetMajors([...majors]);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tAdd\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<small className='my-3 form-text text-muted'>\r\n\t\t\t\t\t\t\t\tExample: <br />\r\n\t\t\t\t\t\t\t\tName: 'Mathematics'\r\n\t\t\t\t\t\t\t\t<br /> Short Name: 'M'\r\n\t\t\t\t\t\t\t</small>\r\n\t\t\t\t\t\t\t<div className='row'>\r\n\t\t\t\t\t\t\t\t{majors.map((major, index) => (\r\n\t\t\t\t\t\t\t\t\t<div className='col-12 col-md-6 col-lg-4 col-xl-3 p-2' key={index}>\r\n\t\t\t\t\t\t\t\t\t\t<div className='p-2 border rounded'>\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='btn btn-danger btn-sm mb-2'\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmajors.splice(index, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetMajors([...majors]);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\tRemove\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='my-2'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h5 className='mb-0'>Major {index + 1}</h5>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='form-group'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<label htmlFor={`name-${index}`}>Name</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tid={`name-${index}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmajor.name = e.target.value;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmajors.splice(index, 1, major);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetMajors([...majors]);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={major.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='form-group'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<label htmlFor={`short-name-${index}`}>Short Name</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tid={`short-name-${index}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmajor.short_name = e.target.value;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmajors.splice(index, 1, major);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetMajors([...majors]);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={major.short_name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='form-group d-flex'>\r\n\t\t\t\t\t\t\t<button type='button' className='btn btn-secondary' onClick={() => history.goBack()} disabled={processing}>\r\n\t\t\t\t\t\t\t\tReturn\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button type='submit' className='btn btn-primary ml-auto' disabled={processing}>\r\n\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Form;\r\n","import React, { FC } from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { Link } from 'react-router-dom';\r\nimport { UserContract } from '../../Contracts/user.contract';\r\nimport { handleError, Asker } from '../../helpers';\r\nimport { useURL } from '../../hooks';\r\nimport { State } from '../../Libraries/State';\r\nimport { courseService } from '../../Services/course.service';\r\nimport Table from '../Shared/Table';\r\n\r\ntype Props = {};\r\n\r\nconst List: FC<Props> = (props) => {\r\n\tconst { data: items, isFetching: loading, isError, error, refetch } = useQuery('courses', () => courseService.fetch());\r\n\r\n\tconst url = useURL();\r\n\r\n\tif (isError) {\r\n\t\thandleError(error);\r\n\t}\r\n\r\n\tconst deleteItem = async (id: any) => {\r\n\t\ttry {\r\n\t\t\tif (await Asker.danger('Are you sure you want to delete this Course?')) {\r\n\t\t\t\tawait courseService.delete(id);\r\n\t\t\t\ttoastr.info('Course has been deleted.', 'Notice');\r\n\t\t\t\trefetch();\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst user = State.getInstance().get<UserContract>('user');\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Course Code',\r\n\t\t\taccessor: 'code',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Course Description',\r\n\t\t\taccessor: 'description',\r\n\t\t\tminWidth: '350px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Majors',\r\n\t\t\taccessor: 'majors',\r\n\t\t\tminWidth: '250px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Status',\r\n\t\t\taccessor: 'open',\r\n\t\t\tminWidth: '150px',\r\n\t\t},\r\n\t];\r\n\r\n\tif (user?.role === 'Registrar') {\r\n\t\tcolumns.push({\r\n\t\t\ttitle: 'Actions',\r\n\t\t\taccessor: 'actions',\r\n\t\t\tminWidth: '150px',\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Table\r\n\t\t\tonRefresh={() => refetch()}\r\n\t\t\ttitle='Courses'\r\n\t\t\tloading={loading}\r\n\t\t\titems={\r\n\t\t\t\titems?.map((course) => ({\r\n\t\t\t\t\t...course,\r\n\t\t\t\t\topen: course.open ? (\r\n\t\t\t\t\t\t<span className='badge badge-success'>Open for Enrollment</span>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<span className='badge badge-danger'>Not Open for Enrollment</span>\r\n\t\t\t\t\t),\r\n\t\t\t\t\tmajors: course.majors?.map((major, index) => (\r\n\t\t\t\t\t\t<span className='d-block' key={index}>\r\n\t\t\t\t\t\t\t{major.name}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)),\r\n\t\t\t\t\tactions:\r\n\t\t\t\t\t\tuser?.role === 'Registrar' ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Link to={url(`${course.id}/edit`)} className='btn btn-warning btn-sm mx-1'>\r\n\t\t\t\t\t\t\t\t\t<i className='fas fa-edit'></i>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName='btn btn-danger btn-sm mx-1'\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\tdeleteItem(course.id);\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<i className='fas fa-trash'></i>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : null,\r\n\t\t\t\t})) || []\r\n\t\t\t}\r\n\t\t\tcolumns={columns}\r\n\t\t\tbuttons={\r\n\t\t\t\t<>\r\n\t\t\t\t\t{user?.role === 'Registrar' ? (\r\n\t\t\t\t\t\t<Link to={url(`add`)} className='btn btn-primary btn-sm ml-2'>\r\n\t\t\t\t\t\t\t<i className='fas fa-plus'></i>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default List;\r\n","import React, { FC } from 'react';\r\nimport { Route, RouteProps, Switch } from 'react-router-dom';\r\nimport { useURL } from '../../hooks';\r\nimport Form from './Form';\r\nimport List from './List';\r\n\r\ntype Props = {};\r\n\r\nconst Courses: FC<Props> = (props) => {\r\n\tconst url = useURL();\r\n\r\n\tconst routes: RouteProps[] = [\r\n\t\t{\r\n\t\t\tpath: url('/'),\r\n\t\t\texact: true,\r\n\t\t\tcomponent: List,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url('/add'),\r\n\t\t\tcomponent: Form,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url('/:id/edit'),\r\n\t\t\tcomponent: Form,\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<Switch>\r\n\t\t\t{routes.map((route, index) => (\r\n\t\t\t\t<Route {...route} key={index} />\r\n\t\t\t))}\r\n\t\t</Switch>\r\n\t);\r\n};\r\n\r\nexport default Courses;\r\n","import axios from 'axios';\r\nimport React, { FC, useEffect, useState } from 'react';\r\nimport { CourseContract } from '../../Contracts/course.contract';\r\nimport { UserContract } from '../../Contracts/user.contract';\r\nimport { outIf } from '../../helpers';\r\nimport { State } from '../../Libraries/State';\r\nimport { Chart, registerables } from 'chart.js';\r\nimport { SubjectContract } from '../../Contracts/subject.contract';\r\nChart.register(...registerables);\r\n\r\ntype Props = {};\r\n\r\nconst Analytics: FC<Props> = (props) => {\r\n\tconst user = State.getInstance().get<UserContract>('user');\r\n\tconst [data, setData] = useState({\r\n\t\tstudents: {\r\n\t\t\told: 0,\r\n\t\t\tnew: 0,\r\n\t\t\ttotal: 0,\r\n\t\t},\r\n\t\tcourses: [] as CourseContract[],\r\n\t\tgenders: {\r\n\t\t\tmales: 0,\r\n\t\t\tfemales: 0,\r\n\t\t},\r\n\t\tgraduates: 0,\r\n\t\tenrollees: {\r\n\t\t\tpending: 0,\r\n\t\t},\r\n\t\tsubjects: [] as SubjectContract[],\r\n\t});\r\n\r\n\tconst fetch = async () => {\r\n\t\ttry {\r\n\t\t\tconst [students, courses, genders, graduates, enrollees, subjects] = await Promise.all([\r\n\t\t\t\taxios.get<{ old: number; new: number; total: number }>('/analytics/students').then((response) => response.data),\r\n\t\t\t\taxios.get<CourseContract[]>('/analytics/courses').then((response) => response.data),\r\n\t\t\t\taxios.get<{ males: number; females: number }>('/analytics/genders').then((response) => response.data),\r\n\t\t\t\taxios.get<number>('/analytics/graduates').then((response) => response.data),\r\n\t\t\t\taxios.get<{ pending: number }>('/analytics/enrollees').then((response) => response.data),\r\n\t\t\t\taxios.get<SubjectContract[]>('/analytics/subjects').then((response) => response.data),\r\n\t\t\t]);\r\n\t\t\tsetData({\r\n\t\t\t\tstudents,\r\n\t\t\t\tcourses,\r\n\t\t\t\tsubjects,\r\n\t\t\t\tgenders,\r\n\t\t\t\tgraduates,\r\n\t\t\t\tenrollees,\r\n\t\t\t});\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcourses,\r\n\t\t\t\tsubjects,\r\n\t\t\t};\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\treturn {\r\n\t\t\t\tcourses: [],\r\n\t\t\t\tsubjects: [],\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tconst charts: Chart<any>[] = [];\r\n\r\n\t\tfetch().then(({ courses }) => {\r\n\t\t\ttry {\r\n\t\t\t\tcharts.push(\r\n\t\t\t\t\tnew Chart($('#course') as any, {\r\n\t\t\t\t\t\ttype: 'bar',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tlabels: courses.map((course) => course.code),\r\n\t\t\t\t\t\t\tdatasets: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tlabel: '# of Students',\r\n\t\t\t\t\t\t\t\t\tdata: courses.map((course) => course.admissions_count),\r\n\t\t\t\t\t\t\t\t\tbackgroundColor: [\r\n\t\t\t\t\t\t\t\t\t\t'rgba(255, 99, 132, 0.2)',\r\n\t\t\t\t\t\t\t\t\t\t'rgba(54, 162, 235, 0.2)',\r\n\t\t\t\t\t\t\t\t\t\t'rgba(255, 206, 86, 0.2)',\r\n\t\t\t\t\t\t\t\t\t\t'rgba(75, 192, 192, 0.2)',\r\n\t\t\t\t\t\t\t\t\t\t'rgba(153, 102, 255, 0.2)',\r\n\t\t\t\t\t\t\t\t\t\t'rgba(255, 159, 64, 0.2)',\r\n\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\tborderColor: [\r\n\t\t\t\t\t\t\t\t\t\t'rgba(255, 99, 132, 1)',\r\n\t\t\t\t\t\t\t\t\t\t'rgba(54, 162, 235, 1)',\r\n\t\t\t\t\t\t\t\t\t\t'rgba(255, 206, 86, 1)',\r\n\t\t\t\t\t\t\t\t\t\t'rgba(75, 192, 192, 1)',\r\n\t\t\t\t\t\t\t\t\t\t'rgba(153, 102, 255, 1)',\r\n\t\t\t\t\t\t\t\t\t\t'rgba(255, 159, 64, 1)',\r\n\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\tborderWidth: 1,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\toptions: {\r\n\t\t\t\t\t\t\tscales: {\r\n\t\t\t\t\t\t\t\ty: {\r\n\t\t\t\t\t\t\t\t\tbeginAtZero: true,\r\n\t\t\t\t\t\t\t\t\tticks: {\r\n\t\t\t\t\t\t\t\t\t\tprecision: 0,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log('chartjs', error);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tcharts.forEach((chart) => chart.destroy());\r\n\t\t};\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className={`container-fluid ${outIf(user?.role === 'Student', 'd-none')}`}>\r\n\t\t\t<div className='row'>\r\n\t\t\t\t<div className={`col-12 col-md-${user?.role === 'Registrar' ? '3' : '6'}`}>\r\n\t\t\t\t\t<div className='card bg-dark text-white shadow'>\r\n\t\t\t\t\t\t<div className='card-body'>\r\n\t\t\t\t\t\t\t<div className='row align-items-center'>\r\n\t\t\t\t\t\t\t\t<div className='col-3 text-center'>\r\n\t\t\t\t\t\t\t\t\t<span className='circle circle-sm'>\r\n\t\t\t\t\t\t\t\t\t\t<i className='fe fe-16 fe-users mb-0'></i>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className='col pr-0'>\r\n\t\t\t\t\t\t\t\t\t<p className='small mb-0'>Male Students</p>\r\n\t\t\t\t\t\t\t\t\t<span className='text-white h3 mb-0' id='male-students'>\r\n\t\t\t\t\t\t\t\t\t\t{data.genders.males}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={`col-12 col-md-${user?.role === 'Registrar' ? '3' : '6'}`}>\r\n\t\t\t\t\t<div className='card bg-dark text-white shadow'>\r\n\t\t\t\t\t\t<div className='card-body'>\r\n\t\t\t\t\t\t\t<div className='row align-items-center'>\r\n\t\t\t\t\t\t\t\t<div className='col-3 text-center'>\r\n\t\t\t\t\t\t\t\t\t<span className='circle circle-sm'>\r\n\t\t\t\t\t\t\t\t\t\t<i className='fe fe-16 fe-users mb-0'></i>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className='col pr-0'>\r\n\t\t\t\t\t\t\t\t\t<p className='small mb-0'>Female Students</p>\r\n\t\t\t\t\t\t\t\t\t<span className='text-white h3 mb-0' id='female-students'>\r\n\t\t\t\t\t\t\t\t\t\t{data.genders.females}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{user?.role === 'Registrar' ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<div className='col-12 col-md-3'>\r\n\t\t\t\t\t\t\t<div className='card bg-dark text-white shadow'>\r\n\t\t\t\t\t\t\t\t<div className='card-body'>\r\n\t\t\t\t\t\t\t\t\t<div className='row align-items-center'>\r\n\t\t\t\t\t\t\t\t\t\t<div className='col-3 text-center'>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className='circle circle-sm'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className='fe fe-16 fe-users mb-0'></i>\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className='col pr-0'>\r\n\t\t\t\t\t\t\t\t\t\t\t<p className='small mb-0'>Pending Enrollees</p>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className='text-white h3 mb-0' id='pending-enrollees'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{data.enrollees.pending}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='col-12 col-md-3'>\r\n\t\t\t\t\t\t\t<div className='card bg-dark text-white shadow'>\r\n\t\t\t\t\t\t\t\t<div className='card-body'>\r\n\t\t\t\t\t\t\t\t\t<div className='row align-items-center'>\r\n\t\t\t\t\t\t\t\t\t\t<div className='col-3 text-center'>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className='circle circle-sm'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className='fe fe-16 fe-users mb-0'></i>\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className='col pr-0'>\r\n\t\t\t\t\t\t\t\t\t\t\t<p className='small mb-0'>Total Students</p>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className='text-white h3 mb-0' id='total-students'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{data.students.total}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : null}\r\n\t\t\t\t<div className='col-12'>\r\n\t\t\t\t\t<hr className='mt-5' />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='col-12'>\r\n\t\t\t\t\t<div className='card shadow'>\r\n\t\t\t\t\t\t<div className='card-header'>\r\n\t\t\t\t\t\t\t<h4 className='card-title'>Students per Course</h4>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='card-body'>\r\n\t\t\t\t\t\t\t<canvas id='course'></canvas>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Analytics;\r\n","import React, { FC, useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router';\r\nimport { Asker, outIf } from '../../helpers';\r\nimport { State } from '../../Libraries/State';\r\nimport { routes } from '../../routes';\r\n\r\ntype Props = {};\r\n\r\nconst Navbar: FC<Props> = (props) => {\r\n\tconst state = State.getInstance();\r\n\tconst [mode, setMode] = useState(state.get<string>('mode') || 'dark');\r\n\tconst [menu, setMenu] = useState(false);\r\n\tconst history = useHistory();\r\n\r\n\tconst light = document.getElementById('lightTheme')!;\r\n\tconst dark = document.getElementById('darkTheme')!;\r\n\r\n\tuseEffect(() => {\r\n\t\tif (mode === 'dark') {\r\n\t\t\t$('.vertical').addClass('dark');\r\n\t\t\tlight.disable(true);\r\n\t\t\tdark.disable(false);\r\n\t\t} else {\r\n\t\t\t$('.vertical').removeClass('dark');\r\n\t\t\tdark.disable(true);\r\n\t\t\tlight.disable(false);\r\n\t\t}\r\n\t}, [mode, light, dark]);\r\n\r\n\treturn (\r\n\t\t<nav className='topnav navbar navbar-light'>\r\n\t\t\t<button\r\n\t\t\t\ttype='button'\r\n\t\t\t\tclassName='navbar-toggler text-muted mt-2 p-0 mr-3'\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tconst bar = $('.vertical');\r\n\t\t\t\t\tconst roleDisplay = $('#account-role-display');\r\n\t\t\t\t\tif (bar.hasClass('collapsed')) {\r\n\t\t\t\t\t\troleDisplay.removeClass('d-none');\r\n\t\t\t\t\t\tbar.removeClass('collapsed');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\troleDisplay.addClass('d-none');\r\n\t\t\t\t\t\tbar.addClass('collapsed');\r\n\t\t\t\t\t}\r\n\t\t\t\t}}>\r\n\t\t\t\t<i className='fe fe-menu navbar-toggler-icon'></i>\r\n\t\t\t</button>\r\n\t\t\t<ul className='nav'>\r\n\t\t\t\t<li className='nav-item'>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\tclassName='nav-link text-muted my-2'\r\n\t\t\t\t\t\thref='/'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\tif (mode === 'dark') {\r\n\t\t\t\t\t\t\t\tstate.set('mode', 'light');\r\n\t\t\t\t\t\t\t\tsetMode('light');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tstate.set('mode', 'dark');\r\n\t\t\t\t\t\t\t\tsetMode('dark');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<i className='fe fe-sun fe-16'></i>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li className={`nav-item dropdown ${outIf(menu, 'show')}`}>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\tclassName='nav-link dropdown-toggle text-muted pr-0'\r\n\t\t\t\t\t\thref='/'\r\n\t\t\t\t\t\trole='button'\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\tsetMenu(!menu);\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<span className='avatar avatar-sm mt-2'>\r\n\t\t\t\t\t\t\t<img src='/logo.jpg' alt='...' className='avatar-img rounded-circle' />\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<div className={`dropdown-menu dropdown-menu-right ${outIf(menu, 'show')}`}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\tclassName='dropdown-item d-flex align-items-center'\r\n\t\t\t\t\t\t\thref='/'\r\n\t\t\t\t\t\t\tonClick={async (e) => {\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tif (await Asker.notice('Are you sure you want to logout?')) {\r\n\t\t\t\t\t\t\t\t\tstate.remove('user').remove('token');\r\n\t\t\t\t\t\t\t\t\thistory.push(routes.HOME);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<i className='la la-sign-out-alt mr-1'></i>\r\n\t\t\t\t\t\t\t<span>Logout</span>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</nav>\r\n\t);\r\n};\r\n\r\nexport default Navbar;\r\n","import React, { FC } from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { NavLink as Link } from 'react-router-dom';\r\nimport { UserContract } from '../../Contracts/user.contract';\r\nimport { useCurrentSection, useCurrentYear, useURL } from '../../hooks';\r\nimport { State } from '../../Libraries/State';\r\nimport { routes } from '../../routes';\r\nimport { admissionService } from '../../Services/admission.service';\r\n\r\ntype Props = {};\r\n\r\nconst Sidebar: FC<Props> = (props) => {\r\n\tconst { data: admissions } = useQuery('admissions', () => admissionService.fetch());\r\n\tconst url = useURL();\r\n\tconst { data: year } = useCurrentYear();\r\n\r\n\tconst user = State.getInstance().get<UserContract>('user');\r\n\tconst section = useCurrentSection();\r\n\r\n\tconst roles: { [key: string]: string[] } = {\r\n\t\tAdmin: [routes.COURSES, routes.STUDENTS, routes.TEACHERS, routes.REGISTRARS, routes.USERS, routes.MAILS, routes.LOGS],\r\n\t\tRegistrar: [\r\n\t\t\troutes.COURSES,\r\n\t\t\troutes.STUDENTS,\r\n\t\t\troutes.TEACHERS,\r\n\t\t\troutes.SUBJECTS,\r\n\t\t\troutes.SCHEDULES,\r\n\t\t\troutes.ADMISSIONS,\r\n\t\t\troutes.YEARS,\r\n\t\t\troutes.ADMISSION_REQUIREMENTS,\r\n\t\t\troutes.UNITS,\r\n\t\t],\r\n\t\tTeacher: [routes.SUBJECTS],\r\n\t\tStudent: [routes.GRADES, routes.SCHEDULES, routes.PROFILE, routes.ENROLLMENT],\r\n\t};\r\n\r\n\tif (!user) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<aside className='sidebar-left border-right bg-white shadow' id='leftSidebar' data-simplebar>\r\n\t\t\t<a href='/' className='btn collapseSidebar toggle-btn d-lg-none text-muted ml-2 mt-3' data-toggle='toggle'>\r\n\t\t\t\t<i className='fe fe-x'>\r\n\t\t\t\t\t<span className='sr-only'></span>\r\n\t\t\t\t</i>\r\n\t\t\t</a>\r\n\t\t\t<nav className='vertnav navbar navbar-light'>\r\n\t\t\t\t<div className='w-100 mb-4 d-flex flex-column'>\r\n\t\t\t\t\t<Link className='navbar-brand mx-auto mt-2 flex-fill text-center' to={routes.DASHBOARD}>\r\n\t\t\t\t\t\t<img src='/logo.jpg' alt='EMC' className='shadow border rounded-circle' style={{ height: '50px', width: '50px' }} />\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t{year ? (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<span className='mx-auto d-block'>\r\n\t\t\t\t\t\t\t\tS.Y {year.start} - {year.end}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<span className='mx-auto d-block'>{year.semester}</span>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t\t{user.role === 'Student' ? <span className='mx-auto'>{section?.name}</span> : null}\r\n\t\t\t\t</div>\r\n\t\t\t\t<ul className='navbar-nav flex-fill w-100 mb-2'>\r\n\t\t\t\t\t<li className='nav-item'>\r\n\t\t\t\t\t\t<Link to={url('')} className='nav-link' activeClassName='active' exact>\r\n\t\t\t\t\t\t\t<i className='fe fe-home fe-16'></i>\r\n\t\t\t\t\t\t\t<span className='ml-3 item-text'>Dashboard</span>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t{roles[user.role].includes(routes.COURSES) ? (\r\n\t\t\t\t\t\t<li className='nav-item'>\r\n\t\t\t\t\t\t\t<Link to={url(routes.COURSES)} className='nav-link' activeClassName='active'>\r\n\t\t\t\t\t\t\t\t<i className='fe fe-navigation fe-16'></i>\r\n\t\t\t\t\t\t\t\t<span className='ml-3 item-text'>Courses</span>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t\t{!['Student', 'Teacher'].includes(user.role) ? (\r\n\t\t\t\t\t\t<li className='nav-item dropdown'>\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref='/users'\r\n\t\t\t\t\t\t\t\tclassName='dropdown-toggle nav-link collapsed'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t$('#users').collapse('toggle');\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<i className='fe fe-user fe-16'></i>\r\n\t\t\t\t\t\t\t\t<span className='ml-3 item-text'>Users</span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t<ul className='collapse list-unstyled pl-4 w-100' id='users'>\r\n\t\t\t\t\t\t\t\t{roles[user.role].includes(routes.STUDENTS) ? (\r\n\t\t\t\t\t\t\t\t\t<li className='nav-item dropdown'>\r\n\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\thref={url(routes.STUDENTS)}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='nav-link dropdown-toggle collapsed'\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\t\t$('#students').collapse('toggle');\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t<i className='fe fe-user fe-16'></i>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className='ml-3 item-text'>Students</span>\r\n\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t<ul className='collapse list-unstyled pl-4 w-100' id='students'>\r\n\t\t\t\t\t\t\t\t\t\t\t<li className='nav-item'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Link to={url(`${routes.STUDENTS}/new`)} className='nav-link' activeClassName='active'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='fe fe-user fe-16'></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className='ml-3 item-text'>New</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t<li className='nav-item'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Link to={url(`${routes.STUDENTS}/old`)} className='nav-link' activeClassName='active'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='fe fe-user fe-16'></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className='ml-3 item-text'>Old</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t<li className='nav-item'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Link to={url(`${routes.STUDENTS}/behind`)} className='nav-link' activeClassName='active'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='fe fe-user fe-16'></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className='ml-3 item-text'>Behind</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t\t{roles[user.role].includes(routes.TEACHERS) ? (\r\n\t\t\t\t\t\t\t\t\t<li className='nav-item'>\r\n\t\t\t\t\t\t\t\t\t\t<Link to={url(routes.TEACHERS)} className='nav-link' activeClassName='active'>\r\n\t\t\t\t\t\t\t\t\t\t\t<i className='fe fe-user fe-16'></i>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className='ml-3 item-text'>Teachers</span>\r\n\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t\t{roles[user.role].includes(routes.REGISTRARS) ? (\r\n\t\t\t\t\t\t\t\t\t<li className='nav-item'>\r\n\t\t\t\t\t\t\t\t\t\t<Link to={url(routes.REGISTRARS)} className='nav-link' activeClassName='active'>\r\n\t\t\t\t\t\t\t\t\t\t\t<i className='fe fe-user fe-16'></i>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className='ml-3 item-text'>Registrars</span>\r\n\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t\t{roles[user.role].includes(routes.MAILS) ? (\r\n\t\t\t\t\t\t<li className='nav-item d-none'>\r\n\t\t\t\t\t\t\t<Link to={url(routes.MAILS)} className='nav-link' activeClassName='active'>\r\n\t\t\t\t\t\t\t\t<i className='fe fe-mail fe-16'></i>\r\n\t\t\t\t\t\t\t\t<span className='ml-3 item-text'>Email Outbox</span>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t\t{roles[user.role].includes(routes.SUBJECTS) ? (\r\n\t\t\t\t\t\t<li className='nav-item'>\r\n\t\t\t\t\t\t\t<Link to={url(routes.SUBJECTS)} className='nav-link' activeClassName='active'>\r\n\t\t\t\t\t\t\t\t<i className='fe fe-book fe-16'></i>\r\n\t\t\t\t\t\t\t\t<span className='ml-3 item-text'>Subjects</span>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t\t{roles[user.role].includes(routes.SCHEDULES) ? (\r\n\t\t\t\t\t\t<li className='nav-item'>\r\n\t\t\t\t\t\t\t<Link to={url(routes.SCHEDULES)} className='nav-link' activeClassName='active'>\r\n\t\t\t\t\t\t\t\t<i className='fe fe-calendar fe-16'></i>\r\n\t\t\t\t\t\t\t\t<span className='ml-3 item-text'>Schedules</span>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t\t{roles[user.role].includes(routes.ADMISSIONS) ? (\r\n\t\t\t\t\t\t<li className='nav-item'>\r\n\t\t\t\t\t\t\t<Link to={url(routes.ADMISSIONS)} className='nav-link' activeClassName='active'>\r\n\t\t\t\t\t\t\t\t<i className='fe fe-pen-tool fe-16'></i>\r\n\t\t\t\t\t\t\t\t<span className='ml-3 item-text'>\r\n\t\t\t\t\t\t\t\t\tAdmissions\r\n\t\t\t\t\t\t\t\t\t{admissions &&\r\n\t\t\t\t\t\t\t\t\tadmissions.filter((admission) => !admission.done && !admission.student?.active).length > 0 ? (\r\n\t\t\t\t\t\t\t\t\t\t<span className='ml-1 badge badge-danger'>\r\n\t\t\t\t\t\t\t\t\t\t\t{admissions.filter((admission) => !admission.done && !admission.student?.active).length}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t\t{roles[user.role].includes(routes.ADMISSION_REQUIREMENTS) ? (\r\n\t\t\t\t\t\t<li className='nav-item'>\r\n\t\t\t\t\t\t\t<Link to={url(routes.ADMISSION_REQUIREMENTS)} className='nav-link' activeClassName='active'>\r\n\t\t\t\t\t\t\t\t<i className='fe fe-clipboard fe-16'></i>\r\n\t\t\t\t\t\t\t\t<span className='ml-3 item-text'>Admission Requirements</span>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t\t{roles[user.role].includes(routes.YEARS) ? (\r\n\t\t\t\t\t\t<li className='nav-item'>\r\n\t\t\t\t\t\t\t<Link to={url(routes.YEARS)} className='nav-link' activeClassName='active'>\r\n\t\t\t\t\t\t\t\t<i className='fe fe-calendar fe-16'></i>\r\n\t\t\t\t\t\t\t\t<span className='ml-3 item-text'>School Years</span>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t\t{roles[user.role].includes(routes.GRADES) ? (\r\n\t\t\t\t\t\t<li className='nav-item'>\r\n\t\t\t\t\t\t\t<Link to={url(routes.GRADES)} className='nav-link' activeClassName='active'>\r\n\t\t\t\t\t\t\t\t<i className='fe fe-bookmark fe-16'></i>\r\n\t\t\t\t\t\t\t\t<span className='ml-3 item-text'>Grades</span>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t\t{roles[user.role].includes(routes.ENROLLMENT) ? (\r\n\t\t\t\t\t\t<li className='nav-item'>\r\n\t\t\t\t\t\t\t<Link to={url(routes.ENROLLMENT)} className='nav-link' activeClassName='active'>\r\n\t\t\t\t\t\t\t\t<i className='fe fe-book-open fe-16'></i>\r\n\t\t\t\t\t\t\t\t<span className='ml-3 item-text'>Enrollment</span>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t\t{roles[user.role].includes(routes.PROFILE) ? (\r\n\t\t\t\t\t\t<li className='nav-item'>\r\n\t\t\t\t\t\t\t<Link to={url(routes.PROFILE)} className='nav-link' activeClassName='active'>\r\n\t\t\t\t\t\t\t\t<i className='fe fe-user fe-16'></i>\r\n\t\t\t\t\t\t\t\t<span className='ml-3 item-text'>Profile</span>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t\t{roles[user.role].includes(routes.LOGS) ? (\r\n\t\t\t\t\t\t<li className='nav-item'>\r\n\t\t\t\t\t\t\t<Link to={url(routes.LOGS)} className='nav-link' activeClassName='active'>\r\n\t\t\t\t\t\t\t\t<i className='fe fe-book fe-16'></i>\r\n\t\t\t\t\t\t\t\t<span className='ml-3 item-text'>Logs</span>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t\t{roles[user.role].includes(routes.UNITS) ? (\r\n\t\t\t\t\t\t<li className='nav-item'>\r\n\t\t\t\t\t\t\t<Link to={url(routes.UNITS)} className='nav-link' activeClassName='active'>\r\n\t\t\t\t\t\t\t\t<i className='fas fa-graduation-cap fe-16'></i>\r\n\t\t\t\t\t\t\t\t<span className='ml-3 item-text'>Student Units</span>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t\t<li className='nav-item'>\r\n\t\t\t\t\t\t<Link to={url(routes.CHANGE_PASSWORD)} className='nav-link' activeClassName='active'>\r\n\t\t\t\t\t\t\t<i className='fe fe-key fe-16'></i>\r\n\t\t\t\t\t\t\t<span className='ml-3 item-text'>Change Password</span>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t\t<p id='account-role-display'>\r\n\t\t\t\t\tSigned in as: <b>{user?.role}</b>\r\n\t\t\t\t</p>\r\n\t\t\t</nav>\r\n\t\t</aside>\r\n\t);\r\n};\r\n\r\nexport default Sidebar;\r\n","import { SubjectContract } from '../Contracts/subject.contract';\r\nimport { Service } from '../Libraries/Service';\r\n\r\nexport class SubjectService extends Service<SubjectContract> {}\r\n\r\nexport const subjectService = new SubjectService('/subjects');\r\n","import axios from 'axios';\r\nimport React, { createRef, FC, useState } from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { UserContract } from '../../../Contracts/user.contract';\r\nimport { Asker, handleError } from '../../../helpers';\r\nimport { useArray, useCurrentYear } from '../../../hooks';\r\nimport { State } from '../../../Libraries/State';\r\nimport { subjectService } from '../../../Services/subject.service';\r\nimport { userService } from '../../../Services/user.service';\r\n\r\ntype Props = {};\r\n\r\nconst Enrollment: FC<Props> = (props) => {\r\n\tconst [processing, setProcessing] = useState(false);\r\n\tconst [print, setPrint] = useState(false);\r\n\tconst state = State.getInstance();\r\n\tconst temp = state.get<UserContract>('user');\r\n\tconst [selected, setSelected] = useArray<number>();\r\n\tconst [enrolled, setEnrolled] = useArray<number>();\r\n\tconst { data: user, refetch: refetchUser } = useQuery(['user', temp?.id], () => userService.fetchOne(temp?.id), {\r\n\t\tonSuccess(user) {\r\n\t\t\tif (!user.active) {\r\n\t\t\t\ttoastr.info('Your account is currently inactive. Please settle your payment to be reactivated by the registrar.');\r\n\t\t\t}\r\n\t\t\tsetEnrolled(user.subjects?.map((subject) => subject.id!)!);\r\n\t\t},\r\n\t});\r\n\tconst ref = createRef<HTMLDivElement>();\r\n\tconst { data: subjects } = useQuery('subjects', () => subjectService.fetch());\r\n\tconst [selectAll, setSelectAll] = useState(false);\r\n\tconst { data: year } = useCurrentYear();\r\n\r\n\tconst add = (value: number) => {\r\n\t\tselected.push(value);\r\n\t\tsetSelected([...selected]);\r\n\t};\r\n\r\n\tconst remove = (value: number) => {\r\n\t\tconst index = selected.findIndex((number) => number === value);\r\n\t\tselected.splice(index, 1);\r\n\t\tsetSelected([...selected]);\r\n\t};\r\n\r\n\tconst admission = user?.admissions?.find((admission) => admission.year?.current);\r\n\r\n\tconst submit = async () => {\r\n\t\tif (!user?.active) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetProcessing(true);\r\n\t\ttry {\r\n\t\t\tif (await Asker.notice(\"If you continue you can't edit the selected subjects.\")) {\r\n\t\t\t\tawait axios.post(`/users/${user?.id}/subjects`, {\r\n\t\t\t\t\tsubjects: selected,\r\n\t\t\t\t});\r\n\t\t\t\ttoastr.success('Subjects enrolled successfully.');\r\n\t\t\t\tawait refetchUser();\r\n\t\t\t\tstate.set('user', user);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t} finally {\r\n\t\t\tsetProcessing(false);\r\n\t\t}\r\n\t};\r\n\r\n\tif (!user || !admission) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tif (!user.active) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tif (user.enrolled && !print) {\r\n\t\treturn (\r\n\t\t\t<div className='container'>\r\n\t\t\t\t<div className='row'>\r\n\t\t\t\t\t<div className='col-12'>\r\n\t\t\t\t\t\t<div className='card'>\r\n\t\t\t\t\t\t\t<div className='card-header'>\r\n\t\t\t\t\t\t\t\t<p className='card-title'>\r\n\t\t\t\t\t\t\t\t\t{user.last_name}, {user.first_name} {user.middle_name || ''} ({user.uuid})\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<p className='card-text'>\r\n\t\t\t\t\t\t\t\t\tRegistration (S.Y {year?.start} - {year?.end} - {year?.semester})\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='card-body'>\r\n\t\t\t\t\t\t\t\t<div className='container'>\r\n\t\t\t\t\t\t\t\t\t<div className='row'>\r\n\t\t\t\t\t\t\t\t\t\t<div className='col-12 col-md-6 p-2'>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='border rounded shadow p-2'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<b>Status: </b> {admission.status} ({user.allowed_units} Units Allowed)\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className='col-12 col-md-6 p-2'>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='border rounded shadow p-2'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<b>Section: </b> {user.sections?.find((section) => section.year?.current)?.name}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className='col-12 mt-4 text-center'>\r\n\t\t\t\t\t\t\t\t\t\t\t<h2>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className='fas fa-check-circle'></i> You are officially enrolled\r\n\t\t\t\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='btn btn-danger'\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t$('#leftSidebar').addClass('d-none');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t$('.topnav').addClass('d-none');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t$('input').addClass('d-none');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t$('button').addClass('d-none');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetPrint(true);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twindow.print();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$('#leftSidebar').removeClass('d-none');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$('.topnav').removeClass('d-none');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$('input').removeClass('d-none');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$('button').removeClass('d-none');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetPrint(false);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}, 100);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={processing || !user.enrolled}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className='fas fa-scroll'></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\tCertificate of Registration\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div ref={ref} className='container'>\r\n\t\t\t<div className='row'>\r\n\t\t\t\t<div className='col-12 col-md-8 offset-md-2 text-center'>\r\n\t\t\t\t\t<h4>EASTERN MINDORO COLLEGE</h4>\r\n\t\t\t\t\t<p>Bongabong, Oriental Mindoro</p>\r\n\t\t\t\t\t<h6>College Enrollment Slip</h6>\r\n\t\t\t\t\t<p className='mb-0' style={{ fontSize: '1.5rem' }}>\r\n\t\t\t\t\t\t{admission?.course?.description}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t{admission?.major ? <p style={{ fontSize: '1.15rem' }}>Major in {admission.major.name}</p> : null}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className='d-flex mt-5'>\r\n\t\t\t\t<span className='mr-auto'>\r\n\t\t\t\t\t<b>Name:</b> {user.last_name}, {user.first_name} {user.middle_name || ''}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className='ml-auto'>\r\n\t\t\t\t\t<b>Semester:</b> {admission.term}\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div className='d-flex'>\r\n\t\t\t\t<span className='mr-auto'>\r\n\t\t\t\t\t<b>Year Level:</b> {admission.level}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className='ml-auto'>\r\n\t\t\t\t\t<b>Status: </b> {admission.status}\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div className='d-flex mt-3'>\r\n\t\t\t\t<span className='mr-auto'>\r\n\t\t\t\t\t<b>Student Number:</b> {user.uuid}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className='ml-auto'>\r\n\t\t\t\t\t<b>Year:</b> {admission.year?.start} - {admission.year?.end}\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t{!print ? (\r\n\t\t\t\t<div className='d-flex mt-2'>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName={`btn btn-${!selectAll ? 'secondary' : 'danger'} btn-sm`}\r\n\t\t\t\t\t\tdisabled={user.enrolled}\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\tif (subjects) {\r\n\t\t\t\t\t\t\t\tif (!selectAll) {\r\n\t\t\t\t\t\t\t\t\tconst non = subjects\r\n\t\t\t\t\t\t\t\t\t\t.filter((subject) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!print) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst valid =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsubject.level === admission.level &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsubject.term === admission.term &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsubject.course_id === admission.course_id;\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (admission.major_id) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn valid && admission.major_id === subject.major_id;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn valid;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tconst valid =\r\n\t\t\t\t\t\t\t\t\t\t\t\tenrolled.includes(subject.id!) &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tsubject.level === admission.level &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tsubject.term === admission.term &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tsubject.course_id === admission.course_id;\r\n\t\t\t\t\t\t\t\t\t\t\tif (admission.major_id) {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn valid && admission.major_id === subject.major_id;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\treturn valid;\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.filter((subject) => !enrolled.includes(subject.id!));\r\n\t\t\t\t\t\t\t\t\tsetSelected([...selected, ...non.map((subject) => subject.id!)]);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tsetSelected([]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tsetSelectAll(!selectAll);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{!selectAll ? 'Select All' : 'Unselect All'}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t) : null}\r\n\t\t\t<form\r\n\t\t\t\tonSubmit={(e) => {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tsubmit();\r\n\t\t\t\t}}\r\n\t\t\t\tclassName='table-responsive'>\r\n\t\t\t\t<table className='table table-bordered mt-3 w-100' style={{ display: 'table' }}>\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th></th>\r\n\t\t\t\t\t\t\t<th>Subject Code</th>\r\n\t\t\t\t\t\t\t<th>Description</th>\r\n\t\t\t\t\t\t\t<th>Units</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{subjects\r\n\t\t\t\t\t\t\t?.filter((subject) => {\r\n\t\t\t\t\t\t\t\tif (!print) {\r\n\t\t\t\t\t\t\t\t\tconst valid =\r\n\t\t\t\t\t\t\t\t\t\tsubject.level === admission.level &&\r\n\t\t\t\t\t\t\t\t\t\tsubject.term === admission.term &&\r\n\t\t\t\t\t\t\t\t\t\tsubject.course_id === admission.course_id;\r\n\t\t\t\t\t\t\t\t\tif (admission.major_id) {\r\n\t\t\t\t\t\t\t\t\t\treturn valid && admission.major_id === subject.major_id;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn valid;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tconst valid =\r\n\t\t\t\t\t\t\t\t\tenrolled.includes(subject.id!) &&\r\n\t\t\t\t\t\t\t\t\tsubject.level === admission.level &&\r\n\t\t\t\t\t\t\t\t\tsubject.term === admission.term &&\r\n\t\t\t\t\t\t\t\t\tsubject.course_id === admission.course_id &&\r\n\t\t\t\t\t\t\t\t\tsubject.major_id === admission.major_id;\r\n\t\t\t\t\t\t\t\treturn valid;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.map((subject, index) => (\r\n\t\t\t\t\t\t\t\t<tr key={index}>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t{!print ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={selected.find((id) => subject.id === id) !== undefined}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={processing || enrolled.includes(subject.id!) || user.enrolled}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={subject.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst id = e.target.value.toNumber();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (selected.includes(id)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tremove(id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tadd(id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<sup className='ml-1'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i>{enrolled.includes(subject.id!) ? 'Enrolled' : ''}</i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</sup>\r\n\t\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>{subject.code}</td>\r\n\t\t\t\t\t\t\t\t\t<td>{subject.description}</td>\r\n\t\t\t\t\t\t\t\t\t<td>{subject.units}</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td style={{ maxWidth: '30px' }}>Total Units</td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t{subjects\r\n\t\t\t\t\t\t\t\t\t?.filter((subject) => {\r\n\t\t\t\t\t\t\t\t\t\tif (!print) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn selected.includes(subject.id!) || enrolled.includes(subject.id!);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\treturn enrolled.includes(subject.id!);\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.reduce((previous, next) => next.units + previous, 0)}\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t\t{!print ? (\r\n\t\t\t\t\t<div className='form-group mt-2 d-flex'>\r\n\t\t\t\t\t\t<span className='mr-auto'>\r\n\t\t\t\t\t\t\t<button type='submit' className='btn btn-primary btn-sm' disabled={processing || user.enrolled}>\r\n\t\t\t\t\t\t\t\tSave\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className='ml-auto'>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName='btn btn-info btn-sm'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t$('#leftSidebar').addClass('d-none');\r\n\t\t\t\t\t\t\t\t\t$('.topnav').addClass('d-none');\r\n\t\t\t\t\t\t\t\t\t$('input').addClass('d-none');\r\n\t\t\t\t\t\t\t\t\t$('button').addClass('d-none');\r\n\t\t\t\t\t\t\t\t\tsetPrint(true);\r\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\twindow.print();\r\n\t\t\t\t\t\t\t\t\t\t$('#leftSidebar').removeClass('d-none');\r\n\t\t\t\t\t\t\t\t\t\t$('.topnav').removeClass('d-none');\r\n\t\t\t\t\t\t\t\t\t\t$('input').removeClass('d-none');\r\n\t\t\t\t\t\t\t\t\t\t$('button').removeClass('d-none');\r\n\t\t\t\t\t\t\t\t\t\tsetPrint(false);\r\n\t\t\t\t\t\t\t\t\t}, 100);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tdisabled={processing || !user.enrolled}>\r\n\t\t\t\t\t\t\t\tDownload\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : null}\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Enrollment;\r\n","import axios from 'axios';\r\nimport React, { FC, Fragment, useEffect } from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { AdmissionContract } from '../../../Contracts/admission.contract';\r\nimport { SubjectContract } from '../../../Contracts/subject.contract';\r\nimport { UserContract } from '../../../Contracts/user.contract';\r\nimport { handleError, toBool } from '../../../helpers';\r\nimport { useArray } from '../../../hooks';\r\nimport { State } from '../../../Libraries/State';\r\nimport { subjectService } from '../../../Services/subject.service';\r\n\r\ntype Props = {};\r\n\r\nconst Grades: FC<Props> = (props) => {\r\n\tconst state = State.getInstance();\r\n\tconst user = state.get<UserContract>('user');\r\n\tconst { data: subjects } = useQuery('subjects', () => subjectService.fetch());\r\n\tconst [admissions, setAdmissions] = useArray<AdmissionContract>();\r\n\r\n\tconst fetch = async () => {\r\n\t\ttry {\r\n\t\t\tconst { data: admissions } = await axios.get<AdmissionContract[]>('/auth/admissions');\r\n\t\t\tsetAdmissions([...admissions.reverse()]);\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst findGrade = (subject: SubjectContract, admission: AdmissionContract) => {\r\n\t\tconst student = admission.student;\r\n\t\treturn student?.grades?.find((grade) => grade.year_id === admission.year_id && grade.subject_id === subject.id);\r\n\t};\r\n\r\n\tconst filterSubjects = (admission: AdmissionContract) => {\r\n\t\treturn (\r\n\t\t\tsubjects\r\n\t\t\t\t?.filter((subject) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\ttoBool(admission.student?.previous_subjects?.find((s) => s.subject_id === subject.id)) ||\r\n\t\t\t\t\t\ttoBool(admission.student?.subjects?.find((s) => s.id === subject.id))\r\n\t\t\t\t\t);\r\n\t\t\t\t})\r\n\t\t\t\t.filter((subject) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\tsubject.level === admission.level &&\r\n\t\t\t\t\t\tsubject.term === admission.term &&\r\n\t\t\t\t\t\tsubject.course_id === admission.course_id &&\r\n\t\t\t\t\t\tsubject.major_id === admission.major_id\r\n\t\t\t\t\t);\r\n\t\t\t\t}) || []\r\n\t\t);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tfetch();\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\tif (!user) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='container'>\r\n\t\t\t<div className='row'>\r\n\t\t\t\t<div className='col-12 col-md-6 offset-md-3 text-center'>\r\n\t\t\t\t\t<h4>EASTERN MINDORO COLLEGE</h4>\r\n\t\t\t\t\t<p>Bongabong, Oriental Mindoro</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{admissions.map((admission, index) => (\r\n\t\t\t\t<Fragment key={`admission-${index}`}>\r\n\t\t\t\t\t<div className='d-flex mt-5'>\r\n\t\t\t\t\t\t<span className='mr-auto'>\r\n\t\t\t\t\t\t\t<b>Name:</b> {user.last_name}, {user.first_name} {user.middle_name || ''}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className='ml-auto'>\r\n\t\t\t\t\t\t\t<b>Semester:</b> {admission.term}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='d-flex'>\r\n\t\t\t\t\t\t<span className='mr-auto'>\r\n\t\t\t\t\t\t\t<b>Year Level:</b> {admission.level}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className='ml-auto'>\r\n\t\t\t\t\t\t\t<b>Status: </b> {admission.status}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='d-flex mt-3'>\r\n\t\t\t\t\t\t<span className='mr-auto'>\r\n\t\t\t\t\t\t\t<b>Student Number:</b> {user.uuid}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className='ml-auto'>\r\n\t\t\t\t\t\t\t<b>Year:</b> {admission.year?.start} - {admission.year?.end}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<table className='table table-bordered mt-3'>\r\n\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<th className='text-center'>Subject Code</th>\r\n\t\t\t\t\t\t\t\t<th className='text-center'>Description</th>\r\n\t\t\t\t\t\t\t\t<th className='text-center'>Units</th>\r\n\t\t\t\t\t\t\t\t<th className='text-center'>Grade</th>\r\n\t\t\t\t\t\t\t\t<th className='text-center'>Status</th>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t{filterSubjects(admission).map((subject, index) => (\r\n\t\t\t\t\t\t\t\t<tr key={`subject-${index}`}>\r\n\t\t\t\t\t\t\t\t\t<td className='text-center'>{subject?.code}</td>\r\n\t\t\t\t\t\t\t\t\t<td className='text-center' style={{ minWidth: '100px' }}>\r\n\t\t\t\t\t\t\t\t\t\t{subject?.description}\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td className='text-center'>{subject?.units}</td>\r\n\t\t\t\t\t\t\t\t\t<td className='text-center'>\r\n\t\t\t\t\t\t\t\t\t\t{findGrade(subject, admission) ? `${findGrade(subject, admission)?.grade}%` : '-'}\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td className='text-center'>\r\n\t\t\t\t\t\t\t\t\t\t{findGrade(subject, admission)\r\n\t\t\t\t\t\t\t\t\t\t\t? findGrade(subject, admission)?.status\r\n\t\t\t\t\t\t\t\t\t\t\t: admission.year?.current\r\n\t\t\t\t\t\t\t\t\t\t\t? '-'\r\n\t\t\t\t\t\t\t\t\t\t\t: 'INC'}\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<td className='text-center'>\r\n\t\t\t\t\t\t\t\t\t<b>Total Units</b>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t\t<td className='text-center'>\r\n\t\t\t\t\t\t\t\t\t{filterSubjects(admission).reduce((prev, next) => prev + next.units, 0) || 0}\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table>\r\n\t\t\t\t</Fragment>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Grades;\r\n","import axios from 'axios';\r\nimport dayjs from 'dayjs';\r\nimport React, { FC, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { UserContract } from '../../../Contracts/user.contract';\r\nimport { handleError } from '../../../helpers';\r\nimport { State } from '../../../Libraries/State';\r\nimport InputMask from 'react-input-mask';\r\n\r\ntype Props = {};\r\n\r\ntype Inputs = {\r\n\tuuid: string;\r\n\tfirst_name: string;\r\n\tlast_name: string;\r\n\tmiddle_name?: string;\r\n\tgender?: string;\r\n\taddress?: string;\r\n\tplace_of_birth?: string;\r\n\tbirthday?: string;\r\n\trole: string;\r\n\temail: string;\r\n\tnumber: string;\r\n\tactive: boolean;\r\n\tpassword: string;\r\n\tfathers_name?: string;\r\n\tmothers_name?: string;\r\n\tfathers_occupation?: string;\r\n\tmothers_occupation?: string;\r\n};\r\n\r\nconst Profile: FC<Props> = (props) => {\r\n\tconst [processing, setProcessing] = useState(false);\r\n\tconst state = State.getInstance();\r\n\tconst user = state.get<UserContract>('user');\r\n\tconst [number, setNumber] = useState(user?.number || '');\r\n\tconst { register, handleSubmit } = useForm<Inputs>({\r\n\t\tdefaultValues: {\r\n\t\t\t...user,\r\n\t\t},\r\n\t});\r\n\r\n\tconst submit = async (data: Inputs) => {\r\n\t\tif (!user?.active) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetProcessing(true);\r\n\t\ttry {\r\n\t\t\tdata.number = number;\r\n\t\t\tconst { data: user } = await axios.post('/auth/profile', data);\r\n\t\t\tstate.set('user', user);\r\n\t\t\ttoastr.success('Profile updated successfully.');\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t} finally {\r\n\t\t\tsetProcessing(false);\r\n\t\t}\r\n\t};\r\n\r\n\tif (!user) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tif (!user.active) {\r\n\t\ttoastr.info('Your account is currently inactive. Profile changes will not be saved.');\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='container'>\r\n\t\t\t<form className='row' onSubmit={handleSubmit(submit)}>\r\n\t\t\t\t<div className='col-12 col-md-6'>\r\n\t\t\t\t\t<div className='row'>\r\n\t\t\t\t\t\t<div className='col-3 my-2'>Student Number</div>\r\n\t\t\t\t\t\t<div className='col-9 my-2 d-flex align-items-center'>\r\n\t\t\t\t\t\t\t<b>{user.uuid}</b>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='col-3 my-2 d-flex align-items-center'>Name</div>\r\n\t\t\t\t\t\t<div className='col-9 my-2 d-flex align-items-center'>\r\n\t\t\t\t\t\t\t<b>\r\n\t\t\t\t\t\t\t\t{user.last_name}, {user.first_name} {user.middle_name || ''}\r\n\t\t\t\t\t\t\t</b>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='col-3 my-2 d-flex align-items-center'>Gender</div>\r\n\t\t\t\t\t\t<div className='col-9 my-2 d-flex align-items-center'>\r\n\t\t\t\t\t\t\t<b>{user.gender}</b>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='col-3 my-2 d-flex align-items-center'>Date of Birth</div>\r\n\t\t\t\t\t\t<div className='col-9 my-2 d-flex align-items-center'>\r\n\t\t\t\t\t\t\t<b>{dayjs(user.birthday).format('MMMM DD, YYYY')}</b>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='col-3 my-2 d-flex align-items-center'>Place of Birth</div>\r\n\t\t\t\t\t\t<div className='col-9 my-2 d-flex align-items-center'>\r\n\t\t\t\t\t\t\t<input {...register('place_of_birth')} type='text' className='form-control' disabled={processing} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='col-12 col-md-6'>\r\n\t\t\t\t\t<div className='row'>\r\n\t\t\t\t\t\t<div className='col-3 my-2 d-flex align-items-center'>Address</div>\r\n\t\t\t\t\t\t<div className='col-9 my-2 d-flex align-items-center'>\r\n\t\t\t\t\t\t\t<input {...register('address')} type='text' className='form-control' disabled={processing} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='col-3 my-2 d-flex align-items-center'>Mobile Number</div>\r\n\t\t\t\t\t\t<div className='col-9 my-2 d-flex align-items-center'>\r\n\t\t\t\t\t\t\t<InputMask\r\n\t\t\t\t\t\t\t\tmask='0\\999-999-9999'\r\n\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\tid='number'\r\n\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\tvalue={number}\r\n\t\t\t\t\t\t\t\tonChange={(e) => setNumber(e.target.value)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='col-3 my-2 d-flex align-items-center'>Email Address</div>\r\n\t\t\t\t\t\t<div className='col-9 my-2 d-flex align-items-center'>\r\n\t\t\t\t\t\t\t<input {...register('email')} type='email' className='form-control' disabled={processing} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='col-12 text-center pt-5'>\r\n\t\t\t\t\t<button type='submit' className='btn btn-info btn-sm' disabled={processing}>\r\n\t\t\t\t\t\tSave\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<p className='my-3'>\r\n\t\t\t\t\t\t<i>I hereby certify that all of the information provided are true and correct to the best of my knowledge.</i>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Profile;\r\n","import { LogContract } from '../Contracts/log.contract';\r\nimport { Service } from '../Libraries/Service';\r\n\r\nexport class LogService extends Service<LogContract> {}\r\n\r\nexport const logService = new LogService('/logs');\r\n","import dayjs from 'dayjs';\r\nimport React, { FC } from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { handleError } from '../../helpers';\r\nimport { logService } from '../../Services/log.service';\r\nimport Table from '../Shared/Table';\r\n\r\ntype Props = {};\r\n\r\nconst List: FC<Props> = (props) => {\r\n\tconst { data: items, isFetching: loading, isError, error, refetch } = useQuery('logs', () => logService.fetch());\r\n\r\n\tif (isError) {\r\n\t\thandleError(error);\r\n\t}\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'ID',\r\n\t\t\taccessor: 'id',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Message',\r\n\t\t\taccessor: 'message',\r\n\t\t\tminWidth: '300px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'IP Address',\r\n\t\t\taccessor: 'ip_address',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Device',\r\n\t\t\taccessor: 'device',\r\n\t\t\tminWidth: '300px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Browser',\r\n\t\t\taccessor: 'browser',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'User',\r\n\t\t\taccessor: 'user',\r\n\t\t\tminWidth: '300px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Date',\r\n\t\t\taccessor: 'created_at',\r\n\t\t\tminWidth: '300px',\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<Table\r\n\t\t\tonRefresh={() => refetch()}\r\n\t\t\ttitle='Logs'\r\n\t\t\tloading={loading}\r\n\t\t\titems={\r\n\t\t\t\titems?.map((log) => ({\r\n\t\t\t\t\t...log,\r\n\t\t\t\t\tcreated_at: dayjs(log.created_at).format('MMMM DD, YYYY hh:mm A'),\r\n\t\t\t\t\tuser: `${log.payload?.last_name}, ${log.payload?.first_name} ${log.payload?.middle_name || ''}`,\r\n\t\t\t\t})) || []\r\n\t\t\t}\r\n\t\t\tcolumns={columns}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default List;\r\n","import React, { FC } from 'react';\r\nimport { Route, RouteProps, Switch } from 'react-router-dom';\r\nimport { useURL } from '../../hooks';\r\nimport List from './List';\r\n\r\ntype Props = {};\r\n\r\nconst Logs: FC<Props> = (props) => {\r\n\tconst url = useURL();\r\n\r\n\tconst routes: RouteProps[] = [\r\n\t\t{\r\n\t\t\tpath: url('/'),\r\n\t\t\texact: true,\r\n\t\t\tcomponent: List,\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<Switch>\r\n\t\t\t{routes.map((route, index) => (\r\n\t\t\t\t<Route {...route} key={index} />\r\n\t\t\t))}\r\n\t\t</Switch>\r\n\t);\r\n};\r\n\r\nexport default Logs;\r\n","import { MailContract } from '../Contracts/mail.contract';\r\nimport { Service } from '../Libraries/Service';\r\n\r\nexport class MailService extends Service<MailContract> {}\r\n\r\nexport const mailService = new MailService('/mails');\r\n","import dayjs from 'dayjs';\r\nimport React, { createRef, FC } from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { FreeObject } from '../../Contracts/misc';\r\nimport { handleError } from '../../helpers';\r\nimport { mailService } from '../../Services/mail.service';\r\nimport Table from '../Shared/Table';\r\n\r\ntype Props = {};\r\n\r\nconst colors: FreeObject = {\r\n\tSent: 'success',\r\n\tPending: 'warning',\r\n\tFailed: 'danger',\r\n};\r\n\r\nconst List: FC<Props> = (props) => {\r\n\tconst { data: items, isFetching: loading, isError, error, refetch } = useQuery('mails', () => mailService.fetch());\r\n\tconst modalRef = createRef<HTMLDivElement>();\r\n\r\n\tif (isError) {\r\n\t\thandleError(error);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Table\r\n\t\t\t\tonRefresh={() => refetch()}\r\n\t\t\t\ttitle='Email Outbox'\r\n\t\t\t\tloading={loading}\r\n\t\t\t\titems={\r\n\t\t\t\t\titems?.map((mail) => ({\r\n\t\t\t\t\t\t...mail,\r\n\t\t\t\t\t\tcreated_at: dayjs(mail.created_at).format('MMMM DD, YYYY hh:mm A'),\r\n\t\t\t\t\t\tstatus: <span className={`badge badge-${colors[mail.status]}`}>{mail.status}</span>,\r\n\t\t\t\t\t\tsent: mail.sent ? dayjs(mail.sent).format('MMMM DD, YYYY hh:mm A') : '',\r\n\t\t\t\t\t\tactions: (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName='btn btn-primary btn-sm mx-1'\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\tif (modalRef.current) {\r\n\t\t\t\t\t\t\t\t\t\t\tconst modal = $(modalRef.current);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tmodal.find('.modal-body').html(mail.body);\r\n\t\t\t\t\t\t\t\t\t\t\tmodal.find('#password').addClass('d-none');\r\n\t\t\t\t\t\t\t\t\t\t\tmodal.modal('show');\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tView\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t})) || []\r\n\t\t\t\t}\r\n\t\t\t\tcolumns={[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: 'Created',\r\n\t\t\t\t\t\taccessor: 'created_at',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: 'To',\r\n\t\t\t\t\t\taccessor: 'to',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: 'Subject',\r\n\t\t\t\t\t\taccessor: 'subject',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: 'Status',\r\n\t\t\t\t\t\taccessor: 'status',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: 'Sent',\r\n\t\t\t\t\t\taccessor: 'sent',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: 'Actions',\r\n\t\t\t\t\t\taccessor: 'actions',\r\n\t\t\t\t\t},\r\n\t\t\t\t]}\r\n\t\t\t/>\r\n\t\t\t<div ref={modalRef} className='modal fade' tabIndex={-1}>\r\n\t\t\t\t<div className='modal-dialog modal-dialog-centered modal-lg'>\r\n\t\t\t\t\t<div className='modal-content'>\r\n\t\t\t\t\t\t<div className='modal-header'>\r\n\t\t\t\t\t\t\t<h5 className='modal-title'>View Mail</h5>\r\n\t\t\t\t\t\t\t<button type='button' className='close' data-dismiss='modal'>\r\n\t\t\t\t\t\t\t\t<span aria-hidden='true'>&times;</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='modal-body'></div>\r\n\t\t\t\t\t\t<div className='modal-footer'>\r\n\t\t\t\t\t\t\t<button type='button' className='btn btn-secondary btn-sm' data-dismiss='modal'>\r\n\t\t\t\t\t\t\t\tClose\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default List;\r\n","import React, { FC } from 'react';\r\nimport { RouteProps, Switch, Route } from 'react-router-dom';\r\nimport { useURL } from '../../hooks';\r\nimport List from './List';\r\n\r\ntype Props = {};\r\n\r\nconst Mails: FC<Props> = (props) => {\r\n\tconst url = useURL();\r\n\r\n\tconst routes: RouteProps[] = [\r\n\t\t{\r\n\t\t\tpath: url('/'),\r\n\t\t\texact: true,\r\n\t\t\tcomponent: List,\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<Switch>\r\n\t\t\t{routes.map((route, index) => (\r\n\t\t\t\t<Route {...route} key={index} />\r\n\t\t\t))}\r\n\t\t</Switch>\r\n\t);\r\n};\r\n\r\nexport default Mails;\r\n","import React, { FC, useEffect, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useHistory, useRouteMatch } from 'react-router';\r\nimport { Asker, handleError, setValues } from '../../helpers';\r\nimport { useMode, useNullable } from '../../hooks';\r\nimport { userService } from '../../Services/user.service';\r\nimport Flatpickr from 'react-flatpickr';\r\nimport dayjs from 'dayjs';\r\nimport InputMask from 'react-input-mask';\r\n\r\ntype Props = {};\r\n\r\ntype Inputs = {\r\n\tuuid: string;\r\n\tfirst_name: string;\r\n\tlast_name: string;\r\n\tmiddle_name?: string;\r\n\tgender?: string;\r\n\taddress?: string;\r\n\tplace_of_birth?: string;\r\n\tbirthday?: string;\r\n\trole: string;\r\n\temail: string;\r\n\tnumber: string;\r\n\tactive: boolean;\r\n\tpassword: string;\r\n\tfathers_name?: string;\r\n\tmothers_name?: string;\r\n\tfathers_occupation?: string;\r\n\tmothers_occupation?: string;\r\n\tforce: boolean;\r\n\ttype: string;\r\n\tenrolled: boolean;\r\n\tpayment_status: 'Not Paid' | 'Fully Paid' | 'Partially Paid';\r\n};\r\n\r\nconst Form: FC<Props> = (props) => {\r\n\tconst [processing, setProcessing] = useState(false);\r\n\tconst [mode, setMode] = useMode();\r\n\tconst { register, setValue, handleSubmit, reset } = useForm<Inputs>({\r\n\t\tdefaultValues: {\r\n\t\t\tforce: false,\r\n\t\t},\r\n\t});\r\n\tconst [birthday, setBirthday] = useNullable<Date>();\r\n\tconst [id, setID] = useState(-1);\r\n\tconst history = useHistory();\r\n\tconst match = useRouteMatch<{ id: string }>();\r\n\tconst [number, setNumber] = useState('');\r\n\r\n\tconst fetch = async (id: any) => {\r\n\t\ttry {\r\n\t\t\tconst data = await userService.fetchOne(id);\r\n\t\t\tsetID(data.id!);\r\n\t\t\tsetValues(setValue, data);\r\n\t\t\tsetBirthday(dayjs(data.birthday).toDate());\r\n\t\t\tsetNumber(data.number);\r\n\t\t\tsetMode('Edit');\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t\thistory.goBack();\r\n\t\t}\r\n\t};\r\n\r\n\tconst submit = async (data: Inputs) => {\r\n\t\tsetProcessing(true);\r\n\t\ttry {\r\n\t\t\tdata.role = 'Registrar';\r\n\t\t\tdata.active = true;\r\n\t\t\tdata.birthday = birthday?.toJSON();\r\n\t\t\tdata.number = number;\r\n\t\t\tawait (mode === 'Add' ? userService.create(data) : userService.update(id, data));\r\n\t\t\ttoastr.success('Registrar has been saved successfully.');\r\n\t\t\treset();\r\n\t\t\tsetBirthday(null);\r\n\t\t} catch (error) {\r\n\t\t\tif (error.response?.status === 409) {\r\n\t\t\t\tif (await Asker.save(error.response?.data?.message)) {\r\n\t\t\t\t\tdata.force = true;\r\n\t\t\t\t\tawait submit(data);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\thandleError(error);\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tsetProcessing(false);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (match.path.includes('edit')) {\r\n\t\t\tfetch(match.params.id);\r\n\t\t} else {\r\n\t\t\tuserService.fetch().then((users) => {\r\n\t\t\t\tsetValue(\r\n\t\t\t\t\t'uuid',\r\n\t\t\t\t\t`registrar-${`${users.filter((user) => user.role === 'Registrar').length + 1}`.padStart(\r\n\t\t\t\t\t\t5,\r\n\t\t\t\t\t\t'0'\r\n\t\t\t\t\t)}-${new Date().getFullYear()}`\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t}\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className='container-fluid'>\r\n\t\t\t<div className='card'>\r\n\t\t\t\t<div className='card-body'>\r\n\t\t\t\t\t<h5 className='card-title'>{mode} Registrar</h5>\r\n\t\t\t\t\t<form onSubmit={handleSubmit(submit)}>\r\n\t\t\t\t\t\t<div className='form-row'>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='first_name'>First Name</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t{...register('first_name')}\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\tid='first_name'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='uuid'>Registrar Number</label>\r\n\t\t\t\t\t\t\t\t<input {...register('uuid')} type='text' id='uuid' className='form-control' readOnly />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='last_name'>Last Name</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t{...register('last_name')}\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\tid='last_name'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='email'>Email Address</label>\r\n\t\t\t\t\t\t\t\t<input {...register('email')} type='email' id='email' className='form-control' disabled={processing} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='gender'>Gender</label>\r\n\t\t\t\t\t\t\t\t<select {...register('gender')} id='gender' className='form-control'>\r\n\t\t\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t<option value='Male'>Male</option>\r\n\t\t\t\t\t\t\t\t\t<option value='Female'>Female</option>\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='number'>Phone Number</label>\r\n\t\t\t\t\t\t\t\t<InputMask\r\n\t\t\t\t\t\t\t\t\tmask='0\\999-999-9999'\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\tid='number'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t\tvalue={number}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => setNumber(e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='birthday'>Birthday</label>\r\n\t\t\t\t\t\t\t\t<Flatpickr\r\n\t\t\t\t\t\t\t\t\tvalue={birthday || undefined}\r\n\t\t\t\t\t\t\t\t\tid='birthday'\r\n\t\t\t\t\t\t\t\t\toptions={{\r\n\t\t\t\t\t\t\t\t\t\tmaxDate: dayjs()\r\n\t\t\t\t\t\t\t\t\t\t\t.year(new Date().getFullYear() - 15)\r\n\t\t\t\t\t\t\t\t\t\t\t.toDate(),\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tonChange={(dates) => {\r\n\t\t\t\t\t\t\t\t\t\tif (dates.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetBirthday(dates[0]);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='address'>Address</label>\r\n\t\t\t\t\t\t\t\t<input {...register('address')} type='text' id='address' className='form-control' disabled={processing} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='d-flex'>\r\n\t\t\t\t\t\t\t<i className='ml-auto'>Account credentials will be sent via email.</i>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='d-flex'>\r\n\t\t\t\t\t\t\t<button type='button' className='btn btn-secondary' onClick={() => history.goBack()} disabled={processing}>\r\n\t\t\t\t\t\t\t\tReturn\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button type='submit' className='btn btn-primary ml-auto' disabled={processing}>\r\n\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Form;\r\n","import dayjs from 'dayjs';\r\nimport React, { FC } from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { Link } from 'react-router-dom';\r\nimport { UserContract } from '../../Contracts/user.contract';\r\nimport { handleError, Asker } from '../../helpers';\r\nimport { useURL } from '../../hooks';\r\nimport { State } from '../../Libraries/State';\r\nimport { userService } from '../../Services/user.service';\r\n\r\nimport Table from '../Shared/Table';\r\n\r\ntype Props = {};\r\n\r\nconst List: FC<Props> = (props) => {\r\n\tconst { data: items, isFetching: loading, isError, error, refetch } = useQuery('users', () => userService.fetch());\r\n\r\n\tconst url = useURL();\r\n\r\n\tif (isError) {\r\n\t\thandleError(error);\r\n\t}\r\n\r\n\tconst deleteItem = async (id: any) => {\r\n\t\ttry {\r\n\t\t\tif (await Asker.danger('Are you sure you want to delete this Registrar?')) {\r\n\t\t\t\tawait userService.delete(id);\r\n\t\t\t\ttoastr.info('Registrar has been deleted.', 'Notice');\r\n\t\t\t\trefetch();\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst update = async (registrar: UserContract) => {\r\n\t\ttry {\r\n\t\t\tawait userService.update(registrar.id, { active: !registrar.active });\r\n\t\t\ttoastr.success(`Registrar ${registrar.active ? 'disabled' : 'enabled'} successfully.`);\r\n\t\t\trefetch();\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst user = State.getInstance().get<UserContract>('user');\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Registrar #',\r\n\t\t\taccessor: 'uuid',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Name',\r\n\t\t\taccessor: 'name',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Phone Number',\r\n\t\t\taccessor: 'number',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Status',\r\n\t\t\taccessor: 'status',\r\n\t\t},\r\n\t];\r\n\r\n\tif (user?.role === 'Admin') {\r\n\t\tcolumns.push({ title: 'Actions', accessor: 'actions' });\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Table\r\n\t\t\tonRefresh={() => refetch()}\r\n\t\t\ttitle='Registrars'\r\n\t\t\tloading={loading}\r\n\t\t\titems={\r\n\t\t\t\titems\r\n\t\t\t\t\t?.filter((user) => user.role === 'Registrar')\r\n\t\t\t\t\t.map((registrar) => ({\r\n\t\t\t\t\t\t...registrar,\r\n\t\t\t\t\t\tname: (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{registrar.last_name}, {registrar.first_name} {registrar.middle_name || ''}\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tbirthday: dayjs(registrar.birthday).format('MMMM DD, YYYY'),\r\n\t\t\t\t\t\tage: new Date().getFullYear() - dayjs(registrar.birthday).year(),\r\n\t\t\t\t\t\tstatus: registrar.active ? (\r\n\t\t\t\t\t\t\t<span className='badge badge-success'>Active</span>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<span className='badge badge-danger'>Inactive</span>\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tactions: (\r\n\t\t\t\t\t\t\t<div style={{ minWidth: '350px' }}>\r\n\t\t\t\t\t\t\t\t<Link to={url(`${registrar.id}/edit`)} className='btn btn-warning btn-sm mx-1' title='Edit'>\r\n\t\t\t\t\t\t\t\t\t<i className='fas fa-edit'></i>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName={`btn btn-${registrar.active ? 'danger' : 'info'} btn-sm mx-1`}\r\n\t\t\t\t\t\t\t\t\tonClick={async (e) => {\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\tawait Asker.notice(\r\n\t\t\t\t\t\t\t\t\t\t\t\t`Are you sure you want to ${registrar.active ? 'disable' : 'enable'} this registrar?`\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\tupdate(registrar);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\ttitle={registrar.active ? 'Disable' : 'Enable'}>\r\n\t\t\t\t\t\t\t\t\t<i className={`fas fa-user-${registrar.active ? 'times' : 'check'}`}></i>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName='btn btn-danger btn-sm mx-1 d-none'\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\tdeleteItem(registrar.id);\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<i className='fas fa-trash'></i>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t})) || []\r\n\t\t\t}\r\n\t\t\tcolumns={columns}\r\n\t\t\tbuttons={\r\n\t\t\t\t<>\r\n\t\t\t\t\t{user?.role === 'Admin' ? (\r\n\t\t\t\t\t\t<Link to={url(`add`)} className='btn btn-primary btn-sm ml-2'>\r\n\t\t\t\t\t\t\t<i className='fas fa-plus'></i>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default List;\r\n","import React, { FC } from 'react';\r\nimport { Route, RouteProps, Switch } from 'react-router-dom';\r\nimport { useURL } from '../../hooks';\r\nimport Form from './Form';\r\nimport List from './List';\r\n\r\ntype Props = {};\r\n\r\nconst Registrars: FC<Props> = (props) => {\r\n\tconst url = useURL();\r\n\r\n\tconst routes: RouteProps[] = [\r\n\t\t{\r\n\t\t\tpath: url('/'),\r\n\t\t\texact: true,\r\n\t\t\tcomponent: List,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url('/add'),\r\n\t\t\tcomponent: Form,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url('/:id/edit'),\r\n\t\t\tcomponent: Form,\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<Switch>\r\n\t\t\t{routes.map((route, index) => (\r\n\t\t\t\t<Route {...route} key={index} />\r\n\t\t\t))}\r\n\t\t</Switch>\r\n\t);\r\n};\r\n\r\nexport default Registrars;\r\n","import { RequirementContract } from '../Contracts/requirement.contract';\r\nimport { Service } from '../Libraries/Service';\r\n\r\nexport class RequirementService extends Service<RequirementContract> {}\r\n\r\nexport const requirementService = new RequirementService('/requirements');\r\n","import React, { FC, useEffect, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useHistory, useRouteMatch } from 'react-router';\r\nimport { RequirementContract } from '../../Contracts/requirement.contract';\r\nimport { Asker, handleError, setValues } from '../../helpers';\r\nimport { useMode } from '../../hooks';\r\nimport { requirementService } from '../../Services/requirement.service';\r\n\r\ntype Props = {};\r\n\r\nconst Form: FC<Props> = (props) => {\r\n\tconst [processing, setProcessing] = useState(false);\r\n\tconst [mode, setMode] = useMode();\r\n\tconst { register, setValue, handleSubmit, reset } = useForm<RequirementContract>();\r\n\tconst [id, setID] = useState(-1);\r\n\tconst history = useHistory();\r\n\tconst match = useRouteMatch<{ id: string }>();\r\n\r\n\tconst fetch = async (id: any) => {\r\n\t\ttry {\r\n\t\t\tconst data = await requirementService.fetchOne(id);\r\n\t\t\tsetID(data.id!);\r\n\t\t\tsetValues(setValue, data);\r\n\t\t\tsetMode('Edit');\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t\thistory.goBack();\r\n\t\t}\r\n\t};\r\n\r\n\tconst submit = async (data: RequirementContract) => {\r\n\t\tsetProcessing(true);\r\n\t\ttry {\r\n\t\t\tif (mode === 'Edit' && (await Asker.notice('Are you sure you want to update?')) === false) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tawait (mode === 'Add' ? requirementService.create(data) : requirementService.update(id, data));\r\n\t\t\ttoastr.success('Requirement has been saved successfully.');\r\n\t\t\treset();\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t} finally {\r\n\t\t\tsetProcessing(false);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (match.path.includes('edit')) {\r\n\t\t\tfetch(match.params.id);\r\n\t\t}\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className='container-fluid'>\r\n\t\t\t<div className='card'>\r\n\t\t\t\t<div className='card-body'>\r\n\t\t\t\t\t<h5 className='card-title'>{mode} Requirement</h5>\r\n\t\t\t\t\t<form onSubmit={handleSubmit(submit)}>\r\n\t\t\t\t\t\t<div className='form-group'>\r\n\t\t\t\t\t\t\t<label htmlFor='name'>Name</label>\r\n\t\t\t\t\t\t\t<input {...register('name')} type='text' id='code' className='form-control' disabled={processing} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='form-group d-flex'>\r\n\t\t\t\t\t\t\t<button type='button' className='btn btn-secondary' onClick={() => history.goBack()} disabled={processing}>\r\n\t\t\t\t\t\t\t\tReturn\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button type='submit' className='btn btn-primary ml-auto' disabled={processing}>\r\n\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Form;\r\n","import dayjs from 'dayjs';\r\nimport React, { FC } from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { Link } from 'react-router-dom';\r\nimport { UserContract } from '../../Contracts/user.contract';\r\nimport { handleError, Asker } from '../../helpers';\r\nimport { useURL } from '../../hooks';\r\nimport { State } from '../../Libraries/State';\r\nimport { requirementService } from '../../Services/requirement.service';\r\nimport Table from '../Shared/Table';\r\n\r\ntype Props = {};\r\n\r\nconst List: FC<Props> = (props) => {\r\n\tconst { data: items, isFetching: loading, isError, error, refetch } = useQuery('requirements', () => requirementService.fetch());\r\n\r\n\tconst url = useURL();\r\n\r\n\tif (isError) {\r\n\t\thandleError(error);\r\n\t}\r\n\r\n\tconst deleteItem = async (id: any) => {\r\n\t\ttry {\r\n\t\t\tif (await Asker.danger('Are you sure you want to delete this Requirement?')) {\r\n\t\t\t\tawait requirementService.delete(id);\r\n\t\t\t\ttoastr.info('Requirement has been deleted.', 'Notice');\r\n\t\t\t\trefetch();\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst user = State.getInstance().get<UserContract>('user');\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'ID',\r\n\t\t\taccessor: 'id',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Name',\r\n\t\t\taccessor: 'name',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Created',\r\n\t\t\taccessor: 'created_at',\r\n\t\t},\r\n\t];\r\n\r\n\tif (user?.role === 'Registrar') {\r\n\t\tcolumns.push({\r\n\t\t\ttitle: 'Actions',\r\n\t\t\taccessor: 'actions',\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Table\r\n\t\t\tonRefresh={() => refetch()}\r\n\t\t\ttitle='Requirements'\r\n\t\t\tloading={loading}\r\n\t\t\titems={\r\n\t\t\t\titems?.map((requirement) => ({\r\n\t\t\t\t\t...requirement,\r\n\t\t\t\t\tcreated_at: dayjs(requirement.created_at).format('MMMM DD, YYYY hh:mm A'),\r\n\t\t\t\t\tactions:\r\n\t\t\t\t\t\tuser?.role === 'Registrar' ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Link to={url(`${requirement.id}/edit`)} className='btn btn-warning btn-sm mx-1'>\r\n\t\t\t\t\t\t\t\t\t<i className='fas fa-edit'></i>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName='btn btn-danger btn-sm mx-1'\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\tdeleteItem(requirement.id);\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<i className='fas fa-trash'></i>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : null,\r\n\t\t\t\t})) || []\r\n\t\t\t}\r\n\t\t\tcolumns={columns}\r\n\t\t\tbuttons={\r\n\t\t\t\t<>\r\n\t\t\t\t\t{user?.role === 'Registrar' ? (\r\n\t\t\t\t\t\t<Link to={url(`add`)} className='btn btn-primary btn-sm ml-2'>\r\n\t\t\t\t\t\t\t<i className='fas fa-plus'></i>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default List;\r\n","import React, { FC } from 'react';\r\nimport { Route, RouteProps, Switch } from 'react-router-dom';\r\nimport { useURL } from '../../hooks';\r\nimport Form from './Form';\r\nimport List from './List';\r\n\r\ntype Props = {};\r\n\r\nconst Requirements: FC<Props> = (props) => {\r\n\tconst url = useURL();\r\n\r\n\tconst routes: RouteProps[] = [\r\n\t\t{\r\n\t\t\tpath: url('/'),\r\n\t\t\texact: true,\r\n\t\t\tcomponent: List,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url('/add'),\r\n\t\t\tcomponent: Form,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url('/:id/edit'),\r\n\t\t\tcomponent: Form,\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<Switch>\r\n\t\t\t{routes.map((route, index) => (\r\n\t\t\t\t<Route {...route} key={index} />\r\n\t\t\t))}\r\n\t\t</Switch>\r\n\t);\r\n};\r\n\r\nexport default Requirements;\r\n","import { ScheduleContract } from '../Contracts/schedule.contract';\r\nimport { Service } from '../Libraries/Service';\r\n\r\nexport class ScheduleService extends Service<ScheduleContract> {}\r\n\r\nexport const scheduleService = new ScheduleService('/schedules');\r\n","import { SectionContract } from '../Contracts/section.contract';\r\nimport { Service } from '../Libraries/Service';\r\n\r\nexport class SectionService extends Service<SectionContract> {}\r\n\r\nexport const sectionService = new SectionService('/sections');\r\n","import React, { FC, useEffect, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useQuery } from 'react-query';\r\nimport { useHistory, useRouteMatch } from 'react-router';\r\nimport { ScheduleRow } from '../../Contracts/schedule.contract';\r\nimport { Asker, handleError, setValues } from '../../helpers';\r\nimport { useArray, useMode, useNullable } from '../../hooks';\r\nimport { courseService } from '../../Services/course.service';\r\nimport { scheduleService } from '../../Services/schedule.service';\r\nimport { subjectService } from '../../Services/subject.service';\r\nimport { userService } from '../../Services/user.service';\r\nimport Flatpickr from 'react-flatpickr';\r\nimport dayjs from 'dayjs';\r\nimport { yearService } from '../../Services/year.service';\r\nimport { CourseContract } from '../../Contracts/course.contract';\r\nimport { MajorContract } from '../../Contracts/major.contract';\r\nimport { UserContract } from '../../Contracts/user.contract';\r\nimport { sectionService } from '../../Services/section.service';\r\nimport { SectionContract } from '../../Contracts/section.contract';\r\n\r\ntype Props = {};\r\n\r\ntype Inputs = {\r\n\tcourse_id: number;\r\n\tsubject_id: number;\r\n\tteacher_id: number;\r\n\tyear: string;\r\n\tyear_id: number;\r\n\tmajor_id?: number;\r\n\tpayload: ScheduleRow[];\r\n\tterm: string;\r\n\tforce: boolean;\r\n\tsection_id: number;\r\n};\r\n\r\nconst Form: FC<Props> = (props) => {\r\n\tconst [processing, setProcessing] = useState(false);\r\n\tconst [mode, setMode] = useMode();\r\n\tconst { register, setValue, handleSubmit, reset } = useForm<Inputs>({\r\n\t\tdefaultValues: {\r\n\t\t\tforce: false,\r\n\t\t},\r\n\t});\r\n\tconst [course, setCourse] = useNullable<CourseContract>();\r\n\tconst [major, setMajor] = useNullable<MajorContract>();\r\n\tconst [teacher, setTeacher] = useNullable<UserContract>();\r\n\tconst [section, setSection] = useNullable<SectionContract>();\r\n\tconst [year, setYear] = useNullable<string>();\r\n\tconst [term, setTerm] = useNullable<string>();\r\n\tconst [rows, setRows] = useArray<ScheduleRow>([\r\n\t\t{\r\n\t\t\tday: '',\r\n\t\t\tstart_time: null,\r\n\t\t\tend_time: null,\r\n\t\t},\r\n\t]);\r\n\tconst [id, setID] = useState(-1);\r\n\tconst history = useHistory();\r\n\tconst match = useRouteMatch<{ id: string }>();\r\n\tconst { data: courses, refetch: refetchCourses } = useQuery('courses', () => courseService.fetch());\r\n\tconst { data: users, refetch: refetchUsers } = useQuery('users', () => userService.fetch());\r\n\tconst { data: subjects, refetch: refetchSubjects } = useQuery('subjects', () => subjectService.fetch());\r\n\tconst { data: years, refetch: refetchYears } = useQuery('years', () => yearService.fetch());\r\n\tconst { data: sections, refetch: refetchSections } = useQuery('sections', () => sectionService.fetch());\r\n\r\n\tconst refetchAll = async () => {\r\n\t\ttry {\r\n\t\t\tawait Promise.all([refetchCourses(), refetchSections(), refetchSubjects(), refetchUsers(), refetchYears()]);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst fetch = async (id: any) => {\r\n\t\ttry {\r\n\t\t\tconst data = await scheduleService.fetchOne(id);\r\n\t\t\tsetID(data.id!);\r\n\t\t\tsetMode('Edit');\r\n\t\t\tsetValues(setValue, data);\r\n\t\t\tsetRows([...data.payload]);\r\n\t\t\tif (data.course) {\r\n\t\t\t\tsetCourse(data.course);\r\n\t\t\t}\r\n\t\t\tif (data.major) {\r\n\t\t\t\tsetMajor(data.major);\r\n\t\t\t}\r\n\t\t\tif (data.section) {\r\n\t\t\t\tsetSection(data.section);\r\n\t\t\t}\r\n\t\t\tsetTerm(data.term);\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t\thistory.goBack();\r\n\t\t}\r\n\t};\r\n\r\n\tconst submit = async (data: Inputs) => {\r\n\t\tsetProcessing(true);\r\n\t\ttry {\r\n\t\t\tconst year = years?.find((year) => year.current);\r\n\t\t\tif (year) {\r\n\t\t\t\tdata.year_id = year.id!;\r\n\t\t\t} else {\r\n\t\t\t\treturn toastr.error('A School Year is not set, please create/make one as current.');\r\n\t\t\t}\r\n\t\t\tdata.payload = rows;\r\n\t\t\tawait (mode === 'Add' ? scheduleService.create(data) : scheduleService.update(id, data));\r\n\t\t\ttoastr.success('Schedule has been saved successfully.');\r\n\t\t\tawait refetchAll();\r\n\t\t\treset();\r\n\t\t\tsetRows([]);\r\n\t\t\tsetCourse(null);\r\n\t\t\tsetMajor(null);\r\n\t\t\tsetTerm(null);\r\n\t\t} catch (error) {\r\n\t\t\tif (error.response?.status === 409) {\r\n\t\t\t\tif (await Asker.save(error.response?.data?.message)) {\r\n\t\t\t\t\tdata.force = true;\r\n\t\t\t\t\tawait submit(data);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\thandleError(error);\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tsetProcessing(false);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (match.path.includes('edit')) {\r\n\t\t\tfetch(match.params.id);\r\n\t\t}\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className='container-fluid'>\r\n\t\t\t<div className='card'>\r\n\t\t\t\t<div className='card-body'>\r\n\t\t\t\t\t<h5 className='card-title'>{mode} Schedule</h5>\r\n\t\t\t\t\t<form onSubmit={handleSubmit(submit)}>\r\n\t\t\t\t\t\t<div className='form-row'>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-4'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='course_id'>Course</label>\r\n\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\t{...register('course_id')}\r\n\t\t\t\t\t\t\t\t\tid='course_id'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tconst id = e.target.value.toNumber();\r\n\t\t\t\t\t\t\t\t\t\tconst course = courses?.find((course) => course.id === id);\r\n\t\t\t\t\t\t\t\t\t\tif (course) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetCourse(course);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetCourse(null);\r\n\t\t\t\t\t\t\t\t\t\t\tsetMajor(null);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t{courses\r\n\t\t\t\t\t\t\t\t\t\t?.filter((course) => course.open)\r\n\t\t\t\t\t\t\t\t\t\t.map((course, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<option value={course.id} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{course.code}\r\n\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{course && course.majors && course.majors.length > 0 ? (\r\n\t\t\t\t\t\t\t\t<div className='form-group col-12 col-md-4'>\r\n\t\t\t\t\t\t\t\t\t<label htmlFor='major_id'>Major</label>\r\n\t\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\t\t{...register('major_id')}\r\n\t\t\t\t\t\t\t\t\t\tid='major_id'\r\n\t\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\tconst id = e.target.value.toNumber();\r\n\t\t\t\t\t\t\t\t\t\t\tconst major = course?.majors?.find((major) => major.id === id);\r\n\t\t\t\t\t\t\t\t\t\t\tif (major) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetMajor(major);\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetMajor(null);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t\t{course.majors.map((major, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<option value={major.id} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{major.name}\r\n\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-4'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='section_id'>Section</label>\r\n\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\t{...register('section_id')}\r\n\t\t\t\t\t\t\t\t\tid='section_id'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tconst id = e.target.value.toNumber();\r\n\t\t\t\t\t\t\t\t\t\tconst section = sections?.find((section) => section.id === id);\r\n\t\t\t\t\t\t\t\t\t\tif (section) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetSection(section);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetSection(null);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t{sections\r\n\t\t\t\t\t\t\t\t\t\t?.filter((section) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (course) {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn section.course_id === course.id;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.filter((section) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (major) {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn section.major_id === major.id;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.filter((section) => section.year?.current)\r\n\t\t\t\t\t\t\t\t\t\t.map((section, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<option value={section.id} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{section.name}\r\n\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-4'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='teacher_id'>Teacher</label>\r\n\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\t{...register('teacher_id')}\r\n\t\t\t\t\t\t\t\t\tid='teacher_id'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tconst id = e.target.value.toNumber();\r\n\t\t\t\t\t\t\t\t\t\tconst teacher = users?.find((user) => user.role === 'Teacher' && user.id === id);\r\n\t\t\t\t\t\t\t\t\t\tif (teacher) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetTeacher(teacher);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetTeacher(null);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t{users\r\n\t\t\t\t\t\t\t\t\t\t?.filter((user) => user.role === 'Teacher')\r\n\t\t\t\t\t\t\t\t\t\t.map((teacher, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<option value={teacher.id} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{teacher.last_name}, {teacher.first_name} {teacher.middle_name || ''}\r\n\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6 col-lg-4'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='semester'>Semester</label>\r\n\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\t{...register('term')}\r\n\t\t\t\t\t\t\t\t\tid='semester'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tconst value = e.target.value;\r\n\t\t\t\t\t\t\t\t\t\tif (value.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetTerm(value);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetTerm(null);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t<option value='1st Semester'>1st Semester</option>\r\n\t\t\t\t\t\t\t\t\t<option value='2nd Semester'>2nd Semester</option>\r\n\t\t\t\t\t\t\t\t\t<option value='Summer'>Summer</option>\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6 col-lg-4'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='year'>Year Level</label>\r\n\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\t{...register('year')}\r\n\t\t\t\t\t\t\t\t\tid='year'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tconst value = e.target.value;\r\n\t\t\t\t\t\t\t\t\t\tif (value.length === 3) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetYear(value);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetYear(null);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t<option value='1st'>1st</option>\r\n\t\t\t\t\t\t\t\t\t<option value='2nd'>2nd</option>\r\n\t\t\t\t\t\t\t\t\t<option value='3rd'>3rd</option>\r\n\t\t\t\t\t\t\t\t\t<option value='4th'>4th</option>\r\n\t\t\t\t\t\t\t\t\t<option value='5th'>5th</option>\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className={`form-group col-12 col-md-4`}>\r\n\t\t\t\t\t\t\t\t<label htmlFor='subject_id'>Subject</label>\r\n\t\t\t\t\t\t\t\t<select {...register('subject_id')} id='subject_id' className='form-control'>\r\n\t\t\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t{subjects\r\n\t\t\t\t\t\t\t\t\t\t?.filter((subject) => {\r\n\t\t\t\t\t\t\t\t\t\t\tconst valid =\r\n\t\t\t\t\t\t\t\t\t\t\t\tsubject.schedules?.find((schedule) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (course && major && teacher && section) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tschedule.teacher_id === teacher.id &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tschedule.course_id === course.id &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tschedule.major_id === major.id &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tschedule.section_id === section.id\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (course && teacher && section) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tschedule.teacher_id === teacher.id &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tschedule.course_id === course.id &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tschedule.section_id === section.id\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}) === undefined;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tif (mode === 'Add') {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn valid;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\treturn valid || subject.id === id;\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.filter((subject) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (course && major) {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn subject.course_id === course.id && subject.major_id === major.id;\r\n\t\t\t\t\t\t\t\t\t\t\t} else if (course) {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn subject.course_id === course.id;\r\n\t\t\t\t\t\t\t\t\t\t\t} else if (major) {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn subject.major_id === major.id;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.filter((subject) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (year) {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn subject.level === year;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.filter((subject) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (term) {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn subject.term === term;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.map((subject, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<option value={subject.id} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{subject.description}\r\n\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12'>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName='btn btn-info btn-sm mt-2 mb-4'\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\trows.push({ day: '', start_time: null, end_time: null });\r\n\t\t\t\t\t\t\t\t\t\tsetRows([...rows]);\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tAdd Row\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<table className='table'>\r\n\t\t\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<th>Day</th>\r\n\t\t\t\t\t\t\t\t\t\t\t<th>Start Time</th>\r\n\t\t\t\t\t\t\t\t\t\t\t<th>End Time</th>\r\n\t\t\t\t\t\t\t\t\t\t\t<th></th>\r\n\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t\t{rows.map(({ day, start_time, end_time }, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<tr key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={day}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trows.splice(index, 1, { day: e.target.value, start_time, end_time });\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetRows([...rows]);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Flatpickr\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={start_time ? dayjs(start_time).toDate() : undefined}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tenableTime: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmode: 'time',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taltFormat: 'G:i K',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taltInput: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(dates) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (dates.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trows.splice(index, 1, { day, start_time: dates[0].toJSON(), end_time });\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetRows([...rows]);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Flatpickr\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={end_time ? dayjs(end_time).toDate() : undefined}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tenableTime: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmode: 'time',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taltFormat: 'G:i K',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taltInput: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(dates) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (dates.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trows.splice(index, 1, { day, end_time: dates[0].toJSON(), start_time });\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetRows([...rows]);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='btn btn-danger btn-sm'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trows.splice(index, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetRows([...rows]);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tRemove\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='form-group d-flex'>\r\n\t\t\t\t\t\t\t<button type='button' className='btn btn-secondary' onClick={() => history.goBack()} disabled={processing}>\r\n\t\t\t\t\t\t\t\tReturn\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button type='submit' className='btn btn-primary ml-auto' disabled={processing}>\r\n\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Form;\r\n","import dayjs from 'dayjs';\r\nimport React, { FC } from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { Link } from 'react-router-dom';\r\nimport { UserContract } from '../../Contracts/user.contract';\r\nimport { handleError, Asker } from '../../helpers';\r\nimport { useURL } from '../../hooks';\r\nimport { State } from '../../Libraries/State';\r\nimport { scheduleService } from '../../Services/schedule.service';\r\nimport Table from '../Shared/Table';\r\n\r\ntype Props = {};\r\n\r\nconst List: FC<Props> = (props) => {\r\n\tconst { data: items, isFetching: loading, isError, error, refetch } = useQuery('schedules', () => scheduleService.fetch());\r\n\r\n\tconst url = useURL();\r\n\r\n\tif (isError) {\r\n\t\thandleError(error);\r\n\t}\r\n\r\n\tconst deleteItem = async (id: any) => {\r\n\t\ttry {\r\n\t\t\tif (await Asker.danger('Are you sure you want to delete this Schedule?')) {\r\n\t\t\t\tawait scheduleService.delete(id);\r\n\t\t\t\ttoastr.info('Schedule has been deleted.', 'Notice');\r\n\t\t\t\trefetch();\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst user = State.getInstance().get<UserContract>('user');\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Course',\r\n\t\t\taccessor: 'course',\r\n\t\t\tminWidth: '375px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Subject',\r\n\t\t\taccessor: 'subject',\r\n\t\t\tminWidth: '350px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Section',\r\n\t\t\taccessor: 'section',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Teacher',\r\n\t\t\taccessor: 'teacher',\r\n\t\t\tminWidth: '250px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Year',\r\n\t\t\taccessor: 'year',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Times',\r\n\t\t\taccessor: 'times',\r\n\t\t\tminWidth: '250px',\r\n\t\t},\r\n\t];\r\n\r\n\tif (user?.role === 'Registrar') {\r\n\t\tcolumns.push({\r\n\t\t\ttitle: 'Actions',\r\n\t\t\taccessor: 'actions',\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Table\r\n\t\t\tonRefresh={() => refetch()}\r\n\t\t\ttitle='Schedules'\r\n\t\t\tloading={loading}\r\n\t\t\titems={\r\n\t\t\t\titems?.map((schedule) => ({\r\n\t\t\t\t\t...schedule,\r\n\t\t\t\t\tsection: schedule.section?.name,\r\n\t\t\t\t\tsubject: schedule?.subject?.description,\r\n\t\t\t\t\tcourse: `${schedule.course?.code}${schedule.major ? ` - Major in ${schedule.major.name}` : ''}`,\r\n\t\t\t\t\tteacher: `${schedule.teacher?.last_name}, ${schedule.teacher?.first_name} ${schedule.teacher?.middle_name || ''}`,\r\n\t\t\t\t\ttimes: (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{schedule.payload.map((row, index) =>\r\n\t\t\t\t\t\t\t\trow.start_time && row.end_time ? (\r\n\t\t\t\t\t\t\t\t\t<span className='d-block' key={index}>\r\n\t\t\t\t\t\t\t\t\t\t{row.day} {dayjs(row.start_time).format('hh:mm A')} - {dayjs(row.end_time).format('hh:mm A')}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t),\r\n\t\t\t\t\tactions: (\r\n\t\t\t\t\t\t<div style={{ minWidth: '250px' }}>\r\n\t\t\t\t\t\t\t{user?.role === 'Registrar' ? (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<Link to={url(`${schedule.id}/edit`)} className='btn btn-warning btn-sm mx-1'>\r\n\t\t\t\t\t\t\t\t\t\t<i className='fas fa-edit'></i>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='btn btn-danger btn-sm mx-1'\r\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\tdeleteItem(schedule.id);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<i className='fas fa-trash'></i>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t),\r\n\t\t\t\t})) || []\r\n\t\t\t}\r\n\t\t\tcolumns={columns}\r\n\t\t\tbuttons={\r\n\t\t\t\t<>\r\n\t\t\t\t\t{user?.role === 'Registrar' ? (\r\n\t\t\t\t\t\t<Link to={url(`add`)} className='btn btn-primary btn-sm ml-2'>\r\n\t\t\t\t\t\t\t<i className='fas fa-plus'></i>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default List;\r\n","import dayjs from 'dayjs';\r\nimport React, { FC } from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { UserContract } from '../../../Contracts/user.contract';\r\nimport { State } from '../../../Libraries/State';\r\nimport { scheduleService } from '../../../Services/schedule.service';\r\nimport { userService } from '../../../Services/user.service';\r\n\r\ntype Props = {};\r\n\r\nconst Schedules: FC<Props> = (props) => {\r\n\tconst state = State.getInstance();\r\n\tconst temp = state.get<UserContract>('user');\r\n\tconst { data: user } = useQuery(['user', temp?.id], () => userService.fetchOne(temp?.id));\r\n\tconst { data: schedules } = useQuery('schedules', () => scheduleService.fetch());\r\n\r\n\tconst admission = user?.admissions?.last();\r\n\r\n\tif (!user || !admission) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='container'>\r\n\t\t\t<div className='row'>\r\n\t\t\t\t<div className='col-12 col-md-6 offset-md-3 text-center'>\r\n\t\t\t\t\t<h4>EASTERN MINDORO COLLEGE</h4>\r\n\t\t\t\t\t<p>Bongabong, Oriental Mindoro</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className='d-flex mt-5'>\r\n\t\t\t\t<span className='mr-auto'>\r\n\t\t\t\t\t<b>Name:</b> {user.last_name}, {user.first_name} {user.middle_name || ''}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className='ml-auto'>\r\n\t\t\t\t\t<b>Semester:</b> {admission.term}\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div className='d-flex'>\r\n\t\t\t\t<span className='mr-auto'>\r\n\t\t\t\t\t<b>Year Level:</b> {admission.level}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className='ml-auto'>\r\n\t\t\t\t\t<b>Status: </b> {admission.status}\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div className='d-flex mt-3'>\r\n\t\t\t\t<span className='mr-auto'>\r\n\t\t\t\t\t<b>Student Number:</b> {user.uuid}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className='ml-auto'>\r\n\t\t\t\t\t<b>Year:</b> {admission.year?.start} - {admission.year?.end}\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<table className='table table-bordered mt-3'>\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>Subject Code</th>\r\n\t\t\t\t\t\t<th>Description</th>\r\n\t\t\t\t\t\t<th>Schedules</th>\r\n\t\t\t\t\t\t<th>Instructor</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{schedules?.map((schedule, index) => (\r\n\t\t\t\t\t\t<tr key={index}>\r\n\t\t\t\t\t\t\t<td>{schedule.subject?.code}</td>\r\n\t\t\t\t\t\t\t<td>{schedule.subject?.description}</td>\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t{schedule.payload.map((row) => {\r\n\t\t\t\t\t\t\t\t\tif (!row.start_time && !row.end_time) {\r\n\t\t\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<span className='d-block'>\r\n\t\t\t\t\t\t\t\t\t\t\t{row.day} {dayjs(row.start_time!).format('hh:mm A')} - {dayjs(row.end_time!).format('hh:mm A')}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t{schedule.teacher?.last_name}, {schedule.teacher?.first_name} {schedule.teacher?.middle_name || ''}\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Schedules;\r\n","import React, { FC } from 'react';\r\nimport { Route, RouteProps, Switch } from 'react-router-dom';\r\nimport { UserContract } from '../../Contracts/user.contract';\r\nimport { useURL } from '../../hooks';\r\nimport { State } from '../../Libraries/State';\r\nimport Form from './Form';\r\nimport List from './List';\r\nimport SchedulesStudent from '../Dashboard/Student/Schedules';\r\n\r\ntype Props = {};\r\n\r\nconst Schedules: FC<Props> = (props) => {\r\n\tconst url = useURL();\r\n\tconst user = State.getInstance().get<UserContract>('user');\r\n\r\n\tconst routes: RouteProps[] = [\r\n\t\t{\r\n\t\t\tpath: url('/'),\r\n\t\t\texact: true,\r\n\t\t\tcomponent: user?.role !== 'Student' ? List : SchedulesStudent,\r\n\t\t},\r\n\t];\r\n\r\n\tif (user?.role !== 'Student') {\r\n\t\troutes.push({\r\n\t\t\tpath: url('/add'),\r\n\t\t\tcomponent: Form,\r\n\t\t});\r\n\t\troutes.push({\r\n\t\t\tpath: url('/:id/edit'),\r\n\t\t\tcomponent: Form,\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Switch>\r\n\t\t\t{routes.map((route, index) => (\r\n\t\t\t\t<Route {...route} key={index} />\r\n\t\t\t))}\r\n\t\t</Switch>\r\n\t);\r\n};\r\n\r\nexport default Schedules;\r\n","import { GradeContract } from '../Contracts/grade.contract';\r\nimport { Service } from '../Libraries/Service';\r\n\r\nexport class GradeService extends Service<GradeContract> {}\r\n\r\nexport const gradeService = new GradeService('/grades');\r\n","import axios from 'axios';\r\nimport dayjs from 'dayjs';\r\nimport React, { createRef, FC } from 'react';\r\nimport { useEffect } from 'react';\r\nimport { useCallback } from 'react';\r\nimport { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useQuery } from 'react-query';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { v4 } from 'uuid';\r\nimport { CourseContract } from '../../Contracts/course.contract';\r\nimport { MajorContract } from '../../Contracts/major.contract';\r\nimport { UserContract } from '../../Contracts/user.contract';\r\nimport { YearContract } from '../../Contracts/year.contract';\r\nimport { handleError, Asker, isBehind, findSection } from '../../helpers';\r\nimport { useCurrentYear, useNullable } from '../../hooks';\r\nimport { State } from '../../Libraries/State';\r\nimport { routes } from '../../routes';\r\nimport { courseService } from '../../Services/course.service';\r\nimport { gradeService } from '../../Services/grade.service';\r\nimport { subjectService } from '../../Services/subject.service';\r\nimport { userService } from '../../Services/user.service';\r\nimport { yearService } from '../../Services/year.service';\r\nimport Flatpickr from 'react-flatpickr';\r\n\r\nimport Table from '../Shared/Table';\r\n\r\ntype GradeContract = {\r\n\tstudent_id: number;\r\n\tsubject_id: number;\r\n\tteacher_id: number;\r\n\tgrade: number;\r\n\tstatus: string;\r\n\tyear_id: number;\r\n};\r\n\r\ntype UserInput = {\r\n\tpayment_status: 'Not Paid' | 'Partially Paid' | 'Fully Paid';\r\n};\r\n\r\ntype Props = {};\r\n\r\nconst incrementModalRef = v4();\r\nconst updatePaymentModalRef = v4();\r\n\r\nconst List: FC<Props> = (props) => {\r\n\tconst [processing, setProcessing] = useState(false);\r\n\tconst { data: items, isFetching: loading, isError, error, refetch } = useQuery('users', () => userService.fetch());\r\n\tconst { data: subjects } = useQuery('subjects', () => subjectService.fetch());\r\n\tconst { data: courses } = useQuery('courses', () => courseService.fetch());\r\n\tconst [course, setCourse] = useNullable<CourseContract>();\r\n\tconst [major, setMajor] = useNullable<MajorContract>();\r\n\tconst {\r\n\t\tregister: registerGrade,\r\n\t\thandleSubmit,\r\n\t\treset,\r\n\t} = useForm<GradeContract>({\r\n\t\tdefaultValues: {\r\n\t\t\tgrade: 65,\r\n\t\t},\r\n\t});\r\n\tconst { register: registerUser, handleSubmit: handleSubmitUser, reset: resetUser, setValue: setValueUser } = useForm<UserInput>();\r\n\tconst [student, setStudent] = useNullable<number>();\r\n\tconst addGradeModalRef = createRef<HTMLDivElement>();\r\n\tconst { data: year } = useCurrentYear();\r\n\tconst history = useHistory();\r\n\tconst [semesterStart, setSemesterStart] = useNullable<Date>();\r\n\tconst [semesterEnd, setSemesterEnd] = useNullable<Date>();\r\n\tconst [registrationStart, setRegistrationStart] = useNullable<Date>();\r\n\tconst [registrationEnd, setRegistrationEnd] = useNullable<Date>();\r\n\tconst [gradeStart, setGradeStart] = useNullable<Date>();\r\n\tconst [gradeEnd, setGradeEnd] = useNullable<Date>();\r\n\tconst {\r\n\t\tregister,\r\n\t\thandleSubmit: yearHandleSubmit,\r\n\t\treset: yearReset,\r\n\t} = useForm<YearContract>({\r\n\t\tdefaultValues: {\r\n\t\t\tstart: new Date().getFullYear(),\r\n\t\t\tend: new Date().getFullYear() + 1,\r\n\t\t\tcurrent: true,\r\n\t\t},\r\n\t});\r\n\r\n\tconst determine = useCallback(() => {\r\n\t\tif (history.location.pathname.includes('old')) {\r\n\t\t\treturn 'Old';\r\n\t\t} else if (history.location.pathname.includes('new')) {\r\n\t\t\treturn 'New';\r\n\t\t} else if (history.location.pathname.includes('behind')) {\r\n\t\t\treturn 'Behind';\r\n\t\t}\r\n\t\tthrow new Error();\r\n\t}, [history.location.pathname]);\r\n\r\n\tconst [type, setType] = useState(determine());\r\n\tconst user = State.getInstance().get<UserContract>('user');\r\n\tconst statuses = {\r\n\t\t'Not Paid': 'danger',\r\n\t\t'Fully Paid': 'success',\r\n\t\t'Partially Paid': 'warning',\r\n\t};\r\n\r\n\tif (isError) {\r\n\t\thandleError(error);\r\n\t}\r\n\r\n\tconst submitYear = async (data: YearContract) => {\r\n\t\tif (await Asker.notice('Are you sure you want to evaluate all students into a new school year?', 'Notice')) {\r\n\t\t\tsetProcessing(true);\r\n\t\t\ttry {\r\n\t\t\t\tdata.semester_start = semesterStart?.toJSON() || '';\r\n\t\t\t\tdata.semester_end = semesterEnd?.toJSON() || '';\r\n\t\t\t\tdata.registration_start = registrationStart?.toJSON() || '';\r\n\t\t\t\tdata.registration_end = registrationEnd?.toJSON() || '';\r\n\t\t\t\tdata.grade_start = gradeStart?.toJSON() || '';\r\n\t\t\t\tdata.grade_end = gradeEnd?.toJSON() || '';\r\n\t\t\t\tdata.current = true;\r\n\t\t\t\t$(`#${incrementModalRef}`).modal('hide');\r\n\t\t\t\tawait yearService.create(data);\r\n\t\t\t\tawait evaluate();\r\n\t\t\t\treset();\r\n\t\t\t} catch (error) {\r\n\t\t\t\thandleError(error);\r\n\t\t\t} finally {\r\n\t\t\t\tsetProcessing(false);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tconst evaluate = async () => {\r\n\t\ttry {\r\n\t\t\ttoastr.info('Processing students. Please wait.', 'Notice');\r\n\t\t\tconst {\r\n\t\t\t\tdata: { missing, failed, passed },\r\n\t\t\t} = await axios.post<{ missing: number; failed: number; passed: number }>('/admissions/increment');\r\n\t\t\ttoastr.success(\r\n\t\t\t\t`Processing done. \r\n                    <br />Passed Students: ${passed}\r\n                    <br />Failed Students: ${failed} \r\n                    <br />Subjects with missing grades: ${missing}`,\r\n\t\t\t\t'Success',\r\n\t\t\t\t{\r\n\t\t\t\t\tescapeHtml: false,\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\trefetch();\r\n\t\t} catch (error) {\r\n\t\t\ttoastr.error('Unable to process students.');\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst submitGrade = async (data: GradeContract) => {\r\n\t\ttry {\r\n\t\t\tdata.student_id = student!;\r\n\t\t\tdata.teacher_id = user!.id!;\r\n\t\t\tawait gradeService.create(data);\r\n\t\t\ttoastr.success('Grade added succesfully.');\r\n\t\t\trefetch();\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t} finally {\r\n\t\t\tif (addGradeModalRef.current) {\r\n\t\t\t\t$(addGradeModalRef.current).modal('hide');\r\n\t\t\t}\r\n\t\t\tsetStudent(null);\r\n\t\t\treset();\r\n\t\t}\r\n\t};\r\n\r\n\tconst submitUser = async (data: UserInput) => {\r\n\t\ttry {\r\n\t\t\tawait userService.update(student, data);\r\n\t\t\ttoastr.success('Student payment updated succesfully.');\r\n\t\t\trefetch();\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t} finally {\r\n\t\t\t$(`#${updatePaymentModalRef}`).modal('hide');\r\n\t\t\tsetStudent(null);\r\n\t\t\tresetUser();\r\n\t\t}\r\n\t};\r\n\r\n\tconst findAdmission = (student: UserContract) => {\r\n\t\tconst admission = student.admissions?.find((admission) => admission.year?.current);\r\n\t\tif (admission) {\r\n\t\t\treturn admission;\r\n\t\t}\r\n\r\n\t\treturn student.admissions?.last();\r\n\t};\r\n\r\n\tconst deleteItem = async (id: any) => {\r\n\t\ttry {\r\n\t\t\tif (await Asker.danger('Are you sure you want to delete this Student?')) {\r\n\t\t\t\tawait userService.delete(id);\r\n\t\t\t\ttoastr.info('Student has been deleted.', 'Notice');\r\n\t\t\t\trefetch();\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst reincrement = async (student: UserContract) => {\r\n\t\ttry {\r\n\t\t\tawait axios.post(`/users/${student.id}/reincrement`);\r\n\t\t\ttoastr.success('Student reincremented successfully.');\r\n\t\t\tawait refetch();\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tsetType(determine());\r\n\t}, [determine]);\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'ID Number',\r\n\t\t\taccessor: 'uuid',\r\n\t\t\tminWidth: '160px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Name',\r\n\t\t\taccessor: 'name',\r\n\t\t\tminWidth: '200px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Year',\r\n\t\t\taccessor: 'year',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Semester',\r\n\t\t\taccessor: 'semester',\r\n\t\t\tminWidth: '150px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Course',\r\n\t\t\taccessor: 'course',\r\n\t\t\tminWidth: '375px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Section',\r\n\t\t\taccessor: 'section',\r\n\t\t\tminWidth: '200px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Units Available',\r\n\t\t\taccessor: 'allowed_units',\r\n\t\t\tminWidth: '150px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Payment Status',\r\n\t\t\taccessor: 'payment_status',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Status',\r\n\t\t\taccessor: 'status',\r\n\t\t},\r\n\t];\r\n\r\n\tif (['Registrar', 'Teacher', 'Admin'].includes(user?.role || '')) {\r\n\t\tcolumns.push({ title: 'Actions', accessor: 'actions', minWidth: '350px' });\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Table\r\n\t\t\t\tonRefresh={() => refetch()}\r\n\t\t\t\ttitle={`${type} Students`}\r\n\t\t\t\tloading={loading}\r\n\t\t\t\titems={\r\n\t\t\t\t\titems\r\n\t\t\t\t\t\t?.filter((user) => user.role === 'Student' && user.active)\r\n\t\t\t\t\t\t.filter((student) => {\r\n\t\t\t\t\t\t\tif (type !== 'Behind') {\r\n\t\t\t\t\t\t\t\treturn student.type === type && !isBehind(student);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn isBehind(student);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.filter((student) => {\r\n\t\t\t\t\t\t\tconst admission = student.admissions?.find((admission) => admission.year?.current);\r\n\r\n\t\t\t\t\t\t\tif (admission) {\r\n\t\t\t\t\t\t\t\tif (course && major) {\r\n\t\t\t\t\t\t\t\t\treturn admission.course_id === course.id && admission.major_id === major.id;\r\n\t\t\t\t\t\t\t\t} else if (course) {\r\n\t\t\t\t\t\t\t\t\treturn admission.course_id === course.id;\r\n\t\t\t\t\t\t\t\t} else if (major) {\r\n\t\t\t\t\t\t\t\t\treturn admission.major_id === major.id;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.map((student) => ({\r\n\t\t\t\t\t\t\t...student,\r\n\t\t\t\t\t\t\tname: (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t{student.last_name}, {student.first_name} {student.middle_name || ''}\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tyear: findAdmission(student)?.level,\r\n\t\t\t\t\t\t\tcourse: `${findAdmission(student)?.course?.code || ''}${\r\n\t\t\t\t\t\t\t\tfindAdmission(student)?.major ? ` - Major in ${findAdmission(student)?.major?.name || 'N/A'}` : ''\r\n\t\t\t\t\t\t\t}`,\r\n\t\t\t\t\t\t\tbirthday: dayjs(student.birthday).format('MMMM DD, YYYY'),\r\n\t\t\t\t\t\t\tage: new Date().getFullYear() - dayjs(student.birthday).year(),\r\n\t\t\t\t\t\t\tstatus: student.active ? (\r\n\t\t\t\t\t\t\t\t<span className='badge badge-success'>Confirmed</span>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<span className='badge badge-danger'>Unconfirmed</span>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tpayment_status: (\r\n\t\t\t\t\t\t\t\t<span className={`badge badge-${statuses[student.payment_status]}`}>{student.payment_status}</span>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tsection: <>{findSection(student)?.name}</>,\r\n\t\t\t\t\t\t\tsemester: findAdmission(student)?.year?.semester,\r\n\t\t\t\t\t\t\tactions: (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t{user?.role === 'Registrar' ? (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\t\tto={`/dashboard/admissions/${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstudent.admissions?.find((admission) => admission?.year?.current)?.id\r\n\t\t\t\t\t\t\t\t\t\t\t\t}/edit`}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='btn btn-warning btn-sm mx-1'\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle='Edit'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className='fas fa-edit'></i>\r\n\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='btn btn-info btn-sm mx-1'\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle='Update Payment'\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst modal = $(`#${updatePaymentModalRef}`);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (modal.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetStudent(student.id!);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetValueUser('payment_status', student.payment_status);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodal.modal('toggle');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className='fas fa-money-bill'></i>\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t{isBehind(student) ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='btn btn-primary btn-sm'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle='Re-Increment Student'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={async (e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (await Asker.notice('Are you sure to reincrement this student?')) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait reincrement(student);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='fas fa-university'></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t\t\t{['Registrar', 'Admin'].includes(user?.role || '') && !isBehind(student) ? (\r\n\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\tto={`${routes.DASHBOARD}${routes.STUDENTS}/${student.id}/subjects`}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='btn btn-primary btn-sm mx-1'\r\n\t\t\t\t\t\t\t\t\t\t\ttitle='Add Subjects'>\r\n\t\t\t\t\t\t\t\t\t\t\t<i className='fas fa-book'></i>\r\n\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t\t\t{user?.role === 'Teacher' ? (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='btn btn-primary btn-sm mx-1'\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle='Add Grade'\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (addGradeModalRef.current) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetStudent(student.id!);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$(addGradeModalRef.current).modal('toggle');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className='fas fa-chart-bar'></i>\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='btn btn-danger btn-sm mx-1 d-none'\r\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\tdeleteItem(student.id);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<i className='fas fa-trash'></i>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t})) || []\r\n\t\t\t\t}\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\tmisc={\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<label className='mb-0 mt-2 mx-1'>\r\n\t\t\t\t\t\t\tCourse:\r\n\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\tclassName='custom-select custom-select-sm form-control form-control-sm'\r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tconst id = e.target.value.toNumber();\r\n\t\t\t\t\t\t\t\t\tif (id === 0) {\r\n\t\t\t\t\t\t\t\t\t\tsetCourse(null);\r\n\t\t\t\t\t\t\t\t\t\tsetMajor(null);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tconst course = courses?.find((course) => course.id === id);\r\n\t\t\t\t\t\t\t\t\t\tif (course) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetCourse(course);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<option value='0'>All</option>\r\n\t\t\t\t\t\t\t\t{courses?.map((course, index) => (\r\n\t\t\t\t\t\t\t\t\t<option value={course.id} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t{course.code}\r\n\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t{course ? (\r\n\t\t\t\t\t\t\t<label className='mb-0 mt-2 mx-1'>\r\n\t\t\t\t\t\t\t\tMajor:\r\n\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\tclassName='custom-select custom-select-sm form-control form-control-sm'\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tconst id = e.target.value.toNumber();\r\n\t\t\t\t\t\t\t\t\t\tif (id === 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetMajor(null);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tconst major = course?.majors?.find((major) => major.id === id);\r\n\t\t\t\t\t\t\t\t\t\t\tif (major) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetMajor(major);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<option value='0'>All</option>\r\n\t\t\t\t\t\t\t\t\t{course.majors?.map((major, index) => (\r\n\t\t\t\t\t\t\t\t\t\t<option value={major.id} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t{major.name}\r\n\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t</>\r\n\t\t\t\t}\r\n\t\t\t\tbuttons={\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{user?.role === 'Registrar' ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{type !== 'Behind' ? (\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='btn btn-secondary btn-sm mx-1'\r\n\t\t\t\t\t\t\t\t\t\ttitle='Evaluate Students'\r\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\t$(`#${incrementModalRef}`).modal('show');\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<i className='fas fa-chevron-up'></i>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={`${axios.defaults.baseURL}/exports/registrar/classlist/regular-and-irregular`}\r\n\t\t\t\t\t\t\t\t\tdownload\r\n\t\t\t\t\t\t\t\t\tclassName='btn btn-warning btn-sm mx-1'\r\n\t\t\t\t\t\t\t\t\ttitle='Download Classlist per Regular and Irregular Student'>\r\n\t\t\t\t\t\t\t\t\t<i className='fas fa-file-excel'></i>\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={`${axios.defaults.baseURL}/exports/registrar/classlist/course-and-major`}\r\n\t\t\t\t\t\t\t\t\tdownload\r\n\t\t\t\t\t\t\t\t\tclassName='btn btn-primary btn-sm mx-1'\r\n\t\t\t\t\t\t\t\t\ttitle='Download Classlist per Course and Major'>\r\n\t\t\t\t\t\t\t\t\t<i className='fas fa-file-excel'></i>\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={`${axios.defaults.baseURL}/exports/registrar/classlist/subject`}\r\n\t\t\t\t\t\t\t\t\tdownload\r\n\t\t\t\t\t\t\t\t\tclassName='btn btn-success btn-sm mx-1'\r\n\t\t\t\t\t\t\t\t\ttitle='Download Classlist per Subject'>\r\n\t\t\t\t\t\t\t\t\t<i className='fas fa-file-excel'></i>\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t</>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t\t<div ref={addGradeModalRef} className='modal fade' tabIndex={-1}>\r\n\t\t\t\t<div className='modal-dialog modal-dialog-centered modal-lg'>\r\n\t\t\t\t\t<div className='modal-content'>\r\n\t\t\t\t\t\t<div className='modal-header'>\r\n\t\t\t\t\t\t\t<h5 className='modal-title'>Add Grade</h5>\r\n\t\t\t\t\t\t\t<button type='button' className='close' data-dismiss='modal'>\r\n\t\t\t\t\t\t\t\t<span aria-hidden='true'>&times;</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<form onSubmit={handleSubmit(submitGrade)}>\r\n\t\t\t\t\t\t\t<div className='modal-body'>\r\n\t\t\t\t\t\t\t\t<input type='hidden' {...registerGrade('year_id')} value={year?.id} />\r\n\t\t\t\t\t\t\t\t<div className='form-group'>\r\n\t\t\t\t\t\t\t\t\t<label htmlFor='subject_id'>Subject</label>\r\n\t\t\t\t\t\t\t\t\t<select {...registerGrade('subject_id')} id='subject_id' className='form-control'>\r\n\t\t\t\t\t\t\t\t\t\t<option> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t\t{subjects?.map((subject, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<option value={subject.id} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{subject.code}\r\n\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className='form-group'>\r\n\t\t\t\t\t\t\t\t\t<label htmlFor='grade'>Grade</label>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t{...registerGrade('grade')}\r\n\t\t\t\t\t\t\t\t\t\ttype='number'\r\n\t\t\t\t\t\t\t\t\t\tid='grade'\r\n\t\t\t\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\t\t\t\tmax={100}\r\n\t\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className='form-group'>\r\n\t\t\t\t\t\t\t\t\t<label htmlFor='status'>Status</label>\r\n\t\t\t\t\t\t\t\t\t<input {...registerGrade('status')} type='text' id='status' className='form-control' />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='modal-footer'>\r\n\t\t\t\t\t\t\t\t<button type='submit' className='btn btn-primary btn-sm'>\r\n\t\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button type='button' className='btn btn-secondary btn-sm' data-dismiss='modal'>\r\n\t\t\t\t\t\t\t\t\tClose\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div id={updatePaymentModalRef} className='modal fade' tabIndex={-1}>\r\n\t\t\t\t<div className='modal-dialog modal-dialog-centered modal-lg'>\r\n\t\t\t\t\t<div className='modal-content'>\r\n\t\t\t\t\t\t<div className='modal-header'>\r\n\t\t\t\t\t\t\t<h5 className='modal-title'>Update Payment</h5>\r\n\t\t\t\t\t\t\t<button type='button' className='close' data-dismiss='modal'>\r\n\t\t\t\t\t\t\t\t<span aria-hidden='true'>&times;</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<form onSubmit={handleSubmitUser(submitUser)}>\r\n\t\t\t\t\t\t\t<div className='modal-body'>\r\n\t\t\t\t\t\t\t\t<div className='form-group'>\r\n\t\t\t\t\t\t\t\t\t<label htmlFor='payment_status'>Payment Status</label>\r\n\t\t\t\t\t\t\t\t\t<select {...registerUser('payment_status')} id='subject_id' className='form-control'>\r\n\t\t\t\t\t\t\t\t\t\t<option value='Not Paid'>Not Paid</option>\r\n\t\t\t\t\t\t\t\t\t\t<option value='Partially Paid'>Partially Paid</option>\r\n\t\t\t\t\t\t\t\t\t\t<option value='Fully Paid'>Fully Paid</option>\r\n\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='modal-footer'>\r\n\t\t\t\t\t\t\t\t<button type='submit' className='btn btn-primary btn-sm'>\r\n\t\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button type='button' className='btn btn-secondary btn-sm' data-dismiss='modal'>\r\n\t\t\t\t\t\t\t\t\tClose\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div id={incrementModalRef} className='modal fade' tabIndex={-1}>\r\n\t\t\t\t<div className='modal-dialog modal-dialog-centered modal-lg'>\r\n\t\t\t\t\t<div className='modal-content'>\r\n\t\t\t\t\t\t<form onSubmit={yearHandleSubmit(submitYear)}>\r\n\t\t\t\t\t\t\t<div className='modal-header'>\r\n\t\t\t\t\t\t\t\t<h5 className='modal-title'>Increment to new School Year</h5>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\tclassName='close'\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t$(`#${incrementModalRef}`).modal('hide');\r\n\t\t\t\t\t\t\t\t\t\tyearReset();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<span>&times;</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='modal-body'>\r\n\t\t\t\t\t\t\t\t<div className='mb-3'>\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\tCurrent Year: {year?.start} - {year?.end}\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<p>Current Semester: {year?.semester}</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className='form-row'>\r\n\t\t\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor='start'>Start</label>\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t{...register('start')}\r\n\t\t\t\t\t\t\t\t\t\t\ttype='number'\r\n\t\t\t\t\t\t\t\t\t\t\tid='start'\r\n\t\t\t\t\t\t\t\t\t\t\tmin={new Date().getFullYear()}\r\n\t\t\t\t\t\t\t\t\t\t\tmax={new Date().getFullYear() + 10}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor='end'>End</label>\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t{...register('end')}\r\n\t\t\t\t\t\t\t\t\t\t\ttype='number'\r\n\t\t\t\t\t\t\t\t\t\t\tid='end'\r\n\t\t\t\t\t\t\t\t\t\t\tmin={new Date().getFullYear()}\r\n\t\t\t\t\t\t\t\t\t\t\tmax={new Date().getFullYear() + 10}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='form-group col-12'>\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor='semester'>Semester</label>\r\n\t\t\t\t\t\t\t\t\t\t<select {...register('semester')} id='semester' className='form-control'>\r\n\t\t\t\t\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t\t\t<option value='1st Semester'>1st Semester</option>\r\n\t\t\t\t\t\t\t\t\t\t\t<option value='2nd Semester'>2nd Semester</option>\r\n\t\t\t\t\t\t\t\t\t\t\t<option value='Summer'>Summer</option>\r\n\t\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor='semester_start'>Semester Start</label>\r\n\t\t\t\t\t\t\t\t\t\t<Flatpickr\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={semesterStart || undefined}\r\n\t\t\t\t\t\t\t\t\t\t\tid='semester_start'\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(dates) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (dates.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetSemesterStart(dates[0]);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor='semester_end'>Semester End</label>\r\n\t\t\t\t\t\t\t\t\t\t<Flatpickr\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={semesterEnd || undefined}\r\n\t\t\t\t\t\t\t\t\t\t\tid='semester_end'\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(dates) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (dates.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetSemesterEnd(dates[0]);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor='registration_start'>Registration Start</label>\r\n\t\t\t\t\t\t\t\t\t\t<Flatpickr\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={registrationStart || undefined}\r\n\t\t\t\t\t\t\t\t\t\t\tid='registration_start'\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(dates) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (dates.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetRegistrationStart(dates[0]);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor='registration_end'>Registration End</label>\r\n\t\t\t\t\t\t\t\t\t\t<Flatpickr\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={registrationEnd || undefined}\r\n\t\t\t\t\t\t\t\t\t\t\tid='registration_end'\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(dates) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (dates.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetRegistrationEnd(dates[0]);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor='grade_start'>Grade Encoding Start</label>\r\n\t\t\t\t\t\t\t\t\t\t<Flatpickr\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={gradeStart || undefined}\r\n\t\t\t\t\t\t\t\t\t\t\tid='grade_start'\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(dates) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (dates.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetGradeStart(dates[0]);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t\t\t\toptions={{\r\n\t\t\t\t\t\t\t\t\t\t\t\taltInput: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\taltFormat: 'F j, Y G:i K',\r\n\t\t\t\t\t\t\t\t\t\t\t\tenableTime: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\tdateFormat: 'F j, Y G:i K',\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor='grade_end'>Grade Encoding End</label>\r\n\t\t\t\t\t\t\t\t\t\t<Flatpickr\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={gradeEnd || undefined}\r\n\t\t\t\t\t\t\t\t\t\t\tid='grade_end'\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(dates) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (dates.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetGradeEnd(dates[0]);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t\t\t\toptions={{\r\n\t\t\t\t\t\t\t\t\t\t\t\taltInput: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\taltFormat: 'F j, Y G:i K',\r\n\t\t\t\t\t\t\t\t\t\t\t\tenableTime: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\tdateFormat: 'F j, Y G:i K',\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='modal-footer d-flex'>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\tclassName='btn btn-secondary'\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t$(`#${incrementModalRef}`).modal('hide');\r\n\t\t\t\t\t\t\t\t\t\tyearReset();\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}>\r\n\t\t\t\t\t\t\t\t\tReturn\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button type='submit' className='btn btn-primary ml-auto' disabled={processing}>\r\n\t\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default List;\r\n","import axios from 'axios';\r\nimport dayjs from 'dayjs';\r\nimport { trim } from 'lodash';\r\nimport React, { FC, useState } from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { useHistory, useParams } from 'react-router';\r\nimport { UserContract } from '../../Contracts/user.contract';\r\nimport { Asker, handleError } from '../../helpers';\r\nimport { useArray, useCurrentYear } from '../../hooks';\r\nimport { State } from '../../Libraries/State';\r\nimport { subjectService } from '../../Services/subject.service';\r\nimport { userService } from '../../Services/user.service';\r\n\r\ntype Props = {};\r\n\r\nconst Subjects: FC<Props> = (props) => {\r\n\tconst [processing, setProcessing] = useState(false);\r\n\tconst { id } = useParams<{ id: string }>();\r\n\tconst history = useHistory();\r\n\tconst [enrolled, setEnrolled] = useArray<number>();\r\n\tconst {\r\n\t\tdata: student,\r\n\t\terror,\r\n\t\tisError,\r\n\t} = useQuery(['users', id], () => userService.fetchOne(id), {\r\n\t\tonSuccess(student) {\r\n\t\t\tsetEnrolled(student.subjects?.map(({ id }) => id!)!);\r\n\t\t},\r\n\t});\r\n\tconst { data: subjects } = useQuery('subjects', () => subjectService.fetch());\r\n\tconst admission = student?.admissions?.find((admission) => admission.year?.current) || student?.admissions?.last();\r\n\tconst user = State.getInstance().get<UserContract>('user');\r\n\tconst { data: year } = useCurrentYear({ onSuccess: () => check() });\r\n\r\n\tconst submit = async () => {\r\n\t\tsetProcessing(true);\r\n\t\ttry {\r\n\t\t\tawait axios.post(`/users/${student?.id}/subjects`, {\r\n\t\t\t\tsubjects: enrolled,\r\n\t\t\t});\r\n\t\t\ttoastr.success('Subjects enrolled successfully.');\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t} finally {\r\n\t\t\tsetProcessing(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst check = async () => {\r\n\t\tif (year) {\r\n\t\t\tconst now = dayjs();\r\n\t\t\tconst start = dayjs(year.registration_start);\r\n\t\t\tconst end = dayjs(year.registration_end);\r\n\t\t\tif (now.isBefore(start)) {\r\n\t\t\t\tawait Asker.okay(`Enrollment will start at ${start.format('MMMM DD, YYYY')}. Please wait until the given date.`, 'Notice');\r\n\t\t\t\treturn history.goBack();\r\n\t\t\t}\r\n\t\t\tif (now.isAfter(end)) {\r\n\t\t\t\tawait Asker.okay(`Enrollment has already ended. Please enroll at the next enrollment phase.`, 'Notice');\r\n\t\t\t\treturn history.goBack();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tif (isError) {\r\n\t\thandleError(error);\r\n\t\thistory.goBack();\r\n\t\treturn null;\r\n\t}\r\n\r\n\tif (!student || !admission) {\r\n\t\treturn (\r\n\t\t\t<div className='container'>\r\n\t\t\t\t<div className='text-center'>\r\n\t\t\t\t\t<i className='fas fa-circle-notch fa-spin'></i>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='container'>\r\n\t\t\t<div className='card'>\r\n\t\t\t\t<div className='card-header'>\r\n\t\t\t\t\t<h4 className='card-title'>Student Subjects</h4>\r\n\t\t\t\t\t<p className='card-text'>\r\n\t\t\t\t\t\t{student.last_name}, {student.first_name} {student.middle_name || ''}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p className='card-text'>\r\n\t\t\t\t\t\tSchool Year: {admission?.year?.start} - {admission?.year?.end}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<small className='form-text text-muted'>\r\n\t\t\t\t\t\tSubjects with{' '}\r\n\t\t\t\t\t\t<sup>\r\n\t\t\t\t\t\t\t<i>\r\n\t\t\t\t\t\t\t\t<i className='fas fa-check'></i>\r\n\t\t\t\t\t\t\t</i>\r\n\t\t\t\t\t\t</sup>{' '}\r\n\t\t\t\t\t\tare enrolled.\r\n\t\t\t\t\t</small>\r\n\t\t\t\t\t{user?.role === 'Admin' ? (\r\n\t\t\t\t\t\t<small className='form-text text-muted'>\r\n\t\t\t\t\t\t\tSubjects are overrideable even if student has lesser allowed units than the subjects provided.\r\n\t\t\t\t\t\t</small>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='card-body'>\r\n\t\t\t\t\t<form\r\n\t\t\t\t\t\tonSubmit={(e) => {\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\tsubmit();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<div className='form-row'>\r\n\t\t\t\t\t\t\t{subjects\r\n\t\t\t\t\t\t\t\t?.filter((subject) => {\r\n\t\t\t\t\t\t\t\t\tif (user?.role === 'Admin') {\r\n\t\t\t\t\t\t\t\t\t\treturn subject.course_id === admission.course_id && subject.major_id === admission.major_id;\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\tsubject.level === admission.level &&\r\n\t\t\t\t\t\t\t\t\t\t\tsubject.term === admission.term &&\r\n\t\t\t\t\t\t\t\t\t\t\tsubject.course_id === admission.course_id &&\r\n\t\t\t\t\t\t\t\t\t\t\tsubject.major_id === admission.major_id\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.map((subject, index) => (\r\n\t\t\t\t\t\t\t\t\t<div className='form-group col-12 col-md-4' key={index}>\r\n\t\t\t\t\t\t\t\t\t\t<div className='custom-control custom-checkbox'>\r\n\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='custom-control-input'\r\n\t\t\t\t\t\t\t\t\t\t\t\tid={trim(`${subject.code}-${subject.id}`)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t\t\t\t\tchecked={enrolled.includes(subject.id!)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst id = e.target.value.toNumber();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (enrolled.includes(id)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst index = enrolled.findIndex((number) => number === id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tenrolled.splice(index, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tenrolled.push(id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetEnrolled([...enrolled]);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={subject.id}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<label className='custom-control-label' htmlFor={trim(`${subject.code}-${subject.id}`)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{subject.code} - {subject.description}{' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<sup>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{student.subjects?.find((sub) => sub.id === subject.id) ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='fas fa-check'></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</sup>\r\n\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='form-group'>\r\n\t\t\t\t\t\t\t<button type='submit' className='btn btn-primary btn-sm' disabled={processing}>\r\n\t\t\t\t\t\t\t\tSave\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Subjects;\r\n","import React, { FC } from 'react';\r\nimport { Route, RouteProps, Switch } from 'react-router-dom';\r\nimport { useURL } from '../../hooks';\r\nimport List from './List';\r\nimport Subjects from './Subjects';\r\n\r\ntype Props = {};\r\n\r\nconst Students: FC<Props> = (props) => {\r\n\tconst url = useURL();\r\n\r\n\tconst routes: RouteProps[] = [\r\n\t\t{\r\n\t\t\tpath: url('/new'),\r\n\t\t\tcomponent: List,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url('/old'),\r\n\t\t\tcomponent: List,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url('/behind'),\r\n\t\t\tcomponent: List,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url('/:id/subjects'),\r\n\t\t\tcomponent: Subjects,\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<Switch>\r\n\t\t\t{routes.map((route, index) => (\r\n\t\t\t\t<Route {...route} key={index} />\r\n\t\t\t))}\r\n\t\t</Switch>\r\n\t);\r\n};\r\n\r\nexport default Students;\r\n","import React, { FC, useEffect, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useQuery } from 'react-query';\r\nimport { useHistory, useRouteMatch } from 'react-router';\r\nimport { CourseContract } from '../../Contracts/course.contract';\r\nimport { Asker, handleError, setValues } from '../../helpers';\r\nimport { useMode, useNullable } from '../../hooks';\r\nimport { courseService } from '../../Services/course.service';\r\nimport { subjectService } from '../../Services/subject.service';\r\n\r\ntype Props = {};\r\n\r\ntype Inputs = {\r\n\tcode: string;\r\n\tdescription: string;\r\n\tcourse_id: number;\r\n\tlevel: string;\r\n\tterm: string;\r\n\tunits: number;\r\n\tforce: boolean;\r\n\tmajor_id?: number;\r\n};\r\n\r\nconst Form: FC<Props> = (props) => {\r\n\tconst [processing, setProcessing] = useState(false);\r\n\tconst [mode, setMode] = useMode();\r\n\tconst { register, setValue, handleSubmit, reset } = useForm<Inputs>({\r\n\t\tdefaultValues: {\r\n\t\t\tforce: false,\r\n\t\t},\r\n\t});\r\n\tconst [id, setID] = useState(-1);\r\n\tconst [course, setCourse] = useNullable<CourseContract>();\r\n\tconst history = useHistory();\r\n\tconst match = useRouteMatch<{ id: string }>();\r\n\tconst { data: courses } = useQuery('courses', () => courseService.fetch());\r\n\r\n\tconst fetch = async (id: any) => {\r\n\t\ttry {\r\n\t\t\tconst data = await subjectService.fetchOne(id);\r\n\t\t\tsetID(data.id!);\r\n\t\t\tsetValues(setValue, data);\r\n\t\t\tsetMode('Edit');\r\n\t\t\tsetCourse(data.course!);\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t\thistory.goBack();\r\n\t\t}\r\n\t};\r\n\r\n\tconst submit = async (data: Inputs) => {\r\n\t\tsetProcessing(true);\r\n\t\ttry {\r\n\t\t\tawait (mode === 'Add' ? subjectService.create(data) : subjectService.update(id, data));\r\n\t\t\ttoastr.success('Subject has been saved successfully.');\r\n\t\t\treset();\r\n\t\t} catch (error) {\r\n\t\t\tif (error.response?.status === 409) {\r\n\t\t\t\tif (await Asker.save(error.response?.data?.message)) {\r\n\t\t\t\t\tdata.force = true;\r\n\t\t\t\t\tawait submit(data);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\thandleError(error);\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tsetProcessing(false);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (match.path.includes('edit')) {\r\n\t\t\tfetch(match.params.id);\r\n\t\t}\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className='container-fluid'>\r\n\t\t\t<div className='card'>\r\n\t\t\t\t<div className='card-body'>\r\n\t\t\t\t\t<h5 className='card-title'>{mode} Subject</h5>\r\n\t\t\t\t\t<form onSubmit={handleSubmit(submit)}>\r\n\t\t\t\t\t\t<div className='form-row'>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='code'>Subject Code</label>\r\n\t\t\t\t\t\t\t\t<input {...register('code')} type='text' id='code' className='form-control' disabled={processing} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='description'>Description</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t{...register('description')}\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\tid='description'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='course_id'>Course Code</label>\r\n\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\t{...register('course_id')}\r\n\t\t\t\t\t\t\t\t\tid='course_id'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tconst id = e.target.value.toNumber();\r\n\r\n\t\t\t\t\t\t\t\t\t\tconst course = courses?.find((course) => course.id === id);\r\n\t\t\t\t\t\t\t\t\t\tif (course) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetCourse(course);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetCourse(null);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t{courses?.map((course, index) => (\r\n\t\t\t\t\t\t\t\t\t\t<option value={course.id} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t{course.code}\r\n\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{course && course.majors && course.majors.length > 0 ? (\r\n\t\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t\t<label htmlFor='major_id'>Major</label>\r\n\t\t\t\t\t\t\t\t\t<select {...register('major_id')} id='major_id' className='form-control'>\r\n\t\t\t\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t\t{course.majors.map((major, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<option value={major.id} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{major.name}\r\n\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='level'>Year Level</label>\r\n\t\t\t\t\t\t\t\t<select {...register('level')} id='level' className='form-control'>\r\n\t\t\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t<option value='1st'>1st</option>\r\n\t\t\t\t\t\t\t\t\t<option value='2nd'>2nd</option>\r\n\t\t\t\t\t\t\t\t\t<option value='3rd'>3rd</option>\r\n\t\t\t\t\t\t\t\t\t<option value='4th'>4th</option>\r\n\t\t\t\t\t\t\t\t\t<option value='5th'>5th</option>\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='units'>Number of Units</label>\r\n\t\t\t\t\t\t\t\t<select {...register('units')} id='units' className='form-control'>\r\n\t\t\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t{[1, 2, 3, 4, 5, 6].map((unit, index) => (\r\n\t\t\t\t\t\t\t\t\t\t<option value={unit} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t{unit}\r\n\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-4'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='term'>Term</label>\r\n\t\t\t\t\t\t\t\t<div className='custom-control custom-radio'>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t{...register('term')}\r\n\t\t\t\t\t\t\t\t\t\ttype='radio'\r\n\t\t\t\t\t\t\t\t\t\tid='1st-semester'\r\n\t\t\t\t\t\t\t\t\t\tclassName='custom-control-input'\r\n\t\t\t\t\t\t\t\t\t\tvalue='1st Semester'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<label className='custom-control-label' htmlFor='1st-semester'>\r\n\t\t\t\t\t\t\t\t\t\t1st Semester\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className='custom-control custom-radio'>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t{...register('term')}\r\n\t\t\t\t\t\t\t\t\t\ttype='radio'\r\n\t\t\t\t\t\t\t\t\t\tid='2nd-semester'\r\n\t\t\t\t\t\t\t\t\t\tclassName='custom-control-input'\r\n\t\t\t\t\t\t\t\t\t\tvalue='2nd Semester'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<label className='custom-control-label' htmlFor='2nd-semester'>\r\n\t\t\t\t\t\t\t\t\t\t2nd Semester\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className='custom-control custom-radio'>\r\n\t\t\t\t\t\t\t\t\t<input {...register('term')} type='radio' id='summer' className='custom-control-input' value='Summer' />\r\n\t\t\t\t\t\t\t\t\t<label className='custom-control-label' htmlFor='summer'>\r\n\t\t\t\t\t\t\t\t\t\tSummer\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='form-group d-flex'>\r\n\t\t\t\t\t\t\t<button type='button' className='btn btn-secondary' onClick={() => history.goBack()} disabled={processing}>\r\n\t\t\t\t\t\t\t\tReturn\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button type='submit' className='btn btn-primary ml-auto' disabled={processing}>\r\n\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Form;\r\n","import axios from 'axios';\r\nimport React, { FC, useMemo } from 'react';\r\nimport { useCallback } from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { Link } from 'react-router-dom';\r\nimport { CourseContract } from '../../Contracts/course.contract';\r\nimport { MajorContract } from '../../Contracts/major.contract';\r\nimport { SubjectContract } from '../../Contracts/subject.contract';\r\nimport { UserContract } from '../../Contracts/user.contract';\r\nimport { handleError, Asker } from '../../helpers';\r\nimport { useNullable, useURL } from '../../hooks';\r\nimport { State } from '../../Libraries/State';\r\nimport { courseService } from '../../Services/course.service';\r\nimport { subjectService } from '../../Services/subject.service';\r\nimport Table from '../Shared/Table';\r\n\r\ntype Props = {};\r\n\r\nconst List: FC<Props> = (props) => {\r\n\tconst { data: items, isFetching: loading, isError, error, refetch } = useQuery('subjects', () => subjectService.fetch());\r\n\tconst { data: courses } = useQuery('courses', () => courseService.fetch());\r\n\tconst [course, setCourse] = useNullable<CourseContract>();\r\n\tconst [major, setMajor] = useNullable<MajorContract>();\r\n\r\n\tconst url = useURL();\r\n\r\n\tif (isError) {\r\n\t\thandleError(error);\r\n\t}\r\n\r\n\tconst deleteItem = async (id: any) => {\r\n\t\ttry {\r\n\t\t\tif (await Asker.danger('Are you sure you want to delete this Subject?')) {\r\n\t\t\t\tawait subjectService.delete(id);\r\n\t\t\t\ttoastr.info('Subject has been deleted.', 'Notice');\r\n\t\t\t\trefetch();\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst user = State.getInstance().get<UserContract>('user');\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Subject Code',\r\n\t\t\taccessor: 'code',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Subject Description',\r\n\t\t\taccessor: 'description',\r\n\t\t\tminWidth: '450px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Course',\r\n\t\t\taccessor: 'course',\r\n\t\t\tminWidth: '350px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Year Level',\r\n\t\t\taccessor: 'level',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Semester',\r\n\t\t\taccessor: 'term',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Units',\r\n\t\t\taccessor: 'units',\r\n\t\t},\r\n\t];\r\n\r\n\tif (['Registrar', 'Teacher'].includes(user?.role || '')) {\r\n\t\tcolumns.push({\r\n\t\t\ttitle: 'Actions',\r\n\t\t\taccessor: 'actions',\r\n\t\t});\r\n\t}\r\n\r\n\tconst refine = (items: SubjectContract[]) =>\r\n\t\titems\r\n\t\t\t.filter((subject) => {\r\n\t\t\t\tif (course && major) {\r\n\t\t\t\t\treturn subject.course_id === course.id && subject.major_id === major.id;\r\n\t\t\t\t} else if (course) {\r\n\t\t\t\t\treturn subject.course_id === course.id;\r\n\t\t\t\t} else if (major) {\r\n\t\t\t\t\treturn subject.major_id === major.id;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t})\r\n\t\t\t.map((subject) => ({\r\n\t\t\t\t...subject,\r\n\t\t\t\tcourse: `${subject.course?.code}${subject.major ? ` - Major in ${subject.major.name}` : ''}`,\r\n\t\t\t\tactions: (\r\n\t\t\t\t\t<div style={{ minWidth: '350px' }}>\r\n\t\t\t\t\t\t{user?.role === 'Teacher' ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Link to={url(`${subject.id}/view`)} className='btn btn-info btn-sm mx-1' title='View'>\r\n\t\t\t\t\t\t\t\t\t<i className='fas fa-eye'></i>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref={`${axios.defaults.baseURL}/exports/teacher/classlist/${subject.id}`}\r\n\t\t\t\t\t\t\t\t\tdownload\r\n\t\t\t\t\t\t\t\t\tclassName={`btn btn-warning btn-sm mx-1 ${\r\n\t\t\t\t\t\t\t\t\t\tsubject.students_count && subject.students_count > 0 ? '' : 'disabled'\r\n\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\ttitle='Download Classlist'>\r\n\t\t\t\t\t\t\t\t\t<i className='fas fa-file-excel'></i>\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t{user?.role === 'Registrar' ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Link to={url(`${subject.id}/edit`)} className='btn btn-warning btn-sm mx-1'>\r\n\t\t\t\t\t\t\t\t\t<i className='fas fa-edit'></i>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName='btn btn-danger btn-sm mx-1'\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\tdeleteItem(subject.id);\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<i className='fas fa-trash'></i>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t),\r\n\t\t\t}));\r\n\r\n\tconst memoizedRefine = useCallback(refine, [refine]);\r\n\r\n\tconst memoized = useMemo(() => memoizedRefine(items || []), [items, memoizedRefine]);\r\n\tconst raw = refine(items || []);\r\n\r\n\treturn (\r\n\t\t<Table\r\n\t\t\tonRefresh={() => refetch()}\r\n\t\t\ttitle='Subjects'\r\n\t\t\tloading={loading}\r\n\t\t\titems={items && items.length >= 250 ? memoized : raw}\r\n\t\t\tcolumns={columns}\r\n\t\t\tbuttons={\r\n\t\t\t\t<>\r\n\t\t\t\t\t{user?.role === 'Registrar' ? (\r\n\t\t\t\t\t\t<Link to={url(`add`)} className='btn btn-primary btn-sm ml-2'>\r\n\t\t\t\t\t\t\t<i className='fas fa-plus'></i>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t\tmisc={\r\n\t\t\t\t<>\r\n\t\t\t\t\t<label className='mb-0 mt-2 mx-1'>\r\n\t\t\t\t\t\tCourse:\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tclassName='custom-select custom-select-sm form-control form-control-sm'\r\n\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\tconst id = e.target.value.toNumber();\r\n\t\t\t\t\t\t\t\tif (id === 0) {\r\n\t\t\t\t\t\t\t\t\tsetCourse(null);\r\n\t\t\t\t\t\t\t\t\tsetMajor(null);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tconst course = courses?.find((course) => course.id === id);\r\n\t\t\t\t\t\t\t\t\tif (course) {\r\n\t\t\t\t\t\t\t\t\t\tsetCourse(course);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<option value='0'>All</option>\r\n\t\t\t\t\t\t\t{courses?.map((course, index) => (\r\n\t\t\t\t\t\t\t\t<option value={course.id} key={index}>\r\n\t\t\t\t\t\t\t\t\t{course.code}\r\n\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t{course ? (\r\n\t\t\t\t\t\t<label className='mb-0 mt-2 mx-1'>\r\n\t\t\t\t\t\t\tMajor:\r\n\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\tclassName='custom-select custom-select-sm form-control form-control-sm'\r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tconst id = e.target.value.toNumber();\r\n\t\t\t\t\t\t\t\t\tif (id === 0) {\r\n\t\t\t\t\t\t\t\t\t\tsetMajor(null);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tconst major = course?.majors?.find((major) => major.id === id);\r\n\t\t\t\t\t\t\t\t\t\tif (major) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetMajor(major);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<option value='0'>All</option>\r\n\t\t\t\t\t\t\t\t{course.majors?.map((major, index) => (\r\n\t\t\t\t\t\t\t\t\t<option value={major.id} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t{major.name}\r\n\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default List;\r\n","import { AxiosError } from 'axios';\r\nimport dayjs from 'dayjs';\r\nimport React, { FC } from 'react';\r\nimport { useEffect } from 'react';\r\nimport { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useQuery } from 'react-query';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport { UserContract } from '../../Contracts/user.contract';\r\nimport { Asker, findSection, handleError, isBehind } from '../../helpers';\r\nimport { useCurrentYear, useNullable } from '../../hooks';\r\nimport { State } from '../../Libraries/State';\r\nimport { gradeService } from '../../Services/grade.service';\r\nimport { subjectService } from '../../Services/subject.service';\r\nimport Table from '../Shared/Table';\r\n\r\ntype Props = {};\r\n\r\ntype Inputs = {\r\n\tstudent_id: number;\r\n\tsubject_id: number;\r\n\tteacher_id: number;\r\n\tgrade: number;\r\n\tstatus: string;\r\n\tyear_id: number;\r\n};\r\n\r\nconst View: FC<Props> = (props) => {\r\n\tconst [processing, setProcessing] = useState(false);\r\n\tconst params = useParams<{ id: string }>();\r\n\tconst id = params.id.toNumber();\r\n\tconst history = useHistory();\r\n\tconst [studentID, setStudentID] = useNullable<number>();\r\n\tconst { data: subject, isLoading: loading, isError, error, refetch } = useQuery(['subjects', id], () => subjectService.fetchOne(id));\r\n\tconst [setGrade, setSetGrade] = useState(false);\r\n\tconst [gradeAmount, setGradeAmount] = useState(0);\r\n\tconst { register, handleSubmit, reset, setValue } = useForm<Inputs>();\r\n\tconst { data: year } = useCurrentYear();\r\n\tconst user = State.getInstance().get<UserContract>('user');\r\n\r\n\tconst submit = async (data: Inputs) => {\r\n\t\tsetProcessing(true);\r\n\t\ttry {\r\n\t\t\tdata.student_id = studentID!;\r\n\t\t\tdata.teacher_id = user?.id!;\r\n\t\t\tdata.subject_id = subject?.id || id;\r\n\t\t\tdata.grade = gradeAmount;\r\n\t\t\tdata.status = gradeAmount >= 75 ? 'Passed' : 'Failed';\r\n\t\t\tawait gradeService.create(data);\r\n\t\t\tawait refetch();\r\n\t\t\ttoastr.success('Grade saved succesfully.');\r\n\t\t\tsetGradeAmount(0);\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t} finally {\r\n\t\t\tsetStudentID(null);\r\n\t\t\treset();\r\n\t\t\tsetProcessing(false);\r\n\t\t}\r\n\t};\r\n\r\n\tif (isError && (error as AxiosError)?.response?.status === 404) {\r\n\t\ttoastr.error('Subject does not exist.');\r\n\t\thistory.goBack();\r\n\t}\r\n\r\n\tconst findGrade = (student: UserContract, current = true) => {\r\n\t\treturn student.grades?.find(\r\n\t\t\t(grade) => grade.teacher_id === user?.id && grade.year?.current === current && grade.subject_id === subject?.id\r\n\t\t);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\trefetch();\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\tif (!subject || !year) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='container-fluid'>\r\n\t\t\t<div className='card'>\r\n\t\t\t\t<div className='card-header'>\r\n\t\t\t\t\t<div className='d-flex'>\r\n\t\t\t\t\t\t<h2 className='card-title'>View Subject</h2>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName='btn btn-secondary btn-sm'\r\n\t\t\t\t\t\t\tstyle={{ position: 'absolute', right: '10px' }}\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\thistory.goBack();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\tGo Back\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p className='card-text mb-0'>Code: {subject.code}</p>\r\n\t\t\t\t\t<p className='card-text mb-0'>Description: {subject.description}</p>\r\n\t\t\t\t\t<p className='card-text mb-0'>\r\n\t\t\t\t\t\tCourse: {`${subject.course?.code}${subject.major ? ` - Major in ${subject.major.name}` : ''}`}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p className='card-text'>\r\n\t\t\t\t\t\tGrade Encoding Deadline: {dayjs(year?.grade_start).format('MMMM DD, YYYY hh:mm A')} -{' '}\r\n\t\t\t\t\t\t{dayjs(year?.grade_end).format('MMMM DD, YYYY hh:mm A')}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='card-body'>\r\n\t\t\t\t\t<h4 className='mb-0 mt-3'>Schedule</h4>\r\n\t\t\t\t\t<table className='table table-bordered table-sm mb-5'>\r\n\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<th className='text-center'>Day</th>\r\n\t\t\t\t\t\t\t\t<th className='text-center'>Start Time</th>\r\n\t\t\t\t\t\t\t\t<th className='text-center'>End Time</th>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t{subject.schedules\r\n\t\t\t\t\t\t\t\t?.find((schedule) => schedule.teacher_id === user?.id)\r\n\t\t\t\t\t\t\t\t?.payload.map((row, index) => (\r\n\t\t\t\t\t\t\t\t\t<tr key={index}>\r\n\t\t\t\t\t\t\t\t\t\t<td className='text-center'>{row.day}</td>\r\n\t\t\t\t\t\t\t\t\t\t<td className='text-center'>{dayjs(row.start_time!).format('hh:mm A')}</td>\r\n\t\t\t\t\t\t\t\t\t\t<td className='text-center'>{dayjs(row.end_time!).format('hh:mm A')}</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tonRefresh={() => refetch()}\r\n\t\t\t\t\t\ttitle='Student List'\r\n\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\titems={\r\n\t\t\t\t\t\t\tsubject.students?.map((student) => ({\r\n\t\t\t\t\t\t\t\t...student,\r\n\t\t\t\t\t\t\t\tname: (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t{student.last_name}, {student.first_name} {student.middle_name || ''}\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\tyear: !isBehind(student)\r\n\t\t\t\t\t\t\t\t\t? student.admissions?.find((admission) => admission.year?.current)?.level\r\n\t\t\t\t\t\t\t\t\t: student.admissions?.last()?.level,\r\n\t\t\t\t\t\t\t\tsemester: !isBehind(student)\r\n\t\t\t\t\t\t\t\t\t? student.admissions?.find((admission) => admission.year?.current)?.term\r\n\t\t\t\t\t\t\t\t\t: student.admissions?.last()?.term,\r\n\t\t\t\t\t\t\t\tsection: findSection(student)?.name,\r\n\t\t\t\t\t\t\t\tactions: (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t{findGrade(student, !isBehind(student)) && !setGrade ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={async () => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (!isBehind(student)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst now = dayjs();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst start = dayjs(year.grade_start);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst end = dayjs(year.grade_end);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (now.isBefore(start)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait Asker.okay(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`Encoding of grades will start at ${start.format(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'MMMM DD, YYYY hh:mm A'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}. Please wait until the given date.`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Notice'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn history.goBack();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (now.isAfter(end)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait Asker.okay(`Encoding of grades has already ended.`, 'Notice');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn history.goBack();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst grade = findGrade(student, !isBehind(student));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (grade) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (grade.grade >= 75) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetValue('status', 'Passed');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetValue('status', 'Failed');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetGradeAmount(grade.grade);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetSetGrade(true);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetStudentID(student.id!);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='clickable'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{findGrade(student, !isBehind(student))?.grade}%\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{setGrade && student.id === studentID ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<form\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='form-inline row'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ minWidth: '100px' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonSubmit={handleSubmit(submit)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype='hidden'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...register('year_id')}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={!isBehind(student) ? year?.id : student.admissions?.last()?.year_id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input {...register('status')} type='hidden' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='col-4'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype='number'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid='grade'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmax={100}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='form-control form-control-sm'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst grade = e.target.value.toNumber();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (grade >= 0 && grade <= 100) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (grade >= 75) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetValue('status', 'Passed');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetValue('status', 'Failed');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetGradeAmount(grade);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={gradeAmount}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='col-4'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type='submit' className='btn btn-primary btn-sm' disabled={processing}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='col-4'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='btn btn-secondary btn-sm'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSetGrade(false);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetStudentID(null);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={processing}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{findGrade(student, !isBehind(student)) ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={async () => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!isBehind(student)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst now = dayjs();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst start = dayjs(year.grade_start);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst end = dayjs(year.grade_end);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (now.isBefore(start)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait Asker.okay(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`Encoding of grades will start at ${start.format(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'MMMM DD, YYYY hh:mm A'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}. Please wait until the given date.`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Notice'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn history.goBack();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (now.isAfter(end)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait Asker.okay(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`Encoding of grades has already ended.`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Notice'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn history.goBack();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst grade = findGrade(student, !isBehind(student));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (grade) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (grade.grade >= 75) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetValue('status', 'Passed');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetValue('status', 'Failed');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetGradeAmount(grade.grade);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSetGrade(true);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetStudentID(student.id!);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='clickable'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{findGrade(student, !isBehind(student))?.grade}%\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={async () => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!isBehind(student)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst now = dayjs();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst start = dayjs(year.grade_start);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst end = dayjs(year.grade_end);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (now.isBefore(start)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait Asker.okay(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`Encoding of grades will start at ${start.format(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'MMMM DD, YYYY hh:mm A'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}. Please wait until the given date.`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Notice'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn history.goBack();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (now.isAfter(end)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait Asker.okay(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`Encoding of grades has already ended.`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Notice'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn history.goBack();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSetGrade(true);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetStudentID(student.id!);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='clickable d-block'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t-\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t})) || []\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcolumns={[\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttitle: 'ID Number',\r\n\t\t\t\t\t\t\t\taccessor: 'uuid',\r\n\t\t\t\t\t\t\t\tminWidth: '200px',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttitle: 'Name',\r\n\t\t\t\t\t\t\t\taccessor: 'name',\r\n\t\t\t\t\t\t\t\tminWidth: '150px',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttitle: 'Year',\r\n\t\t\t\t\t\t\t\taccessor: 'year',\r\n\t\t\t\t\t\t\t\tminWidth: '150px',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttitle: 'Semester',\r\n\t\t\t\t\t\t\t\taccessor: 'semester',\r\n\t\t\t\t\t\t\t\tminWidth: '150px',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttitle: 'Section',\r\n\t\t\t\t\t\t\t\taccessor: 'section',\r\n\t\t\t\t\t\t\t\tminWidth: '150px',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttitle: 'Actions',\r\n\t\t\t\t\t\t\t\taccessor: 'actions',\r\n\t\t\t\t\t\t\t\tminWidth: '300px',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default View;\r\n","import React, { FC } from 'react';\r\nimport { Route, RouteProps, Switch } from 'react-router-dom';\r\nimport { useURL } from '../../hooks';\r\nimport Form from './Form';\r\nimport List from './List';\r\nimport View from './View';\r\n\r\ntype Props = {};\r\n\r\nconst Subjects: FC<Props> = (props) => {\r\n\tconst url = useURL();\r\n\r\n\tconst routes: RouteProps[] = [\r\n\t\t{\r\n\t\t\tpath: url('/'),\r\n\t\t\texact: true,\r\n\t\t\tcomponent: List,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url('/add'),\r\n\t\t\tcomponent: Form,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url('/:id/edit'),\r\n\t\t\tcomponent: Form,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url('/:id/view'),\r\n\t\t\tcomponent: View,\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<Switch>\r\n\t\t\t{routes.map((route, index) => (\r\n\t\t\t\t<Route {...route} key={index} />\r\n\t\t\t))}\r\n\t\t</Switch>\r\n\t);\r\n};\r\n\r\nexport default Subjects;\r\n","import React, { FC, useEffect, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useHistory, useRouteMatch } from 'react-router';\r\nimport { Asker, handleError, setValues } from '../../helpers';\r\nimport { useMode, useNullable } from '../../hooks';\r\nimport { userService } from '../../Services/user.service';\r\nimport Flatpickr from 'react-flatpickr';\r\nimport dayjs from 'dayjs';\r\nimport InputMask from 'react-input-mask';\r\n\r\ntype Props = {};\r\n\r\ntype Inputs = {\r\n\tuuid: string;\r\n\tfirst_name: string;\r\n\tlast_name: string;\r\n\tmiddle_name?: string;\r\n\tgender?: string;\r\n\taddress?: string;\r\n\tplace_of_birth?: string;\r\n\tbirthday?: string;\r\n\trole: string;\r\n\temail: string;\r\n\tnumber: string;\r\n\tactive: boolean;\r\n\tpassword: string;\r\n\tfathers_name?: string;\r\n\tmothers_name?: string;\r\n\tfathers_occupation?: string;\r\n\tmothers_occupation?: string;\r\n\tforce: boolean;\r\n\ttype: string;\r\n\tenrolled: boolean;\r\n\tpayment_status: 'Not Paid' | 'Fully Paid' | 'Partially Paid';\r\n};\r\n\r\nconst Form: FC<Props> = (props) => {\r\n\tconst [processing, setProcessing] = useState(false);\r\n\tconst [mode, setMode] = useMode();\r\n\tconst { register, setValue, handleSubmit, reset } = useForm<Inputs>({\r\n\t\tdefaultValues: {\r\n\t\t\tforce: false,\r\n\t\t},\r\n\t});\r\n\tconst [birthday, setBirthday] = useNullable<Date>();\r\n\tconst [id, setID] = useState(-1);\r\n\tconst history = useHistory();\r\n\tconst match = useRouteMatch<{ id: string }>();\r\n\tconst [number, setNumber] = useState('');\r\n\r\n\tconst fetch = async (id: any) => {\r\n\t\ttry {\r\n\t\t\tconst data = await userService.fetchOne(id);\r\n\t\t\tsetID(data.id!);\r\n\t\t\tsetValues(setValue, data);\r\n\t\t\tsetBirthday(dayjs(data.birthday).toDate());\r\n\t\t\tsetNumber(data.number);\r\n\t\t\tsetMode('Edit');\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t\thistory.goBack();\r\n\t\t}\r\n\t};\r\n\r\n\tconst submit = async (data: Inputs) => {\r\n\t\tsetProcessing(true);\r\n\t\ttry {\r\n\t\t\tdata.role = 'Teacher';\r\n\t\t\tdata.active = true;\r\n\t\t\tdata.birthday = birthday?.toJSON() || '';\r\n\t\t\tdata.number = number;\r\n\t\t\tawait (mode === 'Add' ? userService.create(data) : userService.update(id, data));\r\n\t\t\ttoastr.success('Teacher has been saved successfully.');\r\n\t\t\treset();\r\n\t\t\tsetBirthday(null);\r\n\t\t} catch (error) {\r\n\t\t\tif (error.response?.status === 409) {\r\n\t\t\t\tif (await Asker.save(error.response?.data?.message)) {\r\n\t\t\t\t\tdata.force = true;\r\n\t\t\t\t\tawait submit(data);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\thandleError(error);\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tsetProcessing(false);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (match.path.includes('edit')) {\r\n\t\t\tfetch(match.params.id);\r\n\t\t} else {\r\n\t\t\tuserService.fetch().then((users) => {\r\n\t\t\t\tsetValue(\r\n\t\t\t\t\t'uuid',\r\n\t\t\t\t\t`teacher-${`${users.filter((user) => user.role === 'Teacher').length + 1}`.padStart(\r\n\t\t\t\t\t\t5,\r\n\t\t\t\t\t\t'0'\r\n\t\t\t\t\t)}-${new Date().getFullYear()}`\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t}\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className='container-fluid'>\r\n\t\t\t<div className='card'>\r\n\t\t\t\t<div className='card-body'>\r\n\t\t\t\t\t<h5 className='card-title'>{mode} Teacher</h5>\r\n\t\t\t\t\t<form onSubmit={handleSubmit(submit)}>\r\n\t\t\t\t\t\t<div className='form-row'>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='first_name'>First Name</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t{...register('first_name')}\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\tid='first_name'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='uuid'>Teacher Number</label>\r\n\t\t\t\t\t\t\t\t<input {...register('uuid')} type='text' id='uuid' className='form-control' readOnly />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='last_name'>Last Name</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t{...register('last_name')}\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\tid='last_name'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='email'>Email Address</label>\r\n\t\t\t\t\t\t\t\t<input {...register('email')} type='email' id='email' className='form-control' disabled={processing} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='gender'>Gender</label>\r\n\t\t\t\t\t\t\t\t<select {...register('gender')} id='gender' className='form-control'>\r\n\t\t\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t<option value='Male'>Male</option>\r\n\t\t\t\t\t\t\t\t\t<option value='Female'>Female</option>\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='number'>Phone Number</label>\r\n\t\t\t\t\t\t\t\t<InputMask\r\n\t\t\t\t\t\t\t\t\tmask='0\\999-999-9999'\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\tid='number'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t\tvalue={number}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => setNumber(e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='birthday'>Birthday</label>\r\n\t\t\t\t\t\t\t\t<Flatpickr\r\n\t\t\t\t\t\t\t\t\tvalue={birthday || undefined}\r\n\t\t\t\t\t\t\t\t\tid='birthday'\r\n\t\t\t\t\t\t\t\t\toptions={{\r\n\t\t\t\t\t\t\t\t\t\tmaxDate: dayjs()\r\n\t\t\t\t\t\t\t\t\t\t\t.year(new Date().getFullYear() - 15)\r\n\t\t\t\t\t\t\t\t\t\t\t.toDate(),\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tonChange={(dates) => {\r\n\t\t\t\t\t\t\t\t\t\tif (dates.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetBirthday(dates[0]);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='address'>Address</label>\r\n\t\t\t\t\t\t\t\t<input {...register('address')} type='text' id='address' className='form-control' disabled={processing} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='d-flex'>\r\n\t\t\t\t\t\t\t<i className='ml-auto'>Account credentials will be sent via email.</i>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='d-flex'>\r\n\t\t\t\t\t\t\t<button type='button' className='btn btn-secondary' onClick={() => history.goBack()} disabled={processing}>\r\n\t\t\t\t\t\t\t\tReturn\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button type='submit' className='btn btn-primary ml-auto' disabled={processing}>\r\n\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Form;\r\n","import dayjs from 'dayjs';\r\nimport React, { createRef, FC, useEffect } from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { UserContract } from '../../Contracts/user.contract';\r\nimport { handleError, Asker, toJSON } from '../../helpers';\r\nimport { useArray, useNullable, useURL } from '../../hooks';\r\nimport { State } from '../../Libraries/State';\r\nimport { userService } from '../../Services/user.service';\r\n\r\nimport Table from '../Shared/Table';\r\n\r\ntype Props = {};\r\n\r\nconst List: FC<Props> = (props) => {\r\n\tconst { data: items, isFetching: loading, isError, error, refetch } = useQuery('users', () => userService.fetch());\r\n\tconst [selected, setSelected] = useArray<number>();\r\n\tconst [teacher, setTeacher] = useNullable<UserContract>();\r\n\tconst modalRef = createRef<HTMLDivElement>();\r\n\tconst history = useHistory();\r\n\r\n\tconst url = useURL();\r\n\r\n\tif (isError) {\r\n\t\thandleError(error);\r\n\t}\r\n\r\n\tconst deleteItem = async (id: any) => {\r\n\t\ttry {\r\n\t\t\tif (await Asker.danger('Are you sure you want to delete this Teacher?')) {\r\n\t\t\t\tawait userService.delete(id);\r\n\t\t\t\ttoastr.info('Teacher has been deleted.', 'Notice');\r\n\t\t\t\trefetch();\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst update = async (teacher: UserContract) => {\r\n\t\ttry {\r\n\t\t\tawait userService.update(teacher.id, { active: !teacher.active });\r\n\t\t\ttoastr.success(`Teacher ${teacher.active ? 'disabled' : 'enabled'} successfully.`);\r\n\t\t\trefetch();\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst user = State.getInstance().get<UserContract>('user');\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Teacher #',\r\n\t\t\taccessor: 'uuid',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Name',\r\n\t\t\taccessor: 'name',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Email',\r\n\t\t\taccessor: 'email',\r\n\t\t\tminWidth: '225px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Status',\r\n\t\t\taccessor: 'status',\r\n\t\t},\r\n\t];\r\n\r\n\tif (['Registrar'].includes(user?.role || '')) {\r\n\t\tcolumns.unshift({\r\n\t\t\ttitle: '#',\r\n\t\t\taccessor: 'toggle',\r\n\t\t});\r\n\t\tcolumns.push({ title: 'Actions', accessor: 'actions' });\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (modalRef.current) {\r\n\t\t\t$(modalRef.current).on('hidden.bs.modal', () => setTeacher(null));\r\n\t\t}\r\n\t}, [modalRef, setTeacher]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Table\r\n\t\t\t\tonRefresh={() => refetch()}\r\n\t\t\t\ttitle='Teachers'\r\n\t\t\t\tloading={loading}\r\n\t\t\t\titems={\r\n\t\t\t\t\titems\r\n\t\t\t\t\t\t?.filter((user) => user.role === 'Teacher')\r\n\t\t\t\t\t\t.map((teacher) => ({\r\n\t\t\t\t\t\t\t...teacher,\r\n\t\t\t\t\t\t\ttoggle: (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<div className='custom-control custom-checkbox'>\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='custom-control-input'\r\n\t\t\t\t\t\t\t\t\t\t\tid={toJSON(teacher)}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst id = e.target.value.toNumber();\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (selected.includes(id)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst index = selected.findIndex((number) => number === id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tselected.splice(index, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tselected.push(id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetSelected([...selected]);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={teacher.id}\r\n\t\t\t\t\t\t\t\t\t\t\tchecked={selected.includes(teacher.id!)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<label className='custom-control-label' htmlFor={toJSON(teacher)}></label>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tname: (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t{teacher.last_name}, {teacher.first_name} {teacher.middle_name || ''}\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tbirthday: dayjs(teacher.birthday).format('MMMM DD, YYYY'),\r\n\t\t\t\t\t\t\tage: new Date().getFullYear() - dayjs(teacher.birthday).year(),\r\n\t\t\t\t\t\t\tstatus: teacher.active ? (\r\n\t\t\t\t\t\t\t\t<span className='badge badge-success'>Active</span>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<span className='badge badge-danger'>Inactive</span>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tactions: (\r\n\t\t\t\t\t\t\t\t<div style={{ minWidth: '350px' }}>\r\n\t\t\t\t\t\t\t\t\t<Link to={url(`${teacher.id}/edit`)} className='btn btn-warning btn-sm mx-1' title='Edit'>\r\n\t\t\t\t\t\t\t\t\t\t<i className='fas fa-edit'></i>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='btn btn-primary btn-sm mx-1'\r\n\t\t\t\t\t\t\t\t\t\ttitle='View'\r\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\tsetTeacher(teacher);\r\n\t\t\t\t\t\t\t\t\t\t\tif (modalRef.current) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t$(modalRef.current).modal('show');\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<i className='fas fa-eye'></i>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t{user?.role === 'Registrar' ? (\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={`btn btn-${teacher.active ? 'danger' : 'info'} btn-sm mx-1`}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={async (e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tawait Asker.notice(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t`Are you sure you want to ${teacher.active ? 'disable' : 'enable'} this teacher? ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tteacher.active\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'If you disable this teacher, this teacher can’t access the system. And you can’t distribute subjects to this teacher.'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'If you enable this teacher, this teacher can access the system. And you can distribute subject to this teacher.'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}`\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tupdate(teacher);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\ttitle={teacher.active ? 'Disable' : 'Enable'}>\r\n\t\t\t\t\t\t\t\t\t\t\t<i className={`fas fa-user-${teacher.active ? 'times' : 'check'}`}></i>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='btn btn-danger btn-sm mx-1 d-none'\r\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\tdeleteItem(teacher.id);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<i className='fas fa-trash'></i>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t})) || []\r\n\t\t\t\t}\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\tbuttons={\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{user?.role === 'Registrar' ? (\r\n\t\t\t\t\t\t\t<Link to={url(`add`)} className='btn btn-primary btn-sm ml-2'>\r\n\t\t\t\t\t\t\t\t<i className='fas fa-plus'></i>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t{['Registrar'].includes(user?.role || '') ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName='btn btn-primary btn-sm ml-2'\r\n\t\t\t\t\t\t\t\t\ttitle='Enable Selected'\r\n\t\t\t\t\t\t\t\t\tonClick={async (e) => {\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\tif (selected.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t\tawait Asker.danger(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t`Are you sure you want to enable ${selected.length} ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselected.length === 1 ? 'teacher' : 'teachers'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}? If you enable ${selected.length === 1 ? 'this' : 'these'} ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselected.length === 1 ? 'teacher' : 'teachers'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}, ${selected.length === 1 ? 'this' : 'these'} ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselected.length === 1 ? 'teacher' : 'teachers'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} can access the system.`\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tawait Promise.all(selected.map((id) => userService.update(id, { active: true })));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttoastr.success(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${selected.length} ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselected.length === 1 ? 'teacher' : 'teachers'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} enabled successfully.`\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetSelected([]);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trefetch();\r\n\t\t\t\t\t\t\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttoastr.error('Unable to enable teachers.');\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<i className={`fas fa-user-check`}></i>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName='btn btn-danger btn-sm ml-2'\r\n\t\t\t\t\t\t\t\t\ttitle='Disable Selected'\r\n\t\t\t\t\t\t\t\t\tonClick={async (e) => {\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\tif (selected.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t\tawait Asker.danger(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t`Are you sure you want to disable ${selected.length} ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselected.length === 1 ? 'teacher' : 'teachers'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}? If you disable ${selected.length === 1 ? 'this' : 'these'} ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselected.length === 1 ? 'teacher' : 'teachers'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}, ${selected.length === 1 ? 'this' : 'these'} ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselected.length === 1 ? 'teacher' : 'teachers'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} can’t access the system. And you can’t distribute subjects to ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselected.length === 1 ? 'this' : 'these'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} ${selected.length === 1 ? 'teacher' : 'teachers'}.`\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tawait Promise.all(selected.map((id) => userService.update(id, { active: false })));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttoastr.success(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${selected.length} ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselected.length === 1 ? 'teacher' : 'teachers'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} disabled successfully.`\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetSelected([]);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trefetch();\r\n\t\t\t\t\t\t\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttoastr.error('Unable to disable teachers.');\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<i className={`fas fa-user-times`}></i>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t</>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t\t<div ref={modalRef} className='modal fade' tabIndex={-1}>\r\n\t\t\t\t<div className='modal-dialog modal-dialog-centered modal-lg'>\r\n\t\t\t\t\t<div className='modal-content'>\r\n\t\t\t\t\t\t<div className='modal-header'>\r\n\t\t\t\t\t\t\t<h5 className='modal-title'>View Teacher</h5>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\tclassName='close'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\tif (modalRef.current) {\r\n\t\t\t\t\t\t\t\t\t\t$(modalRef.current).modal('hide');\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<span aria-hidden='true'>&times;</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='modal-body'>\r\n\t\t\t\t\t\t\t{teacher && (\r\n\t\t\t\t\t\t\t\t<div className='container-fluid row'>\r\n\t\t\t\t\t\t\t\t\t<div className='col-12 col-md-6 col-lg-4 p-2 border'>\r\n\t\t\t\t\t\t\t\t\t\t<label className='font-weight-bold d-block'>Teacher #</label>\r\n\t\t\t\t\t\t\t\t\t\t{teacher.uuid}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='col-12 col-md-6 col-lg-4 p-2 border'>\r\n\t\t\t\t\t\t\t\t\t\t<label className='font-weight-bold d-block'>Name</label>\r\n\t\t\t\t\t\t\t\t\t\t{teacher.last_name}, {teacher.first_name} {teacher.last_name || ''}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='col-12 col-md-6 col-lg-4 p-2 border'>\r\n\t\t\t\t\t\t\t\t\t\t<label className='font-weight-bold d-block'>Phone Number</label>\r\n\t\t\t\t\t\t\t\t\t\t{teacher.number}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='col-12 col-md-6 col-lg-4 p-2 border'>\r\n\t\t\t\t\t\t\t\t\t\t<label className='font-weight-bold d-block'>Email</label>\r\n\t\t\t\t\t\t\t\t\t\t{teacher.email}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='col-12 col-md-6 col-lg-4 p-2 border'>\r\n\t\t\t\t\t\t\t\t\t\t<label className='font-weight-bold d-block'>Address</label>\r\n\t\t\t\t\t\t\t\t\t\t{teacher.address}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='col-12 col-md-6 col-lg-4 p-2 border'>\r\n\t\t\t\t\t\t\t\t\t\t<label className='font-weight-bold d-block'>Gender</label>\r\n\t\t\t\t\t\t\t\t\t\t{teacher.gender}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='col-12 col-md-6 col-lg-4 p-2 border'>\r\n\t\t\t\t\t\t\t\t\t\t<label className='font-weight-bold d-block'>Birthday</label>\r\n\t\t\t\t\t\t\t\t\t\t{dayjs(teacher.birthday).format('MMMM DD, YYYY')}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='col-12 col-md-6 col-lg-4 p-2 border'>\r\n\t\t\t\t\t\t\t\t\t\t<label className='font-weight-bold d-block'>Age</label>\r\n\t\t\t\t\t\t\t\t\t\t{dayjs().year() - dayjs(teacher.birthday).year()}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='col-12 col-md-6 col-lg-4 p-2 border'>\r\n\t\t\t\t\t\t\t\t\t\t<label className='font-weight-bold d-block'>Status</label>\r\n\t\t\t\t\t\t\t\t\t\t{teacher.active ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<span className='badge badge-success'>Active</span>\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<span className='badge badge-danger'>Inactive</span>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='modal-footer'>\r\n\t\t\t\t\t\t\t{teacher && (\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName='btn btn-warning btn-sm mx-1'\r\n\t\t\t\t\t\t\t\t\ttitle='Edit'\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\tif (modalRef.current) {\r\n\t\t\t\t\t\t\t\t\t\t\t$(modalRef.current).modal('hide');\r\n\t\t\t\t\t\t\t\t\t\t\thistory.push(url(`${teacher.id}/edit`));\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tEdit\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\tclassName='btn btn-secondary btn-sm'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\tif (modalRef.current) {\r\n\t\t\t\t\t\t\t\t\t\t$(modalRef.current).modal('hide');\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tClose\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default List;\r\n","import React, { FC } from 'react';\r\nimport { Route, RouteProps, Switch } from 'react-router-dom';\r\nimport { useURL } from '../../hooks';\r\nimport Form from './Form';\r\nimport List from './List';\r\n\r\ntype Props = {};\r\n\r\nconst Teachers: FC<Props> = (props) => {\r\n\tconst url = useURL();\r\n\r\n\tconst routes: RouteProps[] = [\r\n\t\t{\r\n\t\t\tpath: url('/'),\r\n\t\t\texact: true,\r\n\t\t\tcomponent: List,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url('/add'),\r\n\t\t\tcomponent: Form,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url('/:id/edit'),\r\n\t\t\tcomponent: Form,\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<Switch>\r\n\t\t\t{routes.map((route, index) => (\r\n\t\t\t\t<Route {...route} key={index} />\r\n\t\t\t))}\r\n\t\t</Switch>\r\n\t);\r\n};\r\n\r\nexport default Teachers;\r\n","import { UnitContract } from '../Contracts/unit.contract';\r\nimport { Service } from '../Libraries/Service';\r\n\r\nexport class UnitService extends Service<UnitContract> {}\r\n\r\nexport const unitService = new UnitService('/units');\r\n","import React, { FC, useEffect, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useQuery } from 'react-query';\r\nimport { useHistory, useRouteMatch } from 'react-router';\r\nimport { Asker, handleError, setValues } from '../../helpers';\r\nimport { useMode, useNullable } from '../../hooks';\r\nimport { courseService } from '../../Services/course.service';\r\nimport { unitService } from '../../Services/unit.service';\r\nimport { CourseContract } from '../../Contracts/course.contract';\r\nimport { MajorContract } from '../../Contracts/major.contract';\r\n\r\ntype Props = {};\r\n\r\ntype Inputs = {\r\n\tunits: number;\r\n\tcourse_id: number;\r\n\tmajor_id?: number;\r\n\tlevel: string;\r\n\tterm: string;\r\n\tforce: boolean;\r\n};\r\n\r\nconst Form: FC<Props> = (props) => {\r\n\tconst [processing, setProcessing] = useState(false);\r\n\tconst [mode, setMode] = useMode();\r\n\tconst { register, setValue, handleSubmit, reset } = useForm<Inputs>({\r\n\t\tdefaultValues: {\r\n\t\t\tforce: false,\r\n\t\t},\r\n\t});\r\n\tconst [course, setCourse] = useNullable<CourseContract>();\r\n\tconst [major, setMajor] = useNullable<MajorContract>();\r\n\tconst [id, setID] = useState(-1);\r\n\tconst history = useHistory();\r\n\tconst match = useRouteMatch<{ id: string }>();\r\n\tconst { data: courses, refetch: refetchCourses } = useQuery('courses', () => courseService.fetch());\r\n\r\n\tconst fetch = async (id: any) => {\r\n\t\ttry {\r\n\t\t\tconst data = await unitService.fetchOne(id);\r\n\t\t\tsetID(data.id!);\r\n\t\t\tsetMode('Edit');\r\n\t\t\tsetValues(setValue, data);\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t\thistory.goBack();\r\n\t\t}\r\n\t};\r\n\r\n\tconst submit = async (data: Inputs) => {\r\n\t\tsetProcessing(true);\r\n\t\ttry {\r\n\t\t\tif (course?.majors && course.majors.length > 0 && !major) {\r\n\t\t\t\treturn toastr.error('Please select a major.');\r\n\t\t\t}\r\n\t\t\tdata.major_id = major?.id;\r\n\t\t\tawait (mode === 'Add' ? unitService.create(data) : unitService.update(id, data));\r\n\t\t\ttoastr.success('Unit has been saved successfully.');\r\n\t\t\tawait refetchCourses();\r\n\t\t\treset();\r\n\t\t} catch (error) {\r\n\t\t\tif (error.response?.status === 409) {\r\n\t\t\t\tif (await Asker.save(error.response?.data?.message)) {\r\n\t\t\t\t\tdata.force = true;\r\n\t\t\t\t\tawait submit(data);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\thandleError(error);\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tsetProcessing(false);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (match.path.includes('edit')) {\r\n\t\t\tfetch(match.params.id);\r\n\t\t}\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className='container-fluid'>\r\n\t\t\t<div className='card'>\r\n\t\t\t\t<div className='card-body'>\r\n\t\t\t\t\t<h5 className='card-title'>{mode} Student Unit</h5>\r\n\t\t\t\t\t<form onSubmit={handleSubmit(submit)}>\r\n\t\t\t\t\t\t<div className='form-row'>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='course_id'>Course</label>\r\n\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\t{...register('course_id')}\r\n\t\t\t\t\t\t\t\t\tid='course_id'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tconst id = e.target.value.toNumber();\r\n\t\t\t\t\t\t\t\t\t\tconst course = courses?.find((course) => course.id === id);\r\n\t\t\t\t\t\t\t\t\t\tif (course) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetCourse(course);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetCourse(null);\r\n\t\t\t\t\t\t\t\t\t\t\tsetMajor(null);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t{courses\r\n\t\t\t\t\t\t\t\t\t\t?.filter((course) => course.open)\r\n\t\t\t\t\t\t\t\t\t\t.map((course, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<option value={course.id} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{course.code}\r\n\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{course && course.majors && course.majors.length > 0 ? (\r\n\t\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t\t<label htmlFor='major_id'>Major</label>\r\n\t\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\t\t{...register('major_id')}\r\n\t\t\t\t\t\t\t\t\t\tid='major_id'\r\n\t\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\tconst id = e.target.value.toNumber();\r\n\t\t\t\t\t\t\t\t\t\t\tconst major = course?.majors?.find((major) => major.id === id);\r\n\t\t\t\t\t\t\t\t\t\t\tif (major) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetMajor(major);\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetMajor(null);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t\t{course.majors.map((major, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<option value={major.id} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{major.name}\r\n\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='level'>Year Level</label>\r\n\t\t\t\t\t\t\t\t<select {...register('level')} id='level' className='form-control'>\r\n\t\t\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t<option value='1st'>1st</option>\r\n\t\t\t\t\t\t\t\t\t<option value='2nd'>2nd</option>\r\n\t\t\t\t\t\t\t\t\t<option value='3rd'>3rd</option>\r\n\t\t\t\t\t\t\t\t\t<option value='4th'>4th</option>\r\n\t\t\t\t\t\t\t\t\t<option value='5th'>5th</option>\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='units'>Units</label>\r\n\t\t\t\t\t\t\t\t<input {...register('units')} type='number' id='units' className='form-control' />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='term'>Term</label>\r\n\t\t\t\t\t\t\t\t<div className='row'>\r\n\t\t\t\t\t\t\t\t\t<div className='col-12 col-md-4'>\r\n\t\t\t\t\t\t\t\t\t\t<div className='custom-control custom-radio'>\r\n\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t{...register('term')}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype='radio'\r\n\t\t\t\t\t\t\t\t\t\t\t\tid='1st-semester'\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='custom-control-input'\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue='1st Semester'\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<label className='custom-control-label' htmlFor='1st-semester'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t1st Semester\r\n\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='col-12 col-md-4'>\r\n\t\t\t\t\t\t\t\t\t\t<div className='custom-control custom-radio'>\r\n\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t{...register('term')}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype='radio'\r\n\t\t\t\t\t\t\t\t\t\t\t\tid='2nd-semester'\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='custom-control-input'\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue='2nd Semester'\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<label className='custom-control-label' htmlFor='2nd-semester'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t2nd Semester\r\n\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='col-12 col-md-4'>\r\n\t\t\t\t\t\t\t\t\t\t<div className='custom-control custom-radio'>\r\n\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t{...register('term')}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype='radio'\r\n\t\t\t\t\t\t\t\t\t\t\t\tid='summer'\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='custom-control-input'\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue='Summer'\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<label className='custom-control-label' htmlFor='summer'>\r\n\t\t\t\t\t\t\t\t\t\t\t\tSummer\r\n\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='form-group d-flex'>\r\n\t\t\t\t\t\t\t<button type='button' className='btn btn-secondary' onClick={() => history.goBack()} disabled={processing}>\r\n\t\t\t\t\t\t\t\tReturn\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button type='submit' className='btn btn-primary ml-auto' disabled={processing}>\r\n\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Form;\r\n","import React, { FC } from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { Link } from 'react-router-dom';\r\nimport { UserContract } from '../../Contracts/user.contract';\r\nimport { handleError, Asker } from '../../helpers';\r\nimport { useURL } from '../../hooks';\r\nimport { State } from '../../Libraries/State';\r\nimport { unitService } from '../../Services/unit.service';\r\nimport Table from '../Shared/Table';\r\n\r\ntype Props = {};\r\n\r\nconst List: FC<Props> = (props) => {\r\n\tconst { data: items, isFetching: loading, isError, error, refetch } = useQuery('units', () => unitService.fetch());\r\n\r\n\tconst url = useURL();\r\n\r\n\tif (isError) {\r\n\t\thandleError(error);\r\n\t}\r\n\r\n\tconst deleteItem = async (id: any) => {\r\n\t\ttry {\r\n\t\t\tif (await Asker.danger('Are you sure you want to delete this Unit?')) {\r\n\t\t\t\tawait unitService.delete(id);\r\n\t\t\t\ttoastr.info('Unit has been deleted.', 'Notice');\r\n\t\t\t\trefetch();\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst user = State.getInstance().get<UserContract>('user');\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'ID',\r\n\t\t\taccessor: 'id',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Course',\r\n\t\t\taccessor: 'course',\r\n\t\t\tminWidth: '375px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Units',\r\n\t\t\taccessor: 'units',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Semester',\r\n\t\t\taccessor: 'term',\r\n\t\t\tminWidth: '150px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'level',\r\n\t\t\taccessor: 'level',\r\n\t\t},\r\n\t];\r\n\r\n\tif (user?.role === 'Registrar') {\r\n\t\tcolumns.push({\r\n\t\t\ttitle: 'Actions',\r\n\t\t\taccessor: 'actions',\r\n\t\t\tminWidth: '250px',\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Table\r\n\t\t\tonRefresh={() => refetch()}\r\n\t\t\ttitle='Student Units'\r\n\t\t\tloading={loading}\r\n\t\t\titems={\r\n\t\t\t\titems?.map((unit) => ({\r\n\t\t\t\t\t...unit,\r\n\t\t\t\t\tcourse: `${unit.course?.code}${unit.major ? ` - Major in ${unit.major.name}` : ''}`,\r\n\t\t\t\t\tactions: (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{user?.role === 'Registrar' ? (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<Link to={url(`${unit.id}/edit`)} className='btn btn-warning btn-sm mx-1'>\r\n\t\t\t\t\t\t\t\t\t\t<i className='fas fa-edit'></i>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='btn btn-danger btn-sm mx-1'\r\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\tdeleteItem(unit.id);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<i className='fas fa-trash'></i>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t),\r\n\t\t\t\t})) || []\r\n\t\t\t}\r\n\t\t\tcolumns={columns}\r\n\t\t\tbuttons={\r\n\t\t\t\t<>\r\n\t\t\t\t\t{user?.role === 'Registrar' ? (\r\n\t\t\t\t\t\t<Link to={url(`add`)} className='btn btn-primary btn-sm ml-2'>\r\n\t\t\t\t\t\t\t<i className='fas fa-plus'></i>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default List;\r\n","import React, { FC } from 'react';\r\nimport { Route, RouteProps, Switch } from 'react-router-dom';\r\nimport { useURL } from '../../hooks';\r\nimport Form from './Form';\r\nimport List from './List';\r\n\r\ntype Props = {};\r\n\r\nconst Units: FC<Props> = (props) => {\r\n\tconst url = useURL();\r\n\r\n\tconst routes: RouteProps[] = [\r\n\t\t{\r\n\t\t\tpath: url('/'),\r\n\t\t\texact: true,\r\n\t\t\tcomponent: List,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url('/add'),\r\n\t\t\tcomponent: Form,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url('/:id/edit'),\r\n\t\t\tcomponent: Form,\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<Switch>\r\n\t\t\t{routes.map((route, index) => (\r\n\t\t\t\t<Route {...route} key={index} />\r\n\t\t\t))}\r\n\t\t</Switch>\r\n\t);\r\n};\r\n\r\nexport default Units;\r\n","import axios from 'axios';\r\nimport React, { createRef, FC, useEffect } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useQuery } from 'react-query';\r\nimport { UserContract } from '../../Contracts/user.contract';\r\nimport { handleError } from '../../helpers';\r\nimport { useNullable } from '../../hooks';\r\nimport { State } from '../../Libraries/State';\r\nimport { userService } from '../../Services/user.service';\r\nimport Table from '../Shared/Table';\r\n\r\ntype Props = {};\r\n\r\ntype Inputs = {\r\n\tpassword: string;\r\n\tnew_password: string;\r\n\trepeat_password: string;\r\n\tuser_id: number;\r\n};\r\n\r\nconst List: FC<Props> = (props) => {\r\n\tconst { data: items, isFetching: loading, isError, error, refetch } = useQuery('users', () => userService.fetch());\r\n\tconst user = State.getInstance().get<UserContract>('user');\r\n\tconst [selected, setSelected] = useNullable<number>();\r\n\tconst modalRef = createRef<HTMLDivElement>();\r\n\tconst { register, handleSubmit, reset } = useForm<Inputs>();\r\n\r\n\tconst submit = async (data: Inputs) => {\r\n\t\tif (!selected) {\r\n\t\t\treturn toastr.error('No user selected.');\r\n\t\t}\r\n\r\n\t\tif (data.new_password !== data.repeat_password) {\r\n\t\t\treturn toastr.error('New password does not match repeat password.');\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tdata.user_id = selected;\r\n\t\t\tawait axios.post('/users/change', data);\r\n\t\t\ttoastr.success('User password changed successfully.');\r\n\t\t\tif (modalRef.current) {\r\n\t\t\t\t$(modalRef.current).modal('hide');\r\n\t\t\t}\r\n\t\t\tsetSelected(null);\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t}\r\n\t};\r\n\r\n\tif (isError) {\r\n\t\thandleError(error);\r\n\t}\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: '#',\r\n\t\t\taccessor: 'id',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'User Number',\r\n\t\t\taccessor: 'uuid',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'User Type',\r\n\t\t\taccessor: 'role',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Full Name',\r\n\t\t\taccessor: 'full_name',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Email',\r\n\t\t\taccessor: 'email',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Phone Number',\r\n\t\t\taccessor: 'number',\r\n\t\t},\r\n\t];\r\n\r\n\tif (user?.role === 'Admin') {\r\n\t\tcolumns.push({\r\n\t\t\ttitle: 'Actions',\r\n\t\t\taccessor: 'actions',\r\n\t\t});\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (modalRef.current) {\r\n\t\t\t$(modalRef.current).on('hidden.bs.modal', () => reset());\r\n\t\t}\r\n\t\t//eslint-disable-next-line\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Table\r\n\t\t\t\tonRefresh={() => refetch()}\r\n\t\t\t\ttitle='Users'\r\n\t\t\t\tloading={loading}\r\n\t\t\t\titems={\r\n\t\t\t\t\titems?.map((user) => ({\r\n\t\t\t\t\t\t...user,\r\n\t\t\t\t\t\tfull_name: (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{user.last_name}, {user.first_name} {user.middle_name || ''}\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tactions: (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName='btn btn-warning btn-sm mx-1'\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\tsetSelected(user.id!);\r\n\t\t\t\t\t\t\t\t\t\tif (modalRef.current) {\r\n\t\t\t\t\t\t\t\t\t\t\t$(modalRef.current).modal('toggle');\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\ttitle='Change Password'>\r\n\t\t\t\t\t\t\t\t\t<i className='fas fa-key'></i>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t{/* <Link to={url(`${user.id}/edit`)} className='btn btn-warning btn-sm mx-1'>\r\n\t\t\t\t\t\t\t\t<i className='fas fa-edit'></i>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName='btn btn-danger btn-sm mx-1 d-none'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\tdeleteItem(user.id);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<i className='fas fa-trash'></i>\r\n\t\t\t\t\t\t\t</button> */}\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t})) || []\r\n\t\t\t\t}\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\tbuttons={\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{/* <Link to={url(`add`)} className='btn btn-primary btn-sm ml-2'>\r\n\t\t\t\t\t\t<i className='fas fa-plus'></i>\r\n\t\t\t\t\t</Link> */}\r\n\t\t\t\t\t</>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t\t<div ref={modalRef} className='modal fade' tabIndex={-1}>\r\n\t\t\t\t<div className='modal-dialog modal-dialog-centered modal-lg'>\r\n\t\t\t\t\t<div className='modal-content'>\r\n\t\t\t\t\t\t<div className='modal-header'>\r\n\t\t\t\t\t\t\t<h5 className='modal-title'>Change Password</h5>\r\n\t\t\t\t\t\t\t<button type='button' className='close' data-dismiss='modal'>\r\n\t\t\t\t\t\t\t\t<span aria-hidden='true'>&times;</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<form onSubmit={handleSubmit(submit)}>\r\n\t\t\t\t\t\t\t<div className='modal-body'>\r\n\t\t\t\t\t\t\t\t<div className='container-fluid'>\r\n\t\t\t\t\t\t\t\t\t<div className='form-group'>\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor='password'>Your Password</label>\r\n\t\t\t\t\t\t\t\t\t\t<input {...register('password')} type='password' id='password' className='form-control' />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='form-group mt-3'>\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor='new_password'>User's New Password</label>\r\n\t\t\t\t\t\t\t\t\t\t<input {...register('new_password')} type='password' id='new_password' className='form-control' />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='form-group'>\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor='repeat_password'>Repeat New Password</label>\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t{...register('repeat_password')}\r\n\t\t\t\t\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\t\t\t\t\tid='repeat_password'\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='modal-footer'>\r\n\t\t\t\t\t\t\t\t<button type='submit' className='btn btn-primary btn-sm'>\r\n\t\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button type='button' className='btn btn-secondary btn-sm' data-dismiss='modal'>\r\n\t\t\t\t\t\t\t\t\tClose\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default List;\r\n","import React, { FC } from 'react';\r\nimport { Route, RouteProps, Switch } from 'react-router-dom';\r\nimport { useURL } from '../../hooks';\r\nimport List from './List';\r\n\r\ntype Props = {};\r\n\r\nconst Users: FC<Props> = (props) => {\r\n\tconst url = useURL();\r\n\r\n\tconst routes: RouteProps[] = [\r\n\t\t{\r\n\t\t\tpath: url('/'),\r\n\t\t\texact: true,\r\n\t\t\tcomponent: List,\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<Switch>\r\n\t\t\t{routes.map((route, index) => (\r\n\t\t\t\t<Route {...route} key={index} />\r\n\t\t\t))}\r\n\t\t</Switch>\r\n\t);\r\n};\r\n\r\nexport default Users;\r\n","import React, { FC, useEffect, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useHistory, useRouteMatch } from 'react-router';\r\nimport { YearContract } from '../../Contracts/year.contract';\r\nimport { handleError, setValues } from '../../helpers';\r\nimport { useMode, useNullable } from '../../hooks';\r\nimport { yearService } from '../../Services/year.service';\r\nimport Flatpickr from 'react-flatpickr';\r\nimport dayjs from 'dayjs';\r\n\r\ntype Props = {};\r\n\r\nconst Form: FC<Props> = (props) => {\r\n\tconst [processing, setProcessing] = useState(false);\r\n\tconst [mode, setMode] = useMode();\r\n\tconst { register, setValue, handleSubmit, reset } = useForm<YearContract>({\r\n\t\tdefaultValues: {\r\n\t\t\tstart: new Date().getFullYear(),\r\n\t\t\tend: new Date().getFullYear() + 1,\r\n\t\t\tcurrent: true,\r\n\t\t},\r\n\t});\r\n\tconst [id, setID] = useState(-1);\r\n\tconst history = useHistory();\r\n\tconst match = useRouteMatch<{ id: string }>();\r\n\tconst [semesterStart, setSemesterStart] = useNullable<Date>();\r\n\tconst [semesterEnd, setSemesterEnd] = useNullable<Date>();\r\n\tconst [registrationStart, setRegistrationStart] = useNullable<Date>();\r\n\tconst [registrationEnd, setRegistrationEnd] = useNullable<Date>();\r\n\tconst [gradeStart, setGradeStart] = useNullable<Date>();\r\n\tconst [gradeEnd, setGradeEnd] = useNullable<Date>();\r\n\r\n\tconst fetch = async (id: any) => {\r\n\t\ttry {\r\n\t\t\tconst data = await yearService.fetchOne(id);\r\n\t\t\tsetID(data.id!);\r\n\t\t\tsetValues(setValue, data);\r\n\t\t\tsetSemesterStart(dayjs(data.semester_start).toDate());\r\n\t\t\tsetSemesterEnd(dayjs(data.semester_end).toDate());\r\n\t\t\tsetRegistrationStart(dayjs(data.registration_start).toDate());\r\n\t\t\tsetRegistrationEnd(dayjs(data.registration_end).toDate());\r\n\t\t\tsetGradeStart(dayjs(data.grade_start).toDate());\r\n\t\t\tsetGradeEnd(dayjs(data.grade_end).toDate());\r\n\t\t\tsetMode('Edit');\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t\thistory.goBack();\r\n\t\t}\r\n\t};\r\n\r\n\tconst submit = async (data: YearContract) => {\r\n\t\tsetProcessing(true);\r\n\t\ttry {\r\n\t\t\tdata.semester_start = semesterStart?.toJSON() || '';\r\n\t\t\tdata.semester_end = semesterEnd?.toJSON() || '';\r\n\t\t\tdata.registration_start = registrationStart?.toJSON() || '';\r\n\t\t\tdata.registration_end = registrationEnd?.toJSON() || '';\r\n\t\t\tdata.grade_start = gradeStart?.toJSON() || '';\r\n\t\t\tdata.grade_end = gradeEnd?.toJSON() || '';\r\n\t\t\tawait (mode === 'Add' ? yearService.create(data) : yearService.update(id, data));\r\n\t\t\ttoastr.success('School Year has been saved successfully.');\r\n\t\t\treset();\r\n\t\t\tsetGradeStart(null);\r\n\t\t\tsetGradeEnd(null);\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t} finally {\r\n\t\t\tsetProcessing(false);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (match.path.includes('edit')) {\r\n\t\t\tfetch(match.params.id);\r\n\t\t}\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className='container-fluid'>\r\n\t\t\t<div className='card'>\r\n\t\t\t\t<div className='card-body'>\r\n\t\t\t\t\t<h5 className='card-title'>{mode} School Year</h5>\r\n\t\t\t\t\t<form onSubmit={handleSubmit(submit)}>\r\n\t\t\t\t\t\t<div className='form-row'>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='start'>Start</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t{...register('start')}\r\n\t\t\t\t\t\t\t\t\ttype='number'\r\n\t\t\t\t\t\t\t\t\tid='start'\r\n\t\t\t\t\t\t\t\t\tmin={new Date().getFullYear()}\r\n\t\t\t\t\t\t\t\t\tmax={new Date().getFullYear() + 10}\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='end'>End</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t{...register('end')}\r\n\t\t\t\t\t\t\t\t\ttype='number'\r\n\t\t\t\t\t\t\t\t\tid='end'\r\n\t\t\t\t\t\t\t\t\tmin={new Date().getFullYear()}\r\n\t\t\t\t\t\t\t\t\tmax={new Date().getFullYear() + 10}\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='semester'>Semester</label>\r\n\t\t\t\t\t\t\t\t<select {...register('semester')} id='semester' className='form-control'>\r\n\t\t\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t\t\t<option value='1st Semester'>1st Semester</option>\r\n\t\t\t\t\t\t\t\t\t<option value='2nd Semester'>2nd Semester</option>\r\n\t\t\t\t\t\t\t\t\t<option value='Summer'>Summer</option>\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='semester_start'>Semester Start</label>\r\n\t\t\t\t\t\t\t\t<Flatpickr\r\n\t\t\t\t\t\t\t\t\tvalue={semesterStart || undefined}\r\n\t\t\t\t\t\t\t\t\tid='semester_start'\r\n\t\t\t\t\t\t\t\t\tonChange={(dates) => {\r\n\t\t\t\t\t\t\t\t\t\tif (dates.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetSemesterStart(dates[0]);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='semester_end'>Semester End</label>\r\n\t\t\t\t\t\t\t\t<Flatpickr\r\n\t\t\t\t\t\t\t\t\tvalue={semesterEnd || undefined}\r\n\t\t\t\t\t\t\t\t\tid='semester_end'\r\n\t\t\t\t\t\t\t\t\tonChange={(dates) => {\r\n\t\t\t\t\t\t\t\t\t\tif (dates.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetSemesterEnd(dates[0]);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='registration_start'>Registration Start</label>\r\n\t\t\t\t\t\t\t\t<Flatpickr\r\n\t\t\t\t\t\t\t\t\tvalue={registrationStart || undefined}\r\n\t\t\t\t\t\t\t\t\tid='registration_start'\r\n\t\t\t\t\t\t\t\t\tonChange={(dates) => {\r\n\t\t\t\t\t\t\t\t\t\tif (dates.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetRegistrationStart(dates[0]);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='registration_end'>Registration End</label>\r\n\t\t\t\t\t\t\t\t<Flatpickr\r\n\t\t\t\t\t\t\t\t\tvalue={registrationEnd || undefined}\r\n\t\t\t\t\t\t\t\t\tid='registration_end'\r\n\t\t\t\t\t\t\t\t\tonChange={(dates) => {\r\n\t\t\t\t\t\t\t\t\t\tif (dates.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetRegistrationEnd(dates[0]);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='grade_start'>Grade Encoding Start</label>\r\n\t\t\t\t\t\t\t\t<Flatpickr\r\n\t\t\t\t\t\t\t\t\tvalue={gradeStart || undefined}\r\n\t\t\t\t\t\t\t\t\tid='grade_start'\r\n\t\t\t\t\t\t\t\t\tonChange={(dates) => {\r\n\t\t\t\t\t\t\t\t\t\tif (dates.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetGradeStart(dates[0]);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t\toptions={{\r\n\t\t\t\t\t\t\t\t\t\taltInput: true,\r\n\t\t\t\t\t\t\t\t\t\taltFormat: 'F j, Y G:i K',\r\n\t\t\t\t\t\t\t\t\t\tenableTime: true,\r\n\t\t\t\t\t\t\t\t\t\tdateFormat: 'F j, Y G:i K',\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='grade_end'>Grade Encoding End</label>\r\n\t\t\t\t\t\t\t\t<Flatpickr\r\n\t\t\t\t\t\t\t\t\tvalue={gradeEnd || undefined}\r\n\t\t\t\t\t\t\t\t\tid='grade_end'\r\n\t\t\t\t\t\t\t\t\tonChange={(dates) => {\r\n\t\t\t\t\t\t\t\t\t\tif (dates.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetGradeEnd(dates[0]);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t\toptions={{\r\n\t\t\t\t\t\t\t\t\t\taltInput: true,\r\n\t\t\t\t\t\t\t\t\t\taltFormat: 'F j, Y G:i K',\r\n\t\t\t\t\t\t\t\t\t\tenableTime: true,\r\n\t\t\t\t\t\t\t\t\t\tdateFormat: 'F j, Y G:i K',\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group col-12'>\r\n\t\t\t\t\t\t\t\t<div className='custom-control custom-checkbox'>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t{...register('current')}\r\n\t\t\t\t\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\t\t\t\t\tclassName='custom-control-input'\r\n\t\t\t\t\t\t\t\t\t\tid='current'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<label className='custom-control-label' htmlFor='current'>\r\n\t\t\t\t\t\t\t\t\t\tSet as Current\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='form-group d-flex'>\r\n\t\t\t\t\t\t\t<button type='button' className='btn btn-secondary' onClick={() => history.goBack()} disabled={processing}>\r\n\t\t\t\t\t\t\t\tReturn\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button type='submit' className='btn btn-primary ml-auto' disabled={processing}>\r\n\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Form;\r\n","import dayjs from 'dayjs';\r\nimport React, { FC } from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { Link } from 'react-router-dom';\r\nimport { UserContract } from '../../Contracts/user.contract';\r\nimport { YearContract } from '../../Contracts/year.contract';\r\nimport { handleError, Asker } from '../../helpers';\r\nimport { useURL } from '../../hooks';\r\nimport { State } from '../../Libraries/State';\r\nimport { yearService } from '../../Services/year.service';\r\nimport Table from '../Shared/Table';\r\n\r\ntype Props = {};\r\n\r\nconst List: FC<Props> = (props) => {\r\n\tconst { data: items, isFetching: loading, isError, error, refetch } = useQuery('years', () => yearService.fetch());\r\n\r\n\tconst url = useURL();\r\n\r\n\tif (isError) {\r\n\t\thandleError(error);\r\n\t}\r\n\r\n\tconst setAsCurrent = async (year: YearContract) => {\r\n\t\ttry {\r\n\t\t\tif (await Asker.notice('Are you sure you want to set the current school year?')) {\r\n\t\t\t\tawait yearService.update(year.id, { current: true });\r\n\t\t\t\ttoastr.info(`Year ${year.start} - ${year.end} has been set as current school year.`, 'Notice');\r\n\t\t\t\trefetch();\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst deleteItem = async (id: any) => {\r\n\t\ttry {\r\n\t\t\tif (await Asker.danger('Are you sure you want to delete this School Year?')) {\r\n\t\t\t\tawait yearService.delete(id);\r\n\t\t\t\ttoastr.info('School Year has been deleted.', 'Notice');\r\n\t\t\t\trefetch();\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst user = State.getInstance().get<UserContract>('user');\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'ID',\r\n\t\t\taccessor: 'id',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Year',\r\n\t\t\taccessor: 'year',\r\n\t\t\tminWidth: '200px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Semester',\r\n\t\t\taccessor: 'semester',\r\n\t\t\tminWidth: '150px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Start',\r\n\t\t\taccessor: 'semester_start',\r\n\t\t\tminWidth: '200px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'End',\r\n\t\t\taccessor: 'semester_end',\r\n\t\t\tminWidth: '200px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Registration Date',\r\n\t\t\taccessor: 'registration',\r\n\t\t\tminWidth: '250px',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Grade Encoding Date',\r\n\t\t\taccessor: 'grade',\r\n\t\t\tminWidth: '400px',\r\n\t\t},\r\n\t];\r\n\r\n\tif (user?.role === 'Registrar') {\r\n\t\tcolumns.push({\r\n\t\t\ttitle: 'Actions',\r\n\t\t\taccessor: 'actions',\r\n\t\t\tminWidth: '200px',\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Table\r\n\t\t\tonRefresh={() => refetch()}\r\n\t\t\ttitle='School Years'\r\n\t\t\tloading={loading}\r\n\t\t\titems={\r\n\t\t\t\titems?.map((year) => ({\r\n\t\t\t\t\t...year,\r\n\t\t\t\t\tyear: (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{`${year.start} - ${year.end}`}{' '}\r\n\t\t\t\t\t\t\t{year.current ? <span className='badge badge-success mb-1 ml-1'>Current</span> : ''}\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t),\r\n\t\t\t\t\tsemester_start: dayjs(year.semester_start).format('MMMM DD, YYYY'),\r\n\t\t\t\t\tsemester_end: dayjs(year.semester_end).format('MMMM DD, YYYY'),\r\n\t\t\t\t\tregistration: `${dayjs(year.registration_start).format('MMMM DD, YYYY')} to ${dayjs(year.registration_end).format(\r\n\t\t\t\t\t\t'MMMM DD, YYYY'\r\n\t\t\t\t\t)}`,\r\n\t\t\t\t\tgrade: `${dayjs(year.grade_start).format('MMMM DD, YYYY hh:mm A')} to ${dayjs(year.grade_end).format(\r\n\t\t\t\t\t\t'MMMM DD, YYYY hh:mm A'\r\n\t\t\t\t\t)}`,\r\n\t\t\t\t\tactions:\r\n\t\t\t\t\t\tuser?.role === 'Registrar' ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Link to={url(`${year.id}/edit`)} className='btn btn-warning btn-sm mx-1' title='Edit'>\r\n\t\t\t\t\t\t\t\t\t<i className='fas fa-edit'></i>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t{!year.current ? (\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='btn btn-success btn-sm mx-1'\r\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\tsetAsCurrent(year);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\ttitle='Set as Current'>\r\n\t\t\t\t\t\t\t\t\t\t<i className='fas fa-check'></i>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName='btn btn-danger btn-sm mx-1'\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\tdeleteItem(year.id);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\ttitle='Delete'>\r\n\t\t\t\t\t\t\t\t\t<i className='fas fa-trash'></i>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : null,\r\n\t\t\t\t})) || []\r\n\t\t\t}\r\n\t\t\tcolumns={columns}\r\n\t\t\tbuttons={\r\n\t\t\t\t<>\r\n\t\t\t\t\t{user?.role === 'Registrar' && items && items.length === 0 ? (\r\n\t\t\t\t\t\t<Link to={url(`add`)} className='btn btn-primary btn-sm ml-2'>\r\n\t\t\t\t\t\t\t<i className='fas fa-plus'></i>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default List;\r\n","import React, { FC } from 'react';\r\nimport { Route, RouteProps, Switch } from 'react-router-dom';\r\nimport { useURL } from '../../hooks';\r\nimport Form from './Form';\r\nimport List from './List';\r\n\r\ntype Props = {};\r\n\r\nconst Years: FC<Props> = (props) => {\r\n\tconst url = useURL();\r\n\r\n\tconst routes: RouteProps[] = [\r\n\t\t{\r\n\t\t\tpath: url('/'),\r\n\t\t\texact: true,\r\n\t\t\tcomponent: List,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url('/add'),\r\n\t\t\tcomponent: Form,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url('/:id/edit'),\r\n\t\t\tcomponent: Form,\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<Switch>\r\n\t\t\t{routes.map((route, index) => (\r\n\t\t\t\t<Route {...route} key={index} />\r\n\t\t\t))}\r\n\t\t</Switch>\r\n\t);\r\n};\r\n\r\nexport default Years;\r\n","import React, { FC } from 'react';\r\nimport { Route, RouteProps, Switch, useHistory } from 'react-router';\r\nimport Admissions from '../Components/Admissions';\r\nimport ChangePassword from '../Components/ChangePassword';\r\nimport Courses from '../Components/Courses';\r\nimport Analytics from '../Components/Dashboard/Analytics';\r\nimport Navbar from '../Components/Dashboard/Navbar';\r\nimport Sidebar from '../Components/Dashboard/Sidebar';\r\nimport Enrollment from '../Components/Dashboard/Student/Enrollment';\r\nimport Grades from '../Components/Dashboard/Student/Grades';\r\nimport Profile from '../Components/Dashboard/Student/Profile';\r\nimport Logs from '../Components/Logs';\r\nimport Mails from '../Components/Mails';\r\nimport Registrars from '../Components/Registrars';\r\nimport Requirements from '../Components/Requirements';\r\nimport Schedules from '../Components/Schedules';\r\nimport Students from '../Components/Students';\r\nimport Subjects from '../Components/Subjects';\r\nimport Teachers from '../Components/Teachers';\r\nimport Units from '../Components/Units';\r\nimport Users from '../Components/Users';\r\nimport Years from '../Components/Years';\r\nimport { useURL } from '../hooks';\r\nimport { State } from '../Libraries/State';\r\nimport { routes } from '../routes';\r\n\r\ntype Props = {};\r\n\r\nconst Dashboard: FC<Props> = (props) => {\r\n\tconst history = useHistory();\r\n\tconst state = State.getInstance();\r\n\tconst url = useURL();\r\n\r\n\tconst localRoutes: RouteProps[] = [\r\n\t\t{\r\n\t\t\tpath: url(''),\r\n\t\t\texact: true,\r\n\t\t\tcomponent: Analytics,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url(routes.COURSES),\r\n\t\t\tcomponent: Courses,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url(routes.STUDENTS),\r\n\t\t\tcomponent: Students,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url(routes.TEACHERS),\r\n\t\t\tcomponent: Teachers,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url(routes.REGISTRARS),\r\n\t\t\tcomponent: Registrars,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url(routes.USERS),\r\n\t\t\tcomponent: Users,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url(routes.MAILS),\r\n\t\t\tcomponent: Mails,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url(routes.CHANGE_PASSWORD),\r\n\t\t\tcomponent: ChangePassword,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url(routes.SUBJECTS),\r\n\t\t\tcomponent: Subjects,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url(routes.SCHEDULES),\r\n\t\t\tcomponent: Schedules,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url(routes.ADMISSIONS),\r\n\t\t\tcomponent: Admissions,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url(routes.YEARS),\r\n\t\t\tcomponent: Years,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url(routes.GRADES),\r\n\t\t\tcomponent: Grades,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url(routes.ENROLLMENT),\r\n\t\t\tcomponent: Enrollment,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url(routes.PROFILE),\r\n\t\t\tcomponent: Profile,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url(routes.ADMISSION_REQUIREMENTS),\r\n\t\t\tcomponent: Requirements,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url(routes.LOGS),\r\n\t\t\tcomponent: Logs,\r\n\t\t},\r\n\t\t{\r\n\t\t\tpath: url(routes.UNITS),\r\n\t\t\tcomponent: Units,\r\n\t\t},\r\n\t];\r\n\r\n\tif (!state.has('user')) {\r\n\t\thistory.push(routes.HOME);\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='vertical dark'>\r\n\t\t\t<div className='wrapper'>\r\n\t\t\t\t<Navbar />\r\n\t\t\t\t<Sidebar />\r\n\t\t\t\t<main role='main' className='main-content'>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t{localRoutes.map((route, index) => (\r\n\t\t\t\t\t\t\t<Route {...route} key={index} />\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Dashboard;\r\n","export default __webpack_public_path__ + \"static/media/landing.5ad43824.jpg\";","import React, { FC } from 'react';\r\nimport { createRef } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport background from '../Assets/landing.jpg';\r\nimport { State } from '../Libraries/State';\r\nimport { routes } from '../routes';\r\nimport '../Styles/landing.css';\r\n\r\ntype Props = {};\r\n\r\nconst Home: FC<Props> = (props) => {\r\n\tconst state = State.getInstance();\r\n\tconst ref = createRef<HTMLDivElement>();\r\n\tconst history = useHistory();\r\n\r\n\treturn (\r\n\t\t<section id='intro' className='parallax-section' style={{ background: `url(${background}) 50% 0 repeat-y fixed` }}>\r\n\t\t\t<div className='container'>\r\n\t\t\t\t<div className='row'>\r\n\t\t\t\t\t<div className='col-md-12 col-sm-12'>\r\n\t\t\t\t\t\t<h3\r\n\t\t\t\t\t\t\tclassName='wow bounceIn animated text-shadow-dark'\r\n\t\t\t\t\t\t\tdata-wow-delay='0.9s'\r\n\t\t\t\t\t\t\tstyle={{ visibility: 'visible', animationDelay: '0.9s', animationName: 'bounceIn' }}>\r\n\t\t\t\t\t\t\tWelcome to\r\n\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t<h1\r\n\t\t\t\t\t\t\tclassName='wow fadeInUp animated text-shadow-dark'\r\n\t\t\t\t\t\t\tdata-wow-delay='1.6s'\r\n\t\t\t\t\t\t\tstyle={{ visibility: 'visible', animationDelay: '1.6s', animationName: 'fadeInUp' }}>\r\n\t\t\t\t\t\t\tEMC Registration System\r\n\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName='btn btn-lg btn-danger smoothScroll wow fadeInUp animated'\r\n\t\t\t\t\t\t\tdata-wow-delay='2.3s'\r\n\t\t\t\t\t\t\tstyle={{ visibility: 'visible', animationDelay: '2.3s', animationName: 'fadeInUp' }}\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tif (state.has('user')) {\r\n\t\t\t\t\t\t\t\t\thistory.push(routes.DASHBOARD);\r\n\t\t\t\t\t\t\t\t} else if (ref.current) {\r\n\t\t\t\t\t\t\t\t\t$(ref.current).modal('show');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\tLog In\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\tto={routes.PREREGISTRATION}\r\n\t\t\t\t\t\t\tclassName='btn btn-lg btn-danger smoothScroll wow fadeInUp animated'\r\n\t\t\t\t\t\t\tdata-wow-delay='2.3s'\r\n\t\t\t\t\t\t\tstyle={{ visibility: 'visible', animationDelay: '2.3s', animationName: 'fadeInUp' }}>\r\n\t\t\t\t\t\t\tPre Registration\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div ref={ref} className='modal fade bg-dark' tabIndex={-1}>\r\n\t\t\t\t<div className='modal-dialog modal-dialog-centered modal-lg'>\r\n\t\t\t\t\t<div className='modal-content bg-dark'>\r\n\t\t\t\t\t\t<div className='modal-header'>\r\n\t\t\t\t\t\t\t<h5 className='modal-title text-white'>Login</h5>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\tclassName='close'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\tif (ref.current) {\r\n\t\t\t\t\t\t\t\t\t\t$(ref.current).modal('hide');\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<span aria-hidden='true'>&times;</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='modal-body'>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName='m-2 d-block btn btn-danger btn-lg w-100'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\tif (ref.current) {\r\n\t\t\t\t\t\t\t\t\t\t$(ref.current).modal('hide');\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\thistory.push(`/login/admin`);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tAdmin\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName='m-2 d-block btn btn-danger btn-lg w-100'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\tif (ref.current) {\r\n\t\t\t\t\t\t\t\t\t\t$(ref.current).modal('hide');\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\thistory.push(`/login/registrar`);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tRegistrar\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName='m-2 d-block btn btn-danger btn-lg w-100'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\tif (ref.current) {\r\n\t\t\t\t\t\t\t\t\t\t$(ref.current).modal('hide');\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\thistory.push(`/login/teacher`);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tTeacher\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName='m-2 d-block btn btn-danger btn-lg w-100'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\tif (ref.current) {\r\n\t\t\t\t\t\t\t\t\t\t$(ref.current).modal('hide');\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\thistory.push(`/login/student`);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tStudent\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='modal-footer'>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\tclassName='btn btn-danger btn-sm'\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\tif (ref.current) {\r\n\t\t\t\t\t\t\t\t\t\t$(ref.current).modal('hide');\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tClose\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t);\r\n};\r\n\r\nexport default Home;\r\n","import axios from 'axios';\r\nimport dayjs from 'dayjs';\r\nimport React, { FC, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { Link, useHistory, useParams } from 'react-router-dom';\r\nimport { UserContract } from '../../Contracts/user.contract';\r\nimport { handleError } from '../../helpers';\r\nimport { State } from '../../Libraries/State';\r\nimport { routes } from '../../routes';\r\n\r\ntype Props = {};\r\n\r\ntype Inputs = {\r\n\temail: string;\r\n\tpassword: string;\r\n};\r\n\r\nconst Form: FC<Props> = (props) => {\r\n\tconst [tries, setTries] = useState(0);\r\n\tconst [processing, setProcessing] = useState(false);\r\n\tconst { register, handleSubmit } = useForm<Inputs>();\r\n\tconst history = useHistory();\r\n\tconst state = State.getInstance();\r\n\tconst params = useParams<{ role: string }>();\r\n\tconst role = params.role;\r\n\r\n\tconst submit = async (payload: Inputs) => {\r\n\t\tif (state.has('block')) {\r\n\t\t\tconst block = dayjs(state.get<string>('block') || undefined);\r\n\t\t\tif (block.isValid() && dayjs().isAfter(block)) {\r\n\t\t\t\tstate.remove('block');\r\n\t\t\t\tsetTries(0);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (tries >= 3) {\r\n\t\t\treturn toastr.info('Login currently blocked. Please try again after 5 minutes.');\r\n\t\t}\r\n\t\tsetProcessing(true);\r\n\t\ttry {\r\n\t\t\tconst {\r\n\t\t\t\tdata: { user, token },\r\n\t\t\t} = await axios.post<{ user: UserContract; token: string }>('/auth/login', { ...payload, role });\r\n\t\t\tstate.set('user', user);\r\n\t\t\tstate.set('token', token);\r\n\t\t\ttoastr.success(`Welcome back, ${user?.first_name}.`);\r\n\t\t\thistory.push(routes.DASHBOARD);\r\n\t\t} catch (error) {\r\n\t\t\tif (tries >= 3) {\r\n\t\t\t\tstate.set('block', dayjs().add(5, 'minutes').toJSON());\r\n\t\t\t} else {\r\n\t\t\t\tsetTries(tries + 1);\r\n\t\t\t}\r\n\t\t\thandleError(error, false);\r\n\t\t} finally {\r\n\t\t\tsetProcessing(false);\r\n\t\t}\r\n\t};\r\n\r\n\tif (state.has('user')) {\r\n\t\thistory.push(routes.DASHBOARD);\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='wrapper vh-100 overflow-hidden'>\r\n\t\t\t<div className='row align-items-center h-100'>\r\n\t\t\t\t<form className='col-lg-3 col-md-4 col-10 mx-auto text-center' onSubmit={handleSubmit(submit)}>\r\n\t\t\t\t\t<div className='card'>\r\n\t\t\t\t\t\t<div className='card-body'>\r\n\t\t\t\t\t\t\t<div className='text-left'>\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref='/'\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\thistory.goBack();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tBack\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<Link className='navbar-brand mx-auto mt-2 flex-fill text-center' to={routes.HOME}>\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tsrc='/logo.jpg'\r\n\t\t\t\t\t\t\t\t\talt='EMC'\r\n\t\t\t\t\t\t\t\t\tstyle={{ width: '80px', height: '80px' }}\r\n\t\t\t\t\t\t\t\t\tclassName='rounded-circle border'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t<h1 className='h6 mb-3'>Login</h1>\r\n\t\t\t\t\t\t\t<div className='form-group'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='email' className='sr-only'>\r\n\t\t\t\t\t\t\t\t\tEmail Address\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t{...register('email')}\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\tid='email'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control form-control-lg'\r\n\t\t\t\t\t\t\t\t\tplaceholder='Email Address'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='form-group'>\r\n\t\t\t\t\t\t\t\t<label htmlFor='password' className='sr-only'>\r\n\t\t\t\t\t\t\t\t\tPassword\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t{...register('password')}\r\n\t\t\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\t\t\tid='password'\r\n\t\t\t\t\t\t\t\t\tclassName='form-control form-control-lg'\r\n\t\t\t\t\t\t\t\t\tplaceholder='Password'\r\n\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<Link to={routes.FORGOT_PASSWORD} className='d-block'>\r\n\t\t\t\t\t\t\t\tForgot password?\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t<Link to={routes.HOME} className='d-block'>\r\n\t\t\t\t\t\t\t\tReturn to Home Page\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t<button className='btn btn-primary btn-block mt-5 btn-lg' type='submit' disabled={processing}>\r\n\t\t\t\t\t\t\t\t{processing ? <i className='fa fa-circle-notch fa-spin'></i> : 'Login'}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Form;\r\n","import React, { FC } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useURL } from '../../hooks';\r\n\r\ntype Props = {};\r\n\r\nconst Selection: FC<Props> = (props) => {\r\n\tconst url = useURL();\r\n\r\n\treturn (\r\n\t\t<div className='vh-100 d-flex'>\r\n\t\t\t<div className='card align-self-center mx-auto'>\r\n\t\t\t\t<div className='card-body'>\r\n\t\t\t\t\t<Link className='m-2 d-block btn btn-primary btn-lg' to={url(`admin`)}>\r\n\t\t\t\t\t\tAdmin\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t<Link className='m-2 d-block btn btn-info btn-lg' to={url(`registrar`)}>\r\n\t\t\t\t\t\tRegistrar\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t<Link className='m-2 d-block btn btn-success btn-lg' to={url(`teacher`)}>\r\n\t\t\t\t\t\tTeacher\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t<Link className='m-2 d-block btn btn-danger btn-lg' to={url(`student`)}>\r\n\t\t\t\t\t\tStudent\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Selection;\r\n","import React, { FC } from 'react';\r\nimport { Route, Switch, useHistory } from 'react-router';\r\nimport { useURL } from '../../hooks';\r\nimport { State } from '../../Libraries/State';\r\nimport { routes } from '../../routes';\r\nimport Form from './Form';\r\nimport Selection from './Selection';\r\n\r\ntype Props = {};\r\n\r\nconst Login: FC<Props> = (props) => {\r\n\tconst url = useURL();\r\n\tconst state = State.getInstance();\r\n\tconst history = useHistory();\r\n\r\n\tif (state.has('user')) {\r\n\t\thistory.push(routes.DASHBOARD);\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Switch>\r\n\t\t\t<Route path={url('/')} exact component={Selection} />\r\n\t\t\t<Route path={url('/:role')} component={Form} />\r\n\t\t</Switch>\r\n\t);\r\n};\r\n\r\nexport default Login;\r\n","import dayjs from 'dayjs';\r\nimport React, { FC, useEffect, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useQuery } from 'react-query';\r\nimport { useArray, useCurrentYear, useNullable } from '../hooks';\r\nimport { courseService } from '../Services/course.service';\r\nimport Flatpickr from 'react-flatpickr';\r\nimport { useHistory } from 'react-router';\r\nimport { requirementService } from '../Services/requirement.service';\r\nimport { Asker, handleError } from '../helpers';\r\nimport { userService } from '../Services/user.service';\r\nimport axios from 'axios';\r\nimport { CourseContract } from '../Contracts/course.contract';\r\nimport InputMask from 'react-input-mask';\r\nimport { YearContract } from '../Contracts/year.contract';\r\n\r\ntype Props = {};\r\n\r\ntype Inputs = {\r\n\tcourse_id: number;\r\n\tlevel: string;\r\n\tstatus: string;\r\n\tterm: string;\r\n\tstudent_id: number;\r\n\tyear_id: number;\r\n\tmajor_id?: number;\r\n\tpre_registration: boolean;\r\n\trequirements: string[];\r\n\tstudent: {\r\n\t\tuuid: string;\r\n\t\tfirst_name: string;\r\n\t\tlast_name: string;\r\n\t\tmiddle_name?: string;\r\n\t\tgender?: string;\r\n\t\taddress?: string;\r\n\t\tplace_of_birth?: string;\r\n\t\tbirthday?: string;\r\n\t\trole: string;\r\n\t\temail: string;\r\n\t\tnumber: string;\r\n\t\tactive: boolean;\r\n\t\tpassword: string;\r\n\t\tfathers_name?: string;\r\n\t\tmothers_name?: string;\r\n\t\tfathers_occupation?: string;\r\n\t\tmothers_occupation?: string;\r\n\t\ttype: string;\r\n\t\tenrolled: boolean;\r\n\t};\r\n\tforce: boolean;\r\n};\r\n\r\nconst PreRegistration: FC<Props> = (props) => {\r\n\tconst [processing, setProcessing] = useState(false);\r\n\tconst [all, setAll] = useState(false);\r\n\tconst { register, handleSubmit, reset, setValue } = useForm<Inputs>({\r\n\t\tdefaultValues: {\r\n\t\t\tforce: false,\r\n\t\t\tlevel: '1st',\r\n\t\t},\r\n\t});\r\n\tconst [birthday, setBirthday] = useNullable<Date>();\r\n\tconst [course, setCourse] = useNullable<CourseContract>();\r\n\tconst [majorID, setMajorID] = useNullable<number>();\r\n\tconst { data: courses } = useQuery('courses', () => courseService.fetch());\r\n\tconst { data: requirements } = useQuery('requirements', () => requirementService.fetch());\r\n\tconst [selected, setSelected] = useArray<string>();\r\n\tconst [number, setNumber] = useState('');\r\n\tconst history = useHistory();\r\n\tconst { data: year } = useCurrentYear({ onSuccess: (year) => check(year) });\r\n\r\n\tconst submit = async (data: Inputs) => {\r\n\t\tif ((course?.majors?.length || 0) > 0 && !majorID) {\r\n\t\t\treturn toastr.error('Please pick a major.');\r\n\t\t}\r\n\t\tsetProcessing(true);\r\n\t\ttry {\r\n\t\t\tdata.status = 'Regular';\r\n\t\t\tdata.term = '1st Semester';\r\n\t\t\tdata.year_id = year?.id || 0;\r\n\t\t\tdata.pre_registration = true;\r\n\t\t\tdata.requirements = selected;\r\n\t\t\tdata.student.number = number;\r\n\t\t\tdata.student.birthday = birthday?.toJSON() || '';\r\n\t\t\tawait axios.post('/admission/pre-registration', data);\r\n\t\t\ttoastr.success('Pre Registration saved successfully.');\r\n\t\t\treset();\r\n\t\t\thistory.goBack();\r\n\t\t} catch (error) {\r\n\t\t\tif (error.response?.status === 409) {\r\n\t\t\t\tif (await Asker.notice(error.response?.data?.message)) {\r\n\t\t\t\t\tdata.force = true;\r\n\t\t\t\t\tawait submit(data);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\thandleError(error);\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tsetProcessing(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst check = async (year?: YearContract) => {\r\n\t\tif (year) {\r\n\t\t\tconst now = dayjs();\r\n\t\t\tconst start = dayjs(year.registration_start);\r\n\t\t\tconst end = dayjs(year.registration_end);\r\n\t\t\tif (now.isBefore(start)) {\r\n\t\t\t\tawait Asker.okay(\r\n\t\t\t\t\t`Registration will start at ${start.format('MMMM DD, YYYY')}. Please wait until the given date.`,\r\n\t\t\t\t\t'Notice'\r\n\t\t\t\t);\r\n\t\t\t\treturn history.goBack();\r\n\t\t\t}\r\n\t\t\tif (now.isAfter(end)) {\r\n\t\t\t\tawait Asker.okay(`Registration has already ended. Please register at the next registration phase.`, 'Notice');\r\n\t\t\t\treturn history.goBack();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ttoastr.info(\r\n\t\t\t\t'Registrar has not set a school year. Pre Registration will not be available until a registrar sets one.',\r\n\t\t\t\t'Notice'\r\n\t\t\t);\r\n\t\t\thistory.goBack();\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tuserService.fetch().then((users) => {\r\n\t\t\tsetValue(\r\n\t\t\t\t'student.uuid',\r\n\t\t\t\t`student-${`${users.filter((user) => user.role === 'Student').length}`.padStart(5, '0')}-${new Date().getFullYear()}`\r\n\t\t\t);\r\n\t\t});\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className='container py-5'>\r\n\t\t\t<h3>Pre Registration Form</h3>\r\n\t\t\t<form className='form-row' onSubmit={handleSubmit(submit)}>\r\n\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t<label htmlFor='first_name'>First Name</label>\r\n\t\t\t\t\t<input {...register('student.first_name')} type='text' id='first_name' className='form-control' disabled={processing} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t<label htmlFor='address'>Address</label>\r\n\t\t\t\t\t<input {...register('student.address')} type='text' id='address' className='form-control' disabled={processing} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t<label htmlFor='middle_name'>Middle Name</label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\t{...register('student.middle_name')}\r\n\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\tid='middle_name'\r\n\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t<label htmlFor='number'>Phone Number</label>\r\n\t\t\t\t\t<InputMask\r\n\t\t\t\t\t\tmask='0\\999-999-9999'\r\n\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\tid='number'\r\n\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\tvalue={number}\r\n\t\t\t\t\t\tonChange={(e) => setNumber(e.target.value)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t<label htmlFor='last_name'>Last Name</label>\r\n\t\t\t\t\t<input {...register('student.last_name')} type='text' id='last_name' className='form-control' disabled={processing} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t<label htmlFor='email'>Email Address</label>\r\n\t\t\t\t\t<input {...register('student.email')} type='email' id='email' className='form-control' />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t<label htmlFor='gender'>Gender</label>\r\n\t\t\t\t\t<select {...register('student.gender')} id='gender' className='form-control' disabled={processing}>\r\n\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t<option value='Male'>Male</option>\r\n\t\t\t\t\t\t<option value='Female'>Female</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t<label htmlFor='birthday'>Birthday</label>\r\n\t\t\t\t\t<Flatpickr\r\n\t\t\t\t\t\tvalue={birthday || undefined}\r\n\t\t\t\t\t\tid='birthday'\r\n\t\t\t\t\t\toptions={{\r\n\t\t\t\t\t\t\tmaxDate: dayjs()\r\n\t\t\t\t\t\t\t\t.year(new Date().getFullYear() - 15)\r\n\t\t\t\t\t\t\t\t.toDate(),\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonChange={(dates) => {\r\n\t\t\t\t\t\t\tif (dates.length > 0) {\r\n\t\t\t\t\t\t\t\tsetBirthday(dates[0]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t<label htmlFor='course_id'>Course</label>\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\t{...register('course_id')}\r\n\t\t\t\t\t\tid='course_id'\r\n\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\tonChange={async (e) => {\r\n\t\t\t\t\t\t\tconst id = e.target.value.toNumber();\r\n\t\t\t\t\t\t\tconst course = courses?.find((course) => course.id === id);\r\n\t\t\t\t\t\t\tif (course) {\r\n\t\t\t\t\t\t\t\tif (!course.open) {\r\n\t\t\t\t\t\t\t\t\tawait Asker.okay('Sorry, this course is not open for enrollment.');\r\n\t\t\t\t\t\t\t\t\treturn history.goBack();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tsetCourse(course);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tsetCourse(null);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsetMajorID(null);\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t{courses?.map((course, index) => (\r\n\t\t\t\t\t\t\t<option value={course.id} key={index}>\r\n\t\t\t\t\t\t\t\t{course.description}\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t\t{course && course.majors && course.majors.length > 0 ? (\r\n\t\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t\t<label htmlFor='major_id'>Major</label>\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t{...register('major_id')}\r\n\t\t\t\t\t\t\tid='major_id'\r\n\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\tconst value = e.target.value;\r\n\t\t\t\t\t\t\t\tif (value === '') {\r\n\t\t\t\t\t\t\t\t\tsetMajorID(null);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tsetMajorID(value.toNumber());\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<option value=''> -- Select -- </option>\r\n\t\t\t\t\t\t\t{course?.majors?.map((major, index) => (\r\n\t\t\t\t\t\t\t\t<option value={major.id} key={index}>\r\n\t\t\t\t\t\t\t\t\t{major.name}\r\n\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : null}\r\n\t\t\t\t<div className='form-group col-12 p-2'>\r\n\t\t\t\t\t<div className='text-center'>\r\n\t\t\t\t\t\t<h3>Requirements</h3>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='p-2 border rounded row'>\r\n\t\t\t\t\t\t{requirements?.length === 0 ? 'No Requirements' : ''}\r\n\t\t\t\t\t\t{requirements?.map((requirement, index) => (\r\n\t\t\t\t\t\t\t<div className='col-12 col-md-6 col-lg-4 col-xl-3' key={index}>\r\n\t\t\t\t\t\t\t\t<div className='form-group'>\r\n\t\t\t\t\t\t\t\t\t<div className='custom-control custom-checkbox'>\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='custom-control-input'\r\n\t\t\t\t\t\t\t\t\t\t\tid={JSON.stringify(requirement)}\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={processing}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst name = e.target.value;\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (selected.includes(name)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst index = selected.findIndex((m) => m === name);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tselected.splice(index, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tselected.push(name);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetSelected([...selected]);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tchecked={selected.includes(requirement.name)}\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={requirement.name}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<label className='custom-control-label' htmlFor={JSON.stringify(requirement)}>\r\n\t\t\t\t\t\t\t\t\t\t\t{requirement.name}\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t<div className='col-12 d-flex'>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName={`btn btn-${!all ? 'secondary' : 'danger'} btn-sm ml-auto`}\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\tif (requirements) {\r\n\t\t\t\t\t\t\t\t\t\tif (!all) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetSelected(requirements.map((requirement) => requirement.name));\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tsetSelected([]);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tsetAll(!all);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{!all ? 'Select All' : 'Unselect All'}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t<label htmlFor='fathers_name'>Name of Father</label>\r\n\t\t\t\t\t<input {...register('student.fathers_name')} type='text' id='fathers_name' className='form-control' />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t<label htmlFor='mothers_name'>Name of Mother</label>\r\n\t\t\t\t\t<input {...register('student.mothers_name')} type='text' id='mothers_name' className='form-control' />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t<label htmlFor='fathers_occupation'>Occupation of Father</label>\r\n\t\t\t\t\t<input {...register('student.fathers_occupation')} type='text' id='fathers_occupation' className='form-control' />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='form-group col-12 col-md-6'>\r\n\t\t\t\t\t<label htmlFor='mothers_occupation'>Occupation of Mother</label>\r\n\t\t\t\t\t<input {...register('student.mothers_occupation')} type='text' id='mothers_occupation' className='form-control' />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='form-group col-12 col-md-6 d-none'>\r\n\t\t\t\t\t<label htmlFor='uuid'>Student Number</label>\r\n\t\t\t\t\t<input {...register('student.uuid')} type='text' id='uuid' className='form-control' readOnly />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='form-group col-12 d-flex'>\r\n\t\t\t\t\t<span className='mr-auto'>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName='btn btn-secondary btn-sm'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\thistory.goBack();\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tdisabled={processing}>\r\n\t\t\t\t\t\t\tReturn\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<span className='ml-auto'>\r\n\t\t\t\t\t\t<button type='submit' className='btn btn-primary btn-sm' disabled={processing}>\r\n\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default PreRegistration;\r\n","import React, { useEffect, useMemo } from 'react';\r\nimport { v4 } from 'uuid';\r\nimport { BrowserRouter as Router, Switch, Route, RouteProps } from 'react-router-dom';\r\nimport { routes } from '../routes';\r\nimport Dashboard from './Dashboard';\r\nimport Home from './Home';\r\nimport Login from './Login';\r\nimport { QueryClient, QueryClientProvider } from 'react-query';\r\nimport axios from 'axios';\r\nimport { State } from '../Libraries/State';\r\nimport PreRegistration from '../Components/PreRegistration';\r\n\r\nconst urls = [\r\n\t// '/js/jquery.min.js',\r\n\t'/js/popper.min.js',\r\n\t'/js/moment.min.js',\r\n\t'/js/bootstrap.min.js',\r\n\t'/js/simplebar.min.js',\r\n\t'/js/daterangepicker.js',\r\n\t'/js/jquery.stickOnScroll.js',\r\n\t'/js/tinycolor-min.js',\r\n\t'/js/config.js',\r\n\t'/js/d3.min.js',\r\n\t'/js/topojson.min.js',\r\n\t'/js/datamaps.all.min.js',\r\n\t'/js/datamaps-zoomto.js',\r\n\t'/js/datamaps.custom.js',\r\n\t'/js/Chart.min.js',\r\n\t'/js/chart-setup.js',\r\n\t'/js/gauge.min.js',\r\n\t'/js/jquery.sparkline.min.js',\r\n\t'/js/apexcharts.min.js',\r\n\t'/js/apexcharts.custom.js',\r\n\t'/js/jquery.mask.min.js',\r\n\t'/js/select2.min.js',\r\n\t'/js/jquery.steps.min.js',\r\n\t'/js/jquery.validate.min.js',\r\n\t'/js/jquery.timepicker.js',\r\n\t'/js/dropzone.min.js',\r\n\t'/js/uppy.min.js',\r\n\t'/js/quill.min.js',\r\n\t'/js/setup-1.js',\r\n\t'/js/uppy.js',\r\n\t'/js/apps.js',\r\n];\r\n\r\nexport default function App() {\r\n\tconst state = State.getInstance();\r\n\r\n\tconst links: RouteProps[] = useMemo(\r\n\t\t() => [\r\n\t\t\t{\r\n\t\t\t\tpath: routes.HOME,\r\n\t\t\t\texact: true,\r\n\t\t\t\tcomponent: Home,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: routes.LOGIN,\r\n\t\t\t\tcomponent: Login,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: routes.DASHBOARD,\r\n\t\t\t\tcomponent: Dashboard,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: routes.PREREGISTRATION,\r\n\t\t\t\tcomponent: PreRegistration,\r\n\t\t\t},\r\n\t\t],\r\n\t\t[]\r\n\t);\r\n\r\n\tconst check = async () => {\r\n\t\ttry {\r\n\t\t\tconst { data } = await axios.get('/auth/check');\r\n\t\t\tstate.set('user', data);\r\n\t\t} catch (error) {\r\n\t\t\tif (error.response?.status === 401) {\r\n\t\t\t\tstate.remove('user').remove('token');\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tcheck();\r\n\t\tconst id = v4();\r\n\r\n\t\tconst scripts = urls.map((url) => {\r\n\t\t\tconst script = document.createElement('script');\r\n\r\n\t\t\tscript.src = url;\r\n\t\t\tscript.classList.add(id);\r\n\t\t\tscript.defer = true;\r\n\r\n\t\t\treturn script;\r\n\t\t});\r\n\r\n\t\tdocument.body.append(...scripts);\r\n\r\n\t\treturn () => {\r\n\t\t\t$(`.${id}`).remove();\r\n\t\t};\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<QueryClientProvider client={new QueryClient()}>\r\n\t\t\t<Router>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t{links.map((link, index) => (\r\n\t\t\t\t\t\t<Route {...link} key={index} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Switch>\r\n\t\t\t</Router>\r\n\t\t</QueryClientProvider>\r\n\t);\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://cra.link/PWA\r\n\r\nconst isLocalhost = Boolean(\r\n\twindow.location.hostname === 'localhost' ||\r\n\t\t// [::1] is the IPv6 localhost address.\r\n\t\twindow.location.hostname === '[::1]' ||\r\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\r\n\t\twindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\ntype Config = {\r\n\tonSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n\tonUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n\t\t// The URL constructor is available in all browsers that support SW.\r\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n\t\tif (publicUrl.origin !== window.location.origin) {\r\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\r\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\r\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('load', () => {\r\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\r\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\r\n\r\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\r\n\t\t\t\t// service worker/PWA documentation.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\r\n\t\t\t\t\tconsole.log('This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA');\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Is not localhost. Just register service worker\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n\tnavigator.serviceWorker\r\n\t\t.register(swUrl)\r\n\t\t.then((registration) => {\r\n\t\t\tregistration.onupdatefound = () => {\r\n\t\t\t\tconst installingWorker = registration.installing;\r\n\t\t\t\tif (installingWorker == null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tinstallingWorker.onstatechange = () => {\r\n\t\t\t\t\tif (installingWorker.state === 'installed') {\r\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\r\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\r\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\r\n\t\t\t\t\t\t\t// content until all client tabs are closed.\r\n\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\r\n\t\t\t\t\t\t\t\t\t'tabs for this page are closed. See https://cra.link/PWA.'\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\r\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// At this point, everything has been precached.\r\n\t\t\t\t\t\t\t// It's the perfect time to display a\r\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\r\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\r\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t\tconsole.error('Error during service worker registration:', error);\r\n\t\t});\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n\t// Check if the service worker can be found. If it can't reload the page.\r\n\tfetch(swUrl, {\r\n\t\theaders: { 'Service-Worker': 'script' },\r\n\t})\r\n\t\t.then((response) => {\r\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\r\n\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\tif (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\r\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\r\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => {\r\n\t\t\t\t\tregistration.unregister().then(() => {\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Service worker found. Proceed as normal.\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log('No internet connection found. App is running in offline mode.');\r\n\t\t});\r\n}\r\n\r\nexport function unregister() {\r\n\tif ('serviceWorker' in navigator) {\r\n\t\tnavigator.serviceWorker.ready\r\n\t\t\t.then((registration) => {\r\n\t\t\t\tregistration.unregister();\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.error(error.message);\r\n\t\t\t});\r\n\t}\r\n}\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n\tif (onPerfEntry && onPerfEntry instanceof Function) {\r\n\t\timport('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n\t\t\tgetCLS(onPerfEntry);\r\n\t\t\tgetFID(onPerfEntry);\r\n\t\t\tgetFCP(onPerfEntry);\r\n\t\t\tgetLCP(onPerfEntry);\r\n\t\t\tgetTTFB(onPerfEntry);\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import './shims';\r\nimport './boot';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './Views/App';\r\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport './Styles/global.css';\r\n\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t\t<App />\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById('root')\r\n);\r\n\r\nserviceWorkerRegistration.unregister();\r\n\r\nreportWebVitals();\r\n"],"sourceRoot":""}